(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();const qh=[{type:"hero-block",variant:"v1",props:{glassPrimaryCta:"pill-liquid",showNavButtons:"on"}},{type:"what-is-it-block",variant:"v1",props:{glass:"strong",layoutPattern:"bubble-right-mixed"}},{type:"break-block",variant:"v1",props:{tone:"neutral"}},{type:"big-blur-content-block",variant:"v1",props:{glass:"strong",rightPartStyle:"image-plain",showQuestionButton:"on"}},{type:"three-filled-elements-block",variant:"v1",props:{showNumbersInTitles:"on"}},{type:"why-we-block",variant:"v1",props:{glassLeft:"strong",iconLeft:"x",iconRight:"check"}},{type:"break-block",variant:"v1",props:{tone:"neutral"}},{type:"tarifs-block",variant:"v1",props:{glass:"strong",middleTariffStyle:"white",priceButtonStyle:"dark-pill-liquid"}},{type:"big-blur-content-block",variant:"v2",props:{glass:"strong",rightPartStyle:"image-filled",showQuestionButton:"on"}},{type:"bubbles-block",variant:"v1",props:{glass:"strong",count:"6",pattern:"mixed-white-glass"}},{type:"break-block",variant:"v1",props:{tone:"neutral"}},{type:"faq-block",variant:"v1",props:{glass:"strong",collapsible:"on",icon:"plus"}},{type:"prog-block",variant:"v1",props:{glass:"soft"}},{type:"stat-block",variant:"v1",props:{glassCta:"pill-liquid"}},{type:"break-block",variant:"v1",props:{tone:"neutral"}}],Lu={sections:qh},zh={"tab-type":{title:"Жанр лендинга",tabContent:{1:"1) Жанр лендинга на&nbsp;wikipedia**:<br><br>Целевая страница (англ. landing page, также посадочная страница, лендинг)&nbsp;&mdash; веб-страница, основной задачей которой является сбор контактных данных целевой аудитории. <span class='tl__highlighted-text'>Целевая страница используется для усиления эффективности рекламы, увеличения аудитории.</span> Целевая страница обычно содержит информацию о&nbsp;товаре или услуге. &lt;...&gt; <span class='tl__highlighted-text'>Главной задачей таких страниц является превращение посетителя в&nbsp;покупателя или клиента компании</span>, побуждение к&nbsp;целевому действию. Анализ действий пользователей на&nbsp;целевой странице позволяет маркетологам определить успешность рекламы.<br><br>2) Жанр лендинга в&nbsp;программе &laquo;Дизайн и&nbsp;программирование&raquo; Школы Дизайна за&nbsp;2&nbsp;модуль 2&nbsp;курса**:<br><br>Описание<br>В&nbsp;модуле изучается особый жанр сайтов&nbsp;&mdash; лендингов, <span class='tl__highlighted-text'>предназначенных для продвижения продукта в&nbsp;интернете</span>. Особое внимание уделяется понятию о&nbsp;продукте в&nbsp;социально-психологическом контексте его потребления. Студенты знакомятся с&nbsp;базовыми продуктовыми понятиями, изучают жанр посадочной страницы.<br><br>...",2:"Итоговый проект<br>Посадочная страница на&nbsp;платформе Tilda, <span class='tl__highlighted-text'>рекламирующая вымышленный продукт.</span><br><br>Требования к&nbsp;итоговому проекту<br>8&ndash;16&nbsp;слайдов:<br>&mdash;&nbsp;Обложка;<br>&mdash;&nbsp;Постановка задачи: проблематика, контекст, решение;<br>&mdash;&nbsp;Исследование <span class='tl__highlighted-text'>конкурентов</span>, обзор <span class='tl__highlighted-text'>рынка</span>;<br>&mdash;&nbsp;<span class='tl__highlighted-text'>Job Stories</span>;<br>&mdash;&nbsp;<span class='tl__highlighted-text'>Целевая аудитория</span>;<br>&mdash;&nbsp;<span class='tl__highlighted-text'>Результаты кастдева</span>;<br>&mdash;&nbsp;Референсы и&nbsp;мудборд;<br>&mdash;&nbsp;Графическая система;<br>&mdash;&nbsp;Мокап и&nbsp;ссылка на&nbsp;публикацию в&nbsp;Tilda;<br>&mdash;&nbsp;Лендинг: мобильная и&nbsp;десктопная версии;<br>&mdash;&nbsp;По&nbsp;желанию: продукция с&nbsp;символикой, трейлер.<br><br>Критерии оценивания смысловой части проекта<br>&mdash;&nbsp;Уникальная и/или остроумная идея продукта;<br>&mdash;&nbsp;Авторский контент (изображения и&nbsp;текст);<br>&mdash;&nbsp;Выбор соответствующего теме визуального языка.<br><br>...",3:"Критерии оценивания визуальной части проекта<br>&mdash;&nbsp;Аккуратная типографика;<br>&mdash;&nbsp;Единообразие и&nbsp;цельность стиля;<br>&mdash;&nbsp;Режиссура (управление вниманием пользователя/читателя, немонотонная подача);<br>&mdash;&nbsp;Анимация (уместность);<br>&mdash;&nbsp;Логичность и&nbsp;удобство интерактивных решений;<br>&mdash;&nbsp;<span class='tl__highlighted-text'>Соответствие работы генеральной задаче: продать продукт;</span><br>&mdash;&nbsp;Убедительность призыва к&nbsp;действию."}},"tab-pre":{title:"Предисловие",tabContent:{1:"Здесь представлена критика жанра лэндинга как аккумулятора культурной логики позднего капитализма и&nbsp;основной роли дизайнера в&nbsp;ней. Рассмотрим всё, что ожидается от&nbsp;веб-дизайнеров при создании лэндинга, попробуем объективно посмотреть на&nbsp;каждый из&nbsp;шагов, а&nbsp;также предложить какое-то альтернативное направление (?).<br><br>Все вещи, сказанные здесь, относятся не&nbsp;только к&nbsp;лэндингам и&nbsp;не&nbsp;только к&nbsp;Школе Дизайна НИУ ВШЭ, они касаются российского веб-пространства, самоопределения российских веб-дизайнеров и&nbsp;российских практиках обучения веб-дизайну в&nbsp;целом. Но&nbsp;именно этот жанр показался одним из&nbsp;наиболее показательных, поэтому препарировать будем именно его.<br><br>Перед прочтением можно ознакомиться с&nbsp;определением жанра из&nbsp;википедии и&nbsp;тем, как эту задачу видят составители программы в&nbsp;Школе Дизайна (см. <span class='tl__link-to-description tl__jump' data-tab='tab-type'>Жанр лендинга</span>)&nbsp;&mdash; дальше этих текстов в&nbsp;изучении жанра перед началом работы редко заходят и&nbsp;сами веб-дизайнеры."}},"tab-things":{title:"0) Положение вещей",tabContent:{1:"Современные веб-дизайнеры в&nbsp;России, в&nbsp;основном, выполняют карикатурную функцию продавцов на&nbsp;рынке. Предполагается, что они должны <span class='tl__italic-text'>(1)</span> оценить проходящего мимо человека по&nbsp;внешнему виду, прикинуть его покупательные способности, <span class='tl__italic-text'>(2)</span> выкрикнуть несколько шаблонных фраз, подходящих под внешний вид этого покупателя&nbsp;&mdash; пустые риторические конструкции об&nbsp;овощах на&nbsp;прилавке, часто ничего общего с&nbsp;этими овощами не&nbsp;имеющие. Затем они должны <span class='tl__italic-text'>(3)</span> упаковать эти овощи в&nbsp;какой-то пакет и&nbsp;отдать его покупателю. <span class='tl__italic-text'>(4)</span> Если подошедшему покупателю всё понравится, то&nbsp;он&nbsp;купит овощи, если&nbsp;же не&nbsp;купит, считается, что дизайнер выполнил плохую работу. <br><br>Жанр лэндинга идеально подходит под это описание. Так его рассматривают в&nbsp;Школе Дизайна НИУ ВШЭ, так его формулируют в&nbsp;задачах на&nbsp;модуль и&nbsp;так выглядят сделанные большинством студентов одинаковые, в&nbsp;сущности, работы. Оценивают это, соответственно, по&nbsp;тому, насколько хорошо дизайнер определил покупателя по&nbsp;его внешнему виду, насколько хорошо расхвалил несуществующие помидоры, насколько хорошо работает на&nbsp;этот сценарий выбранные дизайнером цвет пакета и&nbsp;форма его ручек, и&nbsp;насколько хорошо этот пакет вписывается к&nbsp;остальным пакетам других дизайнеров на&nbsp;рынке."}},"tab-point":{title:"1) Начальная точка работы веб-дизайнера",tabContent:{1:"Работа с&nbsp;&laquo;целевой аудиторией&raquo;&nbsp;&mdash; первое, что ожидается от&nbsp;веб-дизайнера при создании дизайна лэндинга. Предполагается, что правильной оценке того, кто стоит перед дизайнером, определяются всё последующие шаги&nbsp;&mdash; выбор риторических конструкций и&nbsp;выбор пакета. Дизайнер прикидывает, что&nbsp;бы ему выбрать, чтобы стоящий перед ним человек купил&nbsp;то, что оборачивается в&nbsp;пакет и&nbsp;нахваливается.<br><br>Исходная точка уже предполагает ложную цель&nbsp;&mdash; угодливо-рекламную, а&nbsp;не&nbsp;сущностно-качественную. Перед веб-дизайнером никогда не&nbsp;стоит задача сделать интересно, сделать дизайн языком, системой, продолжением внутреннего содержания проекта. Перед ним стоит задача продать. И&nbsp;первое, на&nbsp;что дизайнер должен посмотреть в&nbsp;таком про-капиталистическом сценарии&nbsp;&mdash; не&nbsp;на&nbsp;проект/объект/продукт&nbsp;&mdash; а&nbsp;на&nbsp;покупателя; потом сидеть и&nbsp;гадать, какой&nbsp;же пакет и&nbsp;набор слов ему&nbsp;бы понравился (причем покупателем здесь может быть кто угодно&nbsp;&mdash; включая комиссию на&nbsp;просмотре)."}},"tab-words":{title:"2) Словоблудие веб-дизайнера",tabContent:{1:"Исходя из&nbsp;определенной&nbsp;ца, дизайнер выбирает, что ему сказать. Такая речь состоит из&nbsp;горы в&nbsp;сущности пустых фраз, цифр и&nbsp;обещаний, и&nbsp;служит одной цели&nbsp;&mdash; закрепить набор знаков, которые&nbsp;бы понравились покупателю, за&nbsp;продуктом. Суть самого продукта при этом не&nbsp;имеет особенного значения, она может быть абсолютно любой, это не&nbsp;важно.<br><br>Об&nbsp;этом говорит&nbsp;а) то, что российский коммерческий веб-дизайн весь собран из&nbsp;одного и&nbsp;того&nbsp;же узкого набора шаблонов, несмотря на&nbsp;то, насколько разные продукты им&nbsp;могут продвигаться,&nbsp;б) то, что при обучении веб-дизайну на&nbsp;большинстве курсов в&nbsp;России мы&nbsp;вольны выбрать любой несуществующий, а&nbsp;часто и&nbsp;не&nbsp;предполагающий существование вообще, продукт (причем дизайн веб-страницы для марсианских булочек переводящих язык на&nbsp;любой другой, и&nbsp;для домашнего ядовитого растения подсказывающего математику, может быть практически идентичным), а&nbsp;также&nbsp;в) единый корпус текстов, который используется для описания любых продуктов, и&nbsp;отсутствие желания, возможности и&nbsp;надобности вылезать за&nbsp;рамки этого корпуса.<br><br>...",2:"Такие продукты все уникальные, помогающие, успокаивающие, избавляющие от&nbsp;тревоги, спасающие, необходимые, лучшие, качественные, первые, одобрены психологами и&nbsp;профессионалами, и&nbsp;еще много какие. Подобные тексты мусорные и&nbsp;скучные, они навязчиво умоляют тебя им&nbsp;поверить, жалостливо пытаются связать себя с&nbsp;любыми овощами (какими&nbsp;бы тухлыми они не&nbsp;были), которые продает дизайнер. А&nbsp;в&nbsp;учебных лэндингах даже этих тухлых овощей не&nbsp;существует. Веб-дизайнеров учат транслировать бессмысленные знаки, указывающие на&nbsp;бессмысленные вещи, которые, в&nbsp;свою очередь, часто тоже указывают на&nbsp;бессмысленные знаки. Учат оборачивать эту одинаковую бессмыслицу в&nbsp;такие&nbsp;же одинаковые шаблонные конструкции разных цветов.<br><br>Писать свой корпус текстов, которые должны появиться в&nbsp;проекте/рядом с&nbsp;продуктом (исходя из&nbsp;этого проекта/продукта), их&nbsp;не&nbsp;учат&nbsp;&mdash; учат цеплять к&nbsp;нему уже готовые. Рассказ о&nbsp;проекте/продукте появляется не&nbsp;из&nbsp;него самого, не&nbsp;из&nbsp;его сути, а&nbsp;из&nbsp;какой-то внешней точки, из&nbsp;желания продать этот продукт, повесть на&nbsp;него набор проверенных продающих знаков извне. То&nbsp;есть не&nbsp;проект порождает вокруг себя язык, а&nbsp;язык, ничего общего с&nbsp;проектом не&nbsp;имеющий, наклеивается этикеткой-ценником на&nbsp;проект, оборачивается вокруг него.<br><br>...",3:"Ни&nbsp;одной точки реальности в&nbsp;этой цепочке никогда не&nbsp;появляется. Зачастую даже в&nbsp;определении целевой аудитории&nbsp;&mdash; это просто представление дизайнера (или и&nbsp;вовсе gpt) о&nbsp;трех несуществующих личностях и&nbsp;об&nbsp;их&nbsp;несуществующей, придуманной веб-дизайнером, жизни. Все слова и&nbsp;риторические конструкции, которые уже были замечены здесь в&nbsp;работе веб-дизайнера, не&nbsp;имеют внутри себя никакого смысла. За&nbsp;ними абсолютно ничего нет. Это производство ни&nbsp;на&nbsp;что не&nbsp;указывающих знаков. Это довольно глупая, неинтересная галлюцинаторная работа, не&nbsp;имеющая ничего общего с&nbsp;дизайном."}},"tab-send":{title:"3) Рабочая песочница веб-дизайнера",tabContent:{1:"(Заметим, что к&nbsp;собственно дизайну в&nbsp;привычном его понимании мы&nbsp;переходим только в&nbsp;третьем пункте).<br><br>Лэндинг предполагает очень конкретный набор кубиков, из&nbsp;которых складываются&nbsp;90% всех встреченных в&nbsp;ходе исследования лэндингов&nbsp;&mdash; как учебных, так и&nbsp;реализованных. Это набор скругленных прямоугольных сущностей разного цвета, в&nbsp;которые можно занести бессмыслицу, о&nbsp;которой говорилось в&nbsp;пункте 2. Ширина дизайнерской мысли заключается в&nbsp;следующем:<br><br>&mdash;&nbsp;в&nbsp;выборе степени скругления углов прямоугольных сущностей (иногда скругления доходят до&nbsp;кругов, но&nbsp;в&nbsp;целом это та&nbsp;же сущность; иногда дизайнер не&nbsp;скругляет углы, и&nbsp;кажется, это все еще одна и&nbsp;та&nbsp;же сущность).<br><br>&mdash;&nbsp;в&nbsp;выборе шрифта и&nbsp;кегля для текста в&nbsp;этих сущностях и&nbsp;вовне этих сущностей.<br><br>&mdash;&nbsp;в&nbsp;расставлении этих сущностей по&nbsp;веб-странице в&nbsp;определенном порядке и&nbsp;заполнения их&nbsp;цветом/картинкой, опционально градиентом/блюром/обводкой. Можно растянуть сущность на&nbsp;весь экран или повесить на&nbsp;нее анимацию.<br><br>&mdash;&nbsp;подпункт: в&nbsp;выборе положения продукта на&nbsp;картинке, положения картинки на&nbsp;веб-странице.<br><br>...",2:"И&nbsp;даже в&nbsp;таком узком наборе графических элементов (их&nbsp;три&mdash; текст, прямоугольные сущности, картинки) и&nbsp;решений, которые надо принять (выбор скругления, выбор внешнего вида текста, выбор композиции) веб-дизайнер умудряется сталкиваться с&nbsp;нехваткой идей. Поэтому он&nbsp;идет на&nbsp;pinterest, или любую другую такую&nbsp;же платформу, где, подобно охотникам-собирателям, срывает плоды чужих решений, затем несёт их&nbsp;в&nbsp;свой figma-файл и&nbsp;повторяет практически точь-в-точь, наивно пологая, что если перенести решения не&nbsp;одной работы, а&nbsp;нескальных, и&nbsp;немного поменять цвет и&nbsp;ширину обводки, этого дублирования никто не&nbsp;заметит.<br><br>Учтем, что все эти решения снова вырастают не&nbsp;из&nbsp;продукта/проекта, а&nbsp;берутся где-то извне, компилируются в&nbsp;стороне от&nbsp;него, продукт здесь только один из&nbsp;материалов для этой компиляции, от&nbsp;него дизайнер не&nbsp;отталкивается. Снова от&nbsp;сути продукта/проекта ничего не&nbsp;зависит.<br><br>...",3:"Итого, каждое&nbsp;из (всего лишь) трех решений он&nbsp;принимает не&nbsp;самостоятельно, а&nbsp;опираясь на&nbsp;такие&nbsp;же скучные чужие работы. Причем даже если он&nbsp;не&nbsp;заходит на&nbsp;pinterest, у&nbsp;него абсолютно все шансы сделать ту&nbsp;же самую сборку. Потому что вчера, позавчера и&nbsp;все прожитые дни до&nbsp;этого момента он&nbsp;наблюдал за&nbsp;&laquo;современным&raquo; шаблонным российским веб-дизайном, и&nbsp;масштаб его &laquo;творческого&raquo; поля ограничивается всё теми&nbsp;же увиденными конструкциями, все теми&nbsp;же впитанными шаблонами, все теми&nbsp;же скругленными прямоугольными сущностями.<br><br>Будучи засосанным в&nbsp;воронку этой продажно-покупательной среды и&nbsp;окруженным всеми этими однотипным веб-объектами, такой дизайнер уверен, что это всё, что ему дано. Что на&nbsp;этом веб-дизайн в&nbsp;целом заканчивается. Поэтому на&nbsp;передний план (иногда) начинает выходить технологическое выпендрежничество, сути за&nbsp;которым всё еще никакой, но&nbsp;которое, по&nbsp;началу, ощущается хотя&nbsp;бы сколько-то ново."}},"tab-assess":{title:"4) Обучение и оценка веб-дизайнера",tabContent:{1:"Практики обучения веб-дизайну в&nbsp;России в&nbsp;большинстве своем не&nbsp;пытаются вылезти за&nbsp;эти рамки. Преподавателям, видимо, не&nbsp;хватает либо компетенции, либо смелости двигать студентов в&nbsp;более интересную (хотя, несомненно, и&nbsp;более сложную) сторону. Они либо поощряют скуку и&nbsp;этот парад одинаковых решений разных цветов, либо молча с&nbsp;ним смиряются, причем последние еще хуже (потому что если ты&nbsp;в&nbsp;лоб не&nbsp;видишь проблему, то&nbsp;ты&nbsp;в&nbsp;жертвенной позиции, но&nbsp;если ты&nbsp;видишь&nbsp;ее, и, обладая авторитетом, принципиально ничего с&nbsp;ней не&nbsp;делаешь, то&nbsp;ты&nbsp;в&nbsp;позиции предателя).<br><br>а) То, что в&nbsp;программе &laquo;дизайна и&nbsp;программирования&raquo; Школы Дизайна все формулировки задач подчеркнуто &laquo;маркетинговые&raquo;,&nbsp;б) то, что уклон в&nbsp;продажность часто оценивается и&nbsp;поощряется гораздо больше, чем желание собрать нетривиальный дизайн, заставляющей остановиться, в) и&nbsp;то, что в&nbsp;таких учебных заведениях приучают студентов смотреть на&nbsp;себя как на&nbsp;продавцов помидоров (а&nbsp;с&nbsp;постановкой задач типа &laquo;лэндинга&raquo; этого модуля по-другому ты&nbsp;на&nbsp;себя и&nbsp;не&nbsp;посмотришь), уродует самоопределение российских веб-дизайнеров, снижает качество и&nbsp;занимательность их&nbsp;работ, равняет все работы под одну гребенку и&nbsp;делает российское веб-пространство ужасно одинаковым неинтересным местом.<br><br>...",2:"Конечно, даже с&nbsp;такими образовательными тенденциями появляется что-то классное. Кажется, даже наша веб-культура не&nbsp;справляется до&nbsp;конца с&nbsp;выхолащиванием интересных взглядов на&nbsp;веб-объекты и&nbsp;не&nbsp;может сдержать потенциал всех дизайнеров в&nbsp;этом медиа. А&nbsp;что&nbsp;бы было, если&nbsp;бы этих дизайнеров не&nbsp;пытались постоянно дергать в&nbsp;другую сторону, не&nbsp;старались навязчиво впарить&nbsp;бы им&nbsp;продажу помидоров и&nbsp;не&nbsp;использовали&nbsp;бы в&nbsp;задачах формулировки, заведомо определяющие про-капиталистический характер итога? Ну&nbsp;хотя&nbsp;бы в&nbsp;их&nbsp;обучении.<br><br>А&nbsp;делать качественный крутой дизайн нас особенно не&nbsp;учат, не&nbsp;показывают хорошие интересные примеры, не&nbsp;направляют. Посредственность поощряется нормальным оценками, прописанными критериями, характером формулировок. Но&nbsp;студентам и&nbsp;так сложно, и&nbsp;большинство просто идет в&nbsp;предложенную сторону, слепо принимая дурацкие правила игры, обманываясь, замыкаясь в&nbsp;шаблонности и&nbsp;думая, что эта шаблонность&nbsp;&mdash; всё, что они могут сделать в&nbsp;этом медиа.<br><br>А&nbsp;это далеко не&nbsp;всё, и, кажется, это должны объяснять нам преподаватели. Но&nbsp;пока вместо этого они занимаются тем, что упорно пытаются преподать нам ту&nbsp;же самую шаблонность. Учат нас рисовать скругленные ценники на&nbsp;скругленных пакетах. Учат нас все дальше уходить от&nbsp;реальности и&nbsp;конкретности, от&nbsp;создания хорошего дизайна, от&nbsp;действительно интересных в&nbsp;профессии процессов."}},"tab-output":{title:"(?) Итог?",tabContent:{1:"Задача сделать лэндинг, вероятно, не&nbsp;так плоха, если ее&nbsp;переформулировать. Если попытаться не&nbsp;подчинять дизайнера законам рынка (однообразный внешний вид которого, кстати, дизайнеры&nbsp;же и&nbsp;формируют) с&nbsp;пеленок, то&nbsp;он, возможно, сделает и&nbsp;с&nbsp;этой задачей что-нибудь интересное.<br><br>Но&nbsp;надо понимать, что&nbsp;а) пока веб-дизайнер не&nbsp;выйдет за&nbsp;границы привычного ему веб-пространства,&nbsp;б) пока не&nbsp;посмотрит критическим взглядом на&nbsp;обилие данных ему инструментов еще раз, в) пока не&nbsp;очнется от&nbsp;своей роли продавца помидоров и&nbsp;не&nbsp;поймет, что его профессия гораздо интереснее и&nbsp;созидательнее, чем он&nbsp;ее&nbsp;видит, г) пока не&nbsp;переместит свой взгляд с&nbsp;pinterest и&nbsp;миллиард раз принятых за&nbsp;него одних и&nbsp;тех&nbsp;же решений на&nbsp;то, как ещё он&nbsp;может собрать свой дизайн, д) пока не&nbsp;посмотрит на&nbsp;свою работу как на&nbsp;интересный живой веб-объект, а&nbsp;не&nbsp;как на&nbsp;прилавок из&nbsp;чужих конструкций, е) пока не&nbsp;перестанет орать о&nbsp;бессодержательных вещах, и&nbsp;не&nbsp;начнет рассуждать хоть о&nbsp;чем-то, имеющим отношение к&nbsp;реальности, нормального и&nbsp;сколько-нибудь интересного, ценного примера в&nbsp;российском веб-дизайне мы&nbsp;не&nbsp;увидим. По&nbsp;крайней мере, очень странно ждать появление чего-то такого."}}},Wh={"hero-block":{v1:{titleHtml:"Меньше шума.<br>Больше ясности.",description:"Первое в России системное решение для устойчивого состояния в условиях перегруженной среды.",primaryCtaText:"Купить",primaryCtaHref:"#",secondaryCtaText:"Узнать больше",secondaryCtaHref:"#",rightTopTag:"/#wearemorethenyouthink",rightNavTextHtml:"Что это •<br>Общая информация •<br>Конкуренты •<br>Тарифы •<br>Отзывы •<br>FAG •",rightEmail:"/revolutionproduct@mail.com",yearMark:"/2026",helpButtonText:"Получить помощь",quizButtonText:"?!"}},"what-is-it-block":{v1:{title:"Что это? →",description:"",sections:[{heading:"Стабилизирующий фон",text:"Это не продукт и не сервис. Скорее, постоянное присутствие, которое выравнивает восприятие и снижает резкие колебания реакции на среду.",buttonText:"Узнать больше"},{heading:"Экономия внимания",text:"Не требует фокусировки и вовлечения. Работает за счёт уменьшения количества микрорешений и ненужных переключений.",buttonText:"Посмотреть подробнее"},{heading:"Мягкая рамка",text:"Вы не взаимодействуете напрямую — меняется контекст, в котором всё остальное становится менее требовательным.",buttonText:"Прочитать ещё"}]},v2:{title:"Зачем это нужно? →",description:"",sections:[{heading:"Фоновая поддержка",text:"Это не ответ на проблему, и а способ сделать и  и её менее заметной и за счёт изменения общего фона восприятия.",buttonText:"Узнать больше"},{heading:"Ровный режим",text:"Не ускоряет и не замедляет. Поддерживает устойчивый ритм, и в котором проще оставаться и в одном состоянии дольше обычного.",buttonText:"Посмотреть подробнее"},{heading:"Присутствие без действия",text:"Ничего не требует от пользователя. Просто находится рядом и тем самым влияет на ощущение происходящего.",buttonText:"Прочитать ещё"}]},v3:{title:"Что это даёт на самом деле? →",description:"",sections:[{heading:"Снижение шума",text:"Работает не с содержанием, а с фоном, на котором это содержание воспринимается. Меньше перегрузки — меньше сопротивления.",buttonText:"Узнать больше"},{heading:"Спокойное внимание",text:"Не мотивация и не концентрация. Скорее, состояние, при котором внимание перестаёт распадаться.",buttonText:"Посмотреть подробнее"},{heading:"Контекст вместо инструмента",text:"Это не механизм и не метод. Это рамка, внутри которой действия ощущаются проще.",buttonText:"Прочитать ещё"}]},v4:{title:"Как это можно понимать? →",description:"",sections:[{heading:"Общее выравнивание",text:"Не влияет на отдельные эмоции. Меняет общее ощущение среды, делая её менее требовательной.",buttonText:"Узнать больше"},{heading:"Минимальное участие",text:"Не нужно настраивать, запускать или контролировать. Эффект возникает без активных усилий.",buttonText:"Посмотреть подробнее"},{heading:"Формат рядом",text:"Это не решение и не рекомендация. Скорее, способ быть в пространстве иначе.",buttonText:"Прочитать ещё"}]},v5:{title:"Что именно здесь предлагается? →",description:"",sections:[{heading:"Психологический фон",text:"Не вмешательство, а постоянный уровень поддержки, который ощущается скорее как отсутствие лишнего.",buttonText:"Узнать больше"},{heading:"Устойчивый режим",text:"Без резких изменений и стимулов. Поддерживает состояние, в котором меньше внутренних скачков.",buttonText:"Посмотреть подробнее"},{heading:"Ненавязчивое присутствие",text:"Вы не получаете действие или инструкцию. Вы получаете ощущение, что от вас временно ничего не требуется.",buttonText:"Прочитать ещё"}]},v6:{title:"Как это работает, если коротко? →",description:"",sections:[{heading:"Работа с восприятием",text:"Не 0меняет события, но меняет то, как они ощущаются на фоне друг друга.",buttonText:"Узнать больше"},{heading:"Снижение внутренней плотности",text:"Меньше перегруженности, меньше внутреннего напряжения, больше ровного времени.",buttonText:"Посмотреть подробнее"},{heading:"Среда, а не объект",text:"Вы правда все еще читаете что здесь написано? Вы герой!",buttonText:"Прочитать ещё"}]}},"break-block":{v1:{title:"Это базовый уровень психологической устойчивости",description:"Это работает с тем фоном состояния, который определяет, насколько человеку хватает ресурсов справляться с нагрузкой без постоянного внутреннего напряжения."},v2:{title:"Это снижает нагрузку до того, как она ощущается",description:"Это воздействует не на отдельные реакции, а на общий психический фон, из которого перегрузка обычно накапливается незаметно."},v3:{title:"Это поддерживает, пока вы заняты другим",description:"Это встроено в восприятие среды и продолжает работать, даже когда внимание направлено на задачи, а не на собственное состояние."},v4:{title:"Это формирует устойчивость, а не всплеск",description:"Это не краткий эффект и не момент расслабления, а состояние, которое удерживается со временем и снижает внутреннюю изнашиваемость."},v5:{title:"Это уменьшает внутреннюю энтропию",description:"Это выравнивает фон восприятия, за счёт чего снижается количество хаотичных мыслительных и эмоциональных переключений."},v6:{title:"Это работает без усилия со стороны человека",description:"Это не требует концентрации, дисциплины или самоконтроля — эффект достигается за счёт изменения общего режима восприятия."},v7:{title:"Это снижает фоновую тревожность",description:"Это действует на уровне состояния, где тревога ещё не оформляется в мысли, но уже влияет на общее ощущение напряжения."},v8:{title:"Это делает нагрузку переносимой",description:"Это не убирает сложность среды, но меняет то, как она ощущается, снижая давление на психику."},v9:{title:"Это экономит психический ресурс",description:"Это уменьшает количество микрострессов, которые обычно расходуют энергию и внимание в течение дня."},v10:{title:"Это стабилизирует внимание",description:"Это создаёт условия, при которых внимание меньше распадается и дольше остаётся в ровном, устойчивом режиме."},v11:{title:"Это работает в фоне, а не в моменте",description:"Это не требует отдельного времени или действий — состояние постепенно меняется само, на уровне повседневного восприятия."},v12:{title:"Это снижает избыточную реактивность",description:"Это уменьшает необходимость постоянно реагировать на внешние стимулы и адаптироваться к каждому изменению."},v13:{title:"Это поддерживает психику в длительной перспективе",description:"Это рассчитано не на быстрый эффект, а на устойчивое состояние, которое формируется и удерживается со временем."},v14:{title:"Это делает спокойствие нормой",description:"Это переводит спокойное состояние из редкого события в фоновый режим, на котором строится повседневная активность."},v15:{title:"Это меняет ощущение среды",description:"Это влияет не на поведение напрямую, а на то, как человек ощущает окружающее, снижая общее психическое давление."}},"big-blur-content-block":{v1:{title:"Создано, чтобы быть опорой в фоне",cardTitle:"Клуб как долгосрочная поддержка",cardText:"Клуб — это подписка на устойчивое состояние. Не активность и не расписание, а постоянный доступ к среде, которая снижает фоновую нагрузку и помогает сохранять внутреннее равновесие в повседневной жизни.",ctaText:"Узнать больше",ctaHref:"#",imageSrc:"./src/assets/imgs/lend/woman.png",imageAlt:""},v2:{title:"Когда поддержка не требует участия",cardTitle:"Формат присутствия вместо обязательств",cardText:"Это закрытое пространство для тех, кто выбирает спокойствие как стратегию. Здесь нет необходимости быть активным — достаточно находиться внутри среды, которая работает на уровне состояния.",ctaText:"Присоединиться",ctaHref:"#",imageSrc:"./src/assets/imgs/lend/water.png",imageAlt:""},v3:{title:"Спокойствие как часть повседневности",cardTitle:"Подписка на устойчивый психологический фон",cardText:"Программа построена как непрерывная поддержка: без резких воздействий, без стимулов и дедлайнов. Вы получаете стабильный фон, на котором легче выдерживать нагрузку и сохранять ясность.",ctaText:"Подробнее о программе",ctaHref:"#",imageSrc:"./src/assets/imgs/lend/forest.png",imageAlt:""},v4:{title:"Не больше, а тише",cardTitle:"Клуб для тех, кто снижает интенсивность",cardText:"Это сообщество объединяет людей, которые осознанно уменьшают давление среды. Клуб даёт доступ к форматам и материалам, поддерживающим ровное, нераздробленное состояние.",ctaText:"Вступить в клуб",ctaHref:"#",imageSrc:"./src/assets/imgs/lend/family.png",imageAlt:""},v5:{title:"Поддержка, встроенная в жизнь",cardTitle:"Закрытая программа психологической устойчивости",cardText:"Программа рассчитана на длительное использование и работает в фоне. Она не требует концентрации или усилий, но постепенно меняет ощущение повседневной нагрузки.",ctaText:"Узнать условия",ctaHref:"#",imageSrc:"./src/assets/imgs/lend/Group 5.png",imageAlt:""},v6:{title:"Когда среда начинает помогать",cardTitle:"Пространство для устойчивого ритма",cardText:"Это не курс и не марафон. Это формат, в котором вы остаетесь внутри поддерживающей среды и получаете доступ к состоянию, а не к списку действий.",ctaText:"Посмотреть формат",ctaHref:"#",imageSrc:"./src/assets/imgs/lend/lal.png",imageAlt:""},v7:{title:"Поддержка, адаптированная под разные ритмы",cardTitle:"Содружество программ психологической устойчивости",cardText:"Это единое пространство, в котором собраны разные форматы поддержки: индивидуальные, корпоративные и командные. Программы работают с фоном состояния и подстраиваются под контекст жизни и работы.",ctaText:"Посмотреть программы",ctaHref:"#",imageSrc:"./src/assets/imgs/lend/Group 5.png",imageAlt:""},v8:{title:"Когда устойчивость становится системой",cardTitle:"Корпоративные и личные программы поддержки",cardText:"Содружество объединяет решения для отдельных людей и для организаций. Корпоративные программы снижают фоновую перегруженность команд, а личные форматы помогают сохранять ресурс в условиях постоянной нагрузки.",ctaText:"Узнать подробнее",ctaHref:"#",imageSrc:"./src/assets/imgs/lend/lal.png",imageAlt:""},v9:{title:"Не одна программа, а экосистема",cardTitle:"Пространство для разных форм устойчивости",cardText:"Внутри содружества доступны несколько направлений: корпоративные форматы для команд, финансовые программы для снижения тревожности, и телесные практики для поддержания устойчивого ритма.",ctaText:"Открыть направления",ctaHref:"#",imageSrc:"./src/assets/imgs/lend/forest.png",imageAlt:""},v10:{title:"Устойчивость под разные задачи",cardTitle:"Программы для работы, жизни и восстановления",cardText:"Содружество включает несколько программ: корпоративную для среды команд, финансовую для снижения фоновой тревожности, и спортивную для стабилизации телесного ритма. Все форматы направлены на формирование устойчивого фона, а не на краткосрочные эффекты.",ctaText:"Выбрать программу",ctaHref:"#",imageSrc:"./src/assets/imgs/lend/woman.png",imageAlt:""}},"three-filled-elements-block":{v1:{title:"Наши ценности →",description:"Мы выстраиваем продукт вокруг устойчивости, заботы и реальной пользы для человека.",items:[{title:"1. Забота",text:"Мы проектируем это с учётом того, как среда влияет на психику человека, и осознанно убираем всё, что создаёт лишнее давление."},{title:"2. Осознанность",text:"Каждое решение основано на понимании психологических процессов, а не на модных предположениях."},{title:"3. Устойчивость",text:"Это формирует фон, на котором человеку проще жить и работать без постоянного внутреннего напряжения."}]},v2:{title:"Наши приоритеты →",description:"Мы выбираем долгосрочную пользу и комфорт клиента вместо кратких эффектов.",items:[{title:"1. Человек",text:"Состояние человека для нас важнее метрик вовлечённости и активности."},{title:"2. Комфорт",text:"Формат не требует усилий и не превращается в ещё одну задачу."},{title:"3. Надёжность",text:"Это работает стабильно и предсказуемо, снижая тревожность и напряжение."}]},v3:{title:"Наше отношение к клиентам →",description:"Мы строим отношения на доверии, уважении и реальной поддержке.",items:[{title:"1. Уважение",text:"Мы бережно относимся к вниманию и времени клиента и не перегружаем его."},{title:"2. Честность",text:"Без громких обещаний и манипуляций — только понятная польза."},{title:"3. Поддержка",text:"Клиент чувствует, что продукт помогает, а не требует большего."}]},v4:{title:"Характеристики этого →",description:"Ключевые свойства формата, которые делают его частью повседневной жизни.",items:[{title:"1. Фоновость",text:"Это работает в фоне и не требует постоянного взаимодействия."},{title:"2. Простота",text:"Понятный формат без сложных настроек и обучения."},{title:"3. Стабильность",text:"Ровное и предсказуемое влияние на состояние со временем."}]},v5:{title:"Польза этого →",description:"Результаты, которые ощущаются в повседневной жизни.",items:[{title:"1. Спокойствие",text:"Снижается фоновая тревожность и ощущение постоянного давления."},{title:"2. Ресурс",text:"У человека остаётся больше энергии на ежедневные задачи."},{title:"3. Ясность",text:"Внимание меньше распадается, мышление становится ровнее."}]},v6:{title:"Необходимость этого сегодня →",description:"Ответ на условия современной перегруженной среды.",items:[{title:"1. Нагрузка",text:"Современный ритм жизни создаёт постоянное давление на психику."},{title:"2. Темп",text:"Постоянные изменения требуют устойчивого фона состояния."},{title:"3. Выносливость",text:"Это помогает сохранять ресурс в долгой перспективе."}]},v7:{title:"Интеграция этого в жизнь →",description:"Формат, который не нарушает привычный ритм.",items:[{title:"1. Естественность",text:"Это не требует перестройки образа жизни или привычек."},{title:"2. Фон",text:"Поддержка ощущается постоянно, но ненавязчиво."},{title:"3. Совместимость",text:"Формат легко сочетается с работой, отдыхом и личной жизнью."}]},v8:{title:"Почему появилось это →",description:"Ответ на реальный запрос людей и среды.",items:[{title:"1. Перегрузка",text:"Мы видим, как людям становится всё сложнее справляться с напряжением."},{title:"2. Запрос",text:"Рынок переполнен активностями, но не поддержкой состояния."},{title:"3. Ответ",text:"Это стало нашим решением для более устойчивой жизни."}]},v9:{title:"Забота о клиентах →",description:"Мы постоянно работаем над качеством и комфортом.",items:[{title:"1. Внимание",text:"Мы внимательно относимся к обратной связи и опыту клиентов."},{title:"2. Улучшение",text:"Формат регулярно дорабатывается и развивается."},{title:"3. Доверие",text:"Нам важно, чтобы клиент был уверен в своём выборе."}]},v10:{title:"Ответственность, которую мы берём →",description:"Мы осознаём влияние продукта и отвечаем за результат.",items:[{title:"1. Влияние",text:"Мы понимаем, как продукт воздействует на психическое состояние."},{title:"2. Качество",text:"Каждое решение проходит внутреннюю проверку."},{title:"3. Результат",text:"Мы отвечаем за то, чтобы продукт действительно облегчал жизнь."}]}},"why-we-block":{v1:{title:"Наш подход →",description:"Мы сознательно выбрали другой способ работать с состоянием и участием.",leftTitle:"Как делают другие",rightTitle:"Как делаем мы",left:[{title:"Универсальные решения —",text:"Одинаковые форматы для всех, без учета жизненного контекста."},{title:"Жёсткий формат —",text:"Человеку приходится подстраиваться под систему."}],right:[{title:"Контекстный подход —",text:"Формат учитывает реальный ритм и нагрузку человека."},{title:"Мягкая интеграция —",text:"Поддержка работает в фоне и не вторгается в процессы."},{title:"Свобода участия —",text:"Уровень вовлечённости всегда остаётся выбором человека."}]},v2:{title:"Что меняется со временем →",description:"Разница проявляется постепенно и ощущается устойчиво.",leftTitle:"До использования",rightTitle:"После использования",left:[{title:"Фоновое напряжение —",text:"Постоянное ощущение усталости и внутреннего давления."}],right:[{title:"Ровное состояние —",text:"Психологический фон становится стабильнее."},{title:"Предсказуемость —",text:"Меньше резких эмоциональных и ментальных скачков."}]},v3:{title:"Как устроен рынок →",description:"И почему мы пошли другим путём.",leftTitle:"Типичный рынок",rightTitle:"Наше решение",left:[{title:"Постоянная активность —",text:"Ожидается непрерывное участие и вовлечённость."},{title:"Контроль и оценка —",text:"Результат нужно постоянно подтверждать."},{title:"Краткий эффект —",text:"Облегчение быстро проходит."}],right:[{title:"Фоновая поддержка —",text:"Работает без необходимости что-то делать."},{title:"Минимум требований —",text:"Ничего не нужно удерживать или контролировать."},{title:"Накопительный эффект —",text:"Состояние выравнивается постепенно."},{title:"Долгая устойчивость —",text:"Результат сохраняется со временем."}]},v4:{title:"Отношение к человеку →",description:"Здесь проходит ключевая граница между подходами.",leftTitle:"Как относятся другие",rightTitle:"Как относимся мы",left:[{title:"Человек как ресурс —",text:"Важнее показатели, чем самочувствие."},{title:"Давление на участие —",text:"Ожидается соответствие формату."}],right:[{title:"Человек как цель —",text:"Состояние — главный критерий качества."},{title:"Уважение к вниманию —",text:"Никакого давления и манипуляций."},{title:"Поддержка в фоне —",text:"Продукт помогает, не требуя усилий."}]},v5:{title:"Без этого и с этим →",description:"Разница ощущается в повседневной жизни.",leftTitle:"Без поддержки",rightTitle:"С поддержкой",left:[{title:"Саморегуляция в одиночку —",text:"Человеку приходится справляться с нагрузкой самому."}],right:[{title:"Поддерживающая среда —",text:"Состояние удерживается за счёт окружения."},{title:"Меньше усилий —",text:"Не нужно постоянно контролировать себя."}]},v6:{title:"Как работают решения →",description:"И почему наш формат ощущается иначе.",leftTitle:"Обычные решения",rightTitle:"Наш формат",left:[{title:"Инструкции и шаги —",text:"Нужно следовать заданному сценарию."},{title:"Ожидание активности —",text:"Формат требует постоянного участия."},{title:"Контроль результата —",text:"Постоянная оценка эффективности."}],right:[{title:"Фоновое влияние —",text:"Состояние меняется незаметно."},{title:"Гибкость использования —",text:"Можно участвовать в своём ритме."},{title:"Отсутствие давления —",text:"Никаких обязательств и дедлайнов."},{title:"Комфорт —",text:"Формат не мешает жить."}]},v7:{title:"Почему без этого сложнее →",description:"И что даёт правильно выстроенная среда.",leftTitle:"Без среды",rightTitle:"С подходящей средой",left:[{title:"Распад внимания —",text:"Сложно удерживать фокус."},{title:"Быстрая усталость —",text:"Напряжение накапливается незаметно."}],right:[{title:"Собранность —",text:"Внимание становится устойчивее."},{title:"Ровный ритм —",text:"Состояние меньше колеблется."},{title:"Выносливость —",text:"Ресурса хватает надолго."}]},v8:{title:"Подход к устойчивости →",description:"Разница заложена в базовых принципах.",leftTitle:"Как принято",rightTitle:"Как у нас",left:[{title:"Фокус на эффективности —",text:"Результат важнее состояния."},{title:"Ускорение темпа —",text:"Постоянное повышение интенсивности."}],right:[{title:"Фокус на состоянии —",text:"Устойчивость важнее скорости."},{title:"Снижение лишнего —",text:"Меньше перегрузки и шума."},{title:"Долгосрочность —",text:"Поддержка работает со временем."}]},v9:{title:"Для кого это создано →",description:"И чем мы отличаемся от массовых решений.",leftTitle:"Массовый продукт",rightTitle:"Осознанный выбор",left:[{title:"Для всех сразу —",text:"Без учёта индивидуальных различий."}],right:[{title:"Для человека —",text:"С учётом реального контекста жизни."},{title:"Для устойчивости —",text:"А не для краткого эффекта."}]},v10:{title:"Что мы берём на себя →",description:"И что перестаёт быть задачей человека.",leftTitle:"Обычно",rightTitle:"У нас",left:[{title:"Ответственность на человеке —",text:"Состояние нужно постоянно поддерживать самому."},{title:"Постоянное усилие —",text:"Нагрузка не ослабевает."}],right:[{title:"Ответственность среды —",text:"Поддержка встроена в формат."},{title:"Снижение нагрузки —",text:"Меньше внутреннего давления."},{title:"Точка опоры —",text:"Есть на что положиться."}]}},"tarifs-block":{v1:{title:"Наши тарифы →",description:"Мы выстроили тарифы так, чтобы каждый мог выбрать комфортную глубину присутствия и поддержки.",tarifs:[{title:"Стартовый",description:"Для мягкого входа и знакомства с форматом.",points:["— доступ к базовой среде поддержки","— спокойный ритм без обязательств","— возможность выхода в любой момент"],price:"1 999 €"},{title:"Полный",description:"Для тех, кому важна максимальная поддержка и участие.",points:["— всё, что включено в углублённый","— доступ к закрытому клубу","— участие в развитии направлений","— дополнительные форматы и материалы","— ранний доступ к изменениям","— ощущение полного и продуманного варианта"],price:"19 999 €"},{title:"Углублённый",description:"Для тех, кому важна дополнительная структура.",points:["— всё, что включено в стартовый","— расширенная программа поддержки","— приоритетная коммуникация","— доступ к обновлениям формата"],price:"5 999 €"}]},v2:{title:"Тарифы корпоративной программы →",description:"Форматы поддержки, адаптированные под рабочую среду и командную нагрузку.",tarifs:[{title:"Командный минимум",description:"Для осторожного внедрения в рабочий процесс.",points:["— доступ к корпоративной среде поддержки","— ненавязчивый формат без вмешательства","— выравнивание фонового напряжения команды"],price:"1 999 $ / месяц"},{title:"Командный максимум",description:"Для компаний, которым важна долгосрочная устойчивость и сопровождение.",points:["— всё, что включено в командный баланс","— приоритетное сопровождение и коммуникация","— участие в формировании корпоративных решений","— дополнительные форматы для лидеров","— аналитика состояния среды","— доступ к закрытым корпоративным инициативам"],price:"49 999 $ / месяц"},{title:"Командный баланс",description:"Для устойчивой работы и ритма команды.",points:["— всё, что включено в командный минимум","— расширенные корпоративные форматы","— регулярная поддержка состояния команды","— гибкая настройка уровня участия"],price:"9 999 $ / месяц"}]},v3:{title:"Тарифы личного сопровождения →",description:"Индивидуальные форматы поддержки с разной глубиной участия и структуры.",tarifs:[{title:"Лёгкий",description:"Для самостоятельного и ненавязчивого формата.",points:["— доступ к личной среде поддержки","— фоновая стабилизация состояния"],price:"1 999 ₽"},{title:"Индивидуальный",description:"Для глубокой и постоянной поддержки в длительной перспективе.",points:["— всё, что включено в поддерживающий","— персональные форматы сопровождения","— участие в закрытых инициативах","— гибкая настройка уровня участия","— максимальная глубина поддержки"],price:"29 999 ₽"},{title:"Поддерживающий",description:"Для тех, кому важна регулярная опора и связь.",points:["— всё, что включено в лёгкий","— расширенная программа сопровождения","— приоритетная связь","— дополнительные материалы"],price:"6 999 ₽"}]},v4:{title:"Тарифы зарубежной поддержки →",description:"Форматы для людей, живущих в другой культурной и языковой среде.",tarifs:[{title:"International Base",description:"Для адаптации и спокойного начала.",points:["— доступ к международной среде поддержки","— базовые форматы стабилизации состояния"],price:"1 999 €"},{title:"International Pro",description:"Для полного ощущения сопровождения и максимального доступа.",points:["— всё, что включено в international plus","— доступ к закрытому международному клубу","— дополнительные форматы и материалы","— участие в развитии направлений","— максимальный уровень присутствия"],price:"24 999 €"},{title:"International Plus",description:"Для устойчивого присутствия и дополнительной структуры.",points:["— всё, что включено в international base","— расширенные форматы поддержки","— приоритетная коммуникация","— участие в международных форматах"],price:"7 999 €"}]},v5:{title:"Тарифы семейного направления →",description:"Поддержка, рассчитанная на общее состояние семьи и качество среды.",tarifs:[{title:"Семейный старт",description:"Для мягкого входа и базовой поддержки.",points:["— доступ к базовой семейной среде","— ненавязчивый формат без давления"],price:"1 999 €"},{title:"Семейный максимум",description:"Для глубокой и долгосрочной поддержки всей системы.",points:["— всё, что включено в семейный баланс","— приоритетная семейная поддержка","— дополнительные форматы для разных ролей","— доступ к закрытым материалам","— ощущение целостной системы"],price:"39 999 €"},{title:"Семейный баланс",description:"Для устойчивого семейного ритма и дополнительной структуры.",points:["— всё, что включено в семейный старт","— расширенные семейные форматы","— поддержка общего состояния","— гибкое участие"],price:"8 999 €"}]},v6:{title:"Тарифы для детского направления →",description:"Форматы поддержки, ориентированные на среду и состояние ребёнка.",tarifs:[{title:"Базовый детский",description:"Для знакомства и мягкого начала.",points:["— доступ к детской поддерживающей среде","— спокойный и безопасный формат"],price:"1 999 ₴"},{title:"Комплексный",description:"Для максимально продуманной поддержки и полного доступа.",points:["— всё, что включено в развивающий","— приоритетное сопровождение","— индивидуальные форматы","— участие в закрытых инициативах","— гибкая настройка участия"],price:"49 999 ₴"},{title:"Развивающий",description:"Для устойчивого эмоционального фона и дополнительной структуры.",points:["— всё, что включено в базовый детский","— расширенные форматы поддержки","— участие родителей в процессе","— дополнительные материалы"],price:"9 999 ₴"}]}},"bubbles-block":{v1:{title:"Те, кто уже приобрели это, делятся опытом →",description:"Как это ощущается в реальной жизни, без маркетинга.",testimonials:[{imgSrc:"./src/assets/imgs/avvv/man-mid.jpg",imgAlt:"",title:"Антон, 35 лет",subtitle:"Директор продуктовой компании",text:"«Сначала сомневался, нужно ли мне это. Казалось, что я и так справляюсь. Сейчас понимаю: стало заметно спокойнее, и отказываться от этого уже странно.»"},{imgSrc:"./src/assets/imgs/avvv/wom-yan.jpg",imgAlt:"",title:"Мария, 18 лет",subtitle:"Продакт-дизайнер",text:"«Не могу назвать один конкретный эффект, но фон перегруза ушёл. Жить и работать стало ровнее, без лишнего внутреннего шума.»"},{imgSrc:"./src/assets/imgs/avvv/man1.jpg",imgAlt:"",title:"Илья, 41 год",subtitle:"Руководитель отдела",text:"«Здесь ничего не требуют и ни к чему не подталкивают. Парадоксально, но именно поэтому это ощущается как поддержка.»"},{imgSrc:"./src/assets/imgs/avvv/wom-yang2.jpg",imgAlt:"",title:"Александра, 22 года",subtitle:"Фрилансер",text:"«Раньше я постоянно искала, чем себя поддержать. Сейчас этого ощущения поиска больше нет, как будто стало проще дышать.»"},{imgSrc:"./src/assets/imgs/avvv/man-yom.jpg",imgAlt:"",title:"Кирилл, 34 лет",subtitle:"Предприниматель",text:"«Не ожидал, что формат без активностей может так влиять на состояние. Но эффект устойчивый: меньше рывков, больше спокойного ритма.»"},{imgSrc:"./src/assets/imgs/avvv/wom-old6.jpg",imgAlt:"",title:"Ольга, 46 лет",subtitle:"HR-директор",text:"«Это редкий случай: продукт не раздражает со временем, а становится фоном. И в этом его ценность.»"}]},v2:{title:"Отзывы о нашей коммерческой программе →",description:"Что происходит с бизнесом после внедрения.",testimonials:[{imgSrc:"./src/assets/imgs/avvv/man1.jpg",imgAlt:"",title:"Егор, 34 года",subtitle:"CEO технологической компании",text:"«После внедрения команда стала спокойнее и собраннее. Производительность выросла заметно, без выгорания. Честно: без этого мы бы не вытянули прошлый год.»"},{imgSrc:"./src/assets/imgs/avvv/wom-mid2.jpg",imgAlt:"",title:"Наталья, 42 года",subtitle:"Финансовый директор",text:"«Я скептически относилась к таким форматам. Но рост эффективности и снижение ошибок — это цифры, а не ощущения.»"},{imgSrc:"./src/assets/imgs/avvv/man-mid.jpg",imgAlt:"",title:"Павел, 37 лет",subtitle:"Операционный директор",text:"«Люди стали принимать решения быстрее и увереннее. Компетентность выросла, потому что ушёл постоянный фоновый стресс. Все на 90% эффективнее!»"},{imgSrc:"./src/assets/imgs/avvv/man-old2.jpg",imgAlt:"",title:"Алексей, 45 лет",subtitle:"Собственник бизнеса",text:"«Команда стала работать как будто в другом режиме. Если бы мы не подключили это решение, проект бы просто развалился.»"},{imgSrc:"./src/assets/imgs/avvv/wom-yang3.jpg",imgAlt:"",title:"Марина, 39 лет",subtitle:"HR-партнёр",text:"«Снижение текучки и рост вовлечённости без давления — я такого раньше не видела. Команда стала просто сумасшедше продуктивной.»"},{imgSrc:"./src/assets/imgs/avvv/man-old9.jpg",imgAlt:"",title:"Сергей, 51 год",subtitle:"Генеральный директор",text:"«Люди стали не просто продуктивнее, а адекватнее и спокойнее. Для бизнеса это критично: без этого подхода мы бы реально провалились.»"}]},v3:{title:"Вот, что люди говорят об этом →",description:"Коротко и по делу.",testimonials:[{imgSrc:"./src/assets/imgs/avvv/wom-yang.jpg",imgAlt:"",title:"Ксения, 31 год",subtitle:"Маркетолог",text:"«Я перестала постоянно чувствовать, что не справляюсь. И это сильно поменяло моё отношение к работе.»"},{imgSrc:"./src/assets/imgs/avvv/man-old3.jpg",imgAlt:"",title:"Роман, 44 года",subtitle:"Архитектор",text:"«Формат не лезет в жизнь и не просит внимания. Для меня это было решающим, потому что у меня и так перегруз.»"},{imgSrc:"./src/assets/imgs/avvv/wom-yang2.jpg",imgAlt:"",title:"Алина, 24 года",subtitle:"Аналитик",text:"«Я боялась, что это будет ещё один источник шума. Оказалось — наоборот: стало тише и понятнее внутри.»"},{imgSrc:"./src/assets/imgs/avvv/man-old2.jpg",imgAlt:"",title:"Виктор, 50 лет",subtitle:"Руководитель проектов",text:"«Отсутствие активности оказалось важнее любой мотивации. Я стал выдерживать длинные дни без ощущения, что меня “съедает” нагрузка.»"},{imgSrc:"./src/assets/imgs/avvv/wom-mid2.jpg",imgAlt:"",title:"Юлия, 36 лет",subtitle:"Психолог",text:"«Мне нравится логика: работа с фоном состояния, а не с симптомами. Это заметно по тому, как меняется устойчивость.»"},{imgSrc:"./src/assets/imgs/avvv/man-yan.jpg",imgAlt:"",title:"Максим, 19 лет",subtitle:"Консультант",text:"«Я не думаю об этом каждый день, но ощущаю его постоянно. И это редкое ощущение: поддержка без присутствия “в лице”.»"}]},v4:{title:"Это в глазах людей →",description:"Как это описывают без объяснений.",testimonials:[{imgSrc:"./src/assets/imgs/avvv/wom-yang3.jpg",imgAlt:"",title:"Анна, 28 лет",subtitle:"Исследователь",text:"«Внутри стало ровнее. Не ярче, не веселее — просто стабильнее, как будто мозг перестал спешить.»"},{imgSrc:"./src/assets/imgs/avvv/man-old9.jpg",imgAlt:"",title:"Сергей, 45 лет",subtitle:"IT-директор",text:"«Здесь никто не пытается доказать полезность и продавить участие. Это подкупает: оно не мешает и поэтому остаётся.»"},{imgSrc:"./src/assets/imgs/avvv/wom-old7.jpg",imgAlt:"",title:"Елена, 52 года",subtitle:"Консультант по развитию",text:"«Это ощущается как аккуратно выстроенная тишина. Когда фон ровный, решения принимаются проще.»"}]},v5:{title:"Это в жизни детей →",description:"Что замечают родители и как это звучит словами детей.",testimonials:[{imgSrc:"./src/assets/imgs/avvv/wom-mid2.jpg",imgAlt:"",title:"Ирина, 38 лет",subtitle:"Мама шестерых детей",text:"«Я не шучу: после этого дома стало тише. Мои шестеро ангелочков меньше спорят, быстрее успокаиваются — прямо фантастика. Они сами говорят: “мама, стало спокойно”.»"},{imgSrc:"./src/assets/imgs/avvv/man-mid.jpg",imgAlt:"",title:"Олег, 41 год",subtitle:"Отец двоих детей",text:"«Сын сказал: “пап, у меня внутри не шумит”. Я не знаю, как он это формулирует, но реакций стало меньше и они мягче. Теперь мы счастливы!»"},{imgSrc:"./src/assets/imgs/avvv/wom-yang2.jpg",imgAlt:"",title:"Татьяна, 35 лет",subtitle:"Мама",text:"«Дочь начала сама замечать, что быстрее успокаивается. Говорит: “я не злюсь так долго”. Для нас это гигантская разница в быту.»"},{imgSrc:"./src/assets/imgs/avvv/wom-old4.jpg",imgAlt:"",title:"Мария, 44 года",subtitle:"Мама троих детей",text:"«Мы ничего специально не объясняли. Просто стало меньше истерик и больше нормального ритма, балаган закончился. Дети сами говорят: “тут легко”.»"},{imgSrc:"./src/assets/imgs/avvv/man1.jpg",imgAlt:"",title:"Алексей, 39 лет",subtitle:"Отец",text:"«Ребёнок стал быстрее переключаться и меньше тревожиться. Он сказал: “я могу быстрее перестать думать”. И правильно, думать у нас не особо поощряется. Рекомендую это!»"},{imgSrc:"./src/assets/imgs/avvv/wom-old.jpg",imgAlt:"",title:"Юлия, 54 года",subtitle:"Мама подростка",text:"«Сын сказал: “мне проще выдерживать школу и людей”. Совсем ерестал играть в компьютер и ходит в школу с кейсом от гитары, стал музыкантом.»"}]},v6:{title:"Как изменилась жизнь после этого? →",description:"Ответы, которые повторяются чаще всего.",testimonials:[{imgSrc:"./src/assets/imgs/avvv/man-yom.jpg",imgAlt:"",title:"Артём, 36 лет",subtitle:"Менеджер",text:"«Я стал спокойнее реагировать на обычные дни. Раньше всё было как на грани, теперь стало ровнее и предсказуемее.»"},{imgSrc:"./src/assets/imgs/avvv/wom-mid2.jpg",imgAlt:"",title:"Вера, 41 год",subtitle:"Руководитель команды",text:"«Усталость перестала накапливаться так быстро. Появилось ощущение запаса, и это меняет вообще всё.»"},{imgSrc:"./src/assets/imgs/avvv/man-old3.jpg",imgAlt:"",title:"Константин, 47 лет",subtitle:"Предприниматель",text:"«Теперь я понимаю, что раньше жил в постоянном напряжении. Сейчас это напряжение не исчезло, но оно не управляет мной.»"}]}},"faq-block":{v1:{title:"FAQ →",description:"Если не найдёте ответа на вопрос, просто напишите нам его.",left:[{question:"Что именно я получу?",answerHtml:"Вы получите устойчивый фон: меньше внутреннего шума, больше предсказуемого ритма. Это не «марафон продуктивности», а мягкая поддержка, которая остаётся с вами в обычных днях."},{question:"Это про мотивацию?",answerHtml:"Нет. Мы не разгоняем, а снижаем лишнее. Когда меньше перегруза, мотивация перестаёт быть проблемой и становится естественным следствием."},{question:"Нужно ли мне активно участвовать?",answerHtml:"Нет. Формат не требует активности, отчётов и дедлайнов. Вы выбираете уровень присутствия, а не доказываете, что «стараетесь»."},{question:"Это похоже на терапию?",answerHtml:"Нет, это не медицинская услуга и не замена терапии. Это среда и структура, которые помогают удерживать более ровное состояние в повседневности."}],right:[{question:"Когда я замечу эффект?",answerHtml:"У многих — в первые дни как ощущение «стало тише». У других — через 1–2 недели, когда ритм становится стабильнее. Это не рывок, а накопление."},{question:"Можно ли отменить в любой момент?",answerHtml:"Да. Формат построен так, чтобы вы могли выйти без объяснений. Мы считаем, что уважение к границам важнее удержания любой ценой."}]},v2:{title:"Ваши вопросы →",description:"Короткие ответы на длинные сомнения. Если что-то не покрыли — напишите.",left:[{question:"Это вообще продукт или идея?",answerHtml:"Это продукт-формат: он оформлен как понятная структура, но работает как ощущение среды. Если нужно проще: это способ сделать фон жизни более устойчивым без лишних действий."},{question:"Почему это не просто «отдых»?",answerHtml:"Отдых — эпизод. Здесь важнее система: снижение энтропии, меньше переключений, больше устойчивого ритма. Это про то, что остаётся, когда отдых закончился."},{question:"Звучит абстрактно. Где конкретика?",answerHtml:"Конкретика — в том, что формат не требует вашего времени, но уменьшает нагрузку на внимание. Результат выражается не в галочках, а в том, как проходит день."}],right:[{question:"Это подходит, если я скептик?",answerHtml:"Да. Скептикам обычно важно, чтобы их не «вовлекали». Здесь никого не уговаривают и не перевоспитывают — формат просто существует рядом."},{question:"А если мне нужно «быстро»?",answerHtml:"Быстро — не наш режим. Мы не обещаем мгновенного превращения. Мы делаем так, чтобы стало проще выдерживать процесс, а не побеждать за 7 дней."}]},v3:{title:"Если остались вопросы →",description:"Отвечаем так, чтобы было похоже на серьёзный разговор, а не на продажу.",left:[{question:"Это одобрено экспертами?",answerHtml:"Мы опираемся на логику среды и внимания: меньше раздражителей — ниже когнитивная нагрузка. Это не «волшебная методика», а аккуратная инженерия состояния."},{question:"Какая тут «наука»?",answerHtml:"Скорее псевдо-наука, оформленная прилично. Если серьёзно: мы используем принципы предсказуемости, ритма и снижения лишнего — это то, что поддерживает психику без героизма."},{question:"А если мне станет хуже?",answerHtml:"Формат не должен обострять состояние, потому что он не давит и не требует. Но если вам важно клиническое сопровождение, это не замена специалисту."},{question:"Это для интровертов или экстравертов?",answerHtml:"Для людей. Мы не заставляем общаться и не делаем «социальный марафон». Уровень контакта регулируется вами."}],right:[{question:"Мне нужно что-то делать ежедневно?",answerHtml:"Нет. Ежедневная дисциплина тут не условие, а опция. Формат работает как фон, а не как список обязанностей."},{question:"С чем это лучше всего сочетается?",answerHtml:"С жизнью. Особенно с той, где много задач, людей и шума. Это не конкурент вашим практикам, а мягкая опора рядом."},{question:"Можно ли просто попробовать?",answerHtml:"Да. Мы поэтому и разделяем уровни: можно начать мягко, а потом понять, нужен ли вам более плотный формат."}]},v4:{title:"Вопросы по корпоративной программе →",description:"Если хотите внедрить это в команду, вот базовые ответы.",left:[{question:"Это вмешивается в процессы?",answerHtml:"Нет. Мы не ломаем ритуалы команды и не встраиваемся в митинги как контроль. Формат работает рядом и снижает фоновую перегрузку."},{question:"Как это влияет на эффективность?",answerHtml:"Через устойчивость: меньше когнитивного шума — меньше ошибок и потерь внимания. Не «гонка», а ровный темп, который держится долго."},{question:"Это про KPI и отчёты?",answerHtml:"Нет. Мы не делаем людей «правильными» через метрики. Мы делаем условия, где людям проще оставаться компетентными и спокойными."},{question:"Сколько людей нужно подключать?",answerHtml:"Можно начать с небольшой группы: руководители, ключевые роли, команда проекта. Потом расширять, если эффект ощущается."}],right:[{question:"Это подходит для удалёнки?",answerHtml:"Да. Формат не завязан на офис и не требует присутствия в одной комнате. Важнее общий ритм и предсказуемость."},{question:"Как убедить команду, если они скептики?",answerHtml:"Никак. И это хорошо. Мы не продаём вовлечённость, мы даём возможность. Скептики обычно остаются, потому что их не трогают."}]},v5:{title:"Вопросы родителей →",description:"Про детское направление отвечаем особенно аккуратно.",left:[{question:"Это безопасно для детей?",answerHtml:"Формат не давит и не требует. Мы не вводим ребёнка в стресс через «надо». Мы работаем со средой: тише, ровнее, предсказуемее."},{question:"Ребёнку надо что-то делать?",answerHtml:"Нет. В этом и смысл: меньше обязательств, больше спокойного фона. Ребёнок не должен «стараться», чтобы всё работало."},{question:"Это заменяет психолога?",answerHtml:"Нет. Это не лечение и не диагностика. Это поддерживающая среда, которая может облегчить повседневность, но не подменяет специалиста."},{question:"Что я замечу как родитель?",answerHtml:"Обычно — меньше резких всплесков, быстрее восстановление, больше «ровных» дней. Иногда ребёнок сам говорит, что стало спокойнее."}],right:[{question:"Подходит ли это подросткам?",answerHtml:"Да. Подросткам особенно важно, чтобы их не контролировали. Здесь нет давления, поэтому формат воспринимается как нейтральная опора."},{question:"Если у нас шесть детей?",answerHtml:"Тогда вы герой, и вам точно нужна поддержка. Формат рассчитан на то, чтобы работать даже в шуме и хаосе — без дополнительных задач."},{question:"Это подходит для семьи в целом?",answerHtml:"Да. Часто эффект проявляется как общее снижение напряжения: меньше конфликтов, больше терпения. Не потому что все «стали лучше», а потому что стало легче."}]},v6:{title:"Коротко о важном →",description:"Самые частые вопросы и самые честные ответы.",left:[{question:"Это работает, если я ничего не делаю?",answerHtml:"Да. В этом смысл: поддержка не должна быть ещё одной задачей. Формат работает как условия, а не как инструкция."},{question:"Почему это стоит денег?",answerHtml:"Потому что вы покупаете не контент, а устойчивую структуру. Она продумана так, чтобы снижать лишнее и не требовать вашего времени."},{question:"Это манипуляция?",answerHtml:"Нет. Мы не строим зависимость и не держим на страхе. Вам должно быть спокойно и с нами, и без нас."},{question:"А если мне смешно от всего этого?",answerHtml:"Это нормальная реакция. Смешно — значит вы заметили форму. Но иногда форма и есть то, что помогает: аккуратная рамка, в которой легче жить."},{question:"Это для «умных» или для всех?",answerHtml:"Для всех, кто устал от перегруза. Умные обычно быстрее понимают, что им не нужна ещё одна система контроля — им нужна среда."}],right:[{question:"Можно ли задавать свои вопросы?",answerHtml:"Да. И мы это поощряем. Если вопрос не помещается в FAQ, значит он живой и важный."},{question:"Это будет навязчиво?",answerHtml:"Нет. Мы специально делаем так, чтобы формат не вытеснял вашу жизнь. Никаких «срочно зайдите», никакого давления и вины."},{question:"Как понять, какой тариф выбрать?",answerHtml:"Начните с минимального уровня и посмотрите, как реагирует ваш ритм. Если хочется больше структуры и ощущения сопровождения — тогда расширяйтесь."},{question:"Что если мне не подойдёт?",answerHtml:"Тогда вы просто остановитесь. Формат не должен удерживать вас через усилие. Поддержка — это когда можно выбрать."}]}},"prog-block":{v1:{title:"Попробуйте корпоративную программу →",description:"Поддержка команд в условиях высокой нагрузки и постоянных изменений.",cardTitle:"Корпоративная программа",cardText:"Подходит для команд, которым важно сохранить устойчивость без давления и выгорания.",info2:["— аккуратное внедрение без вмешательства в процессы","— поддержка общего фона состояния команды"],info1:["— снижение фонового напряжения","— рост устойчивости и собранности","— повышение эффективности без контроля"]},v2:{title:"Попробуйте программу восстановления →",description:"Когда усталость накапливается быстрее, чем получается отдыхать.",cardTitle:"Программа восстановления",cardText:"Для людей в состоянии хронической усталости и перегрузки.",info2:["— без активных практик","— без требований к дисциплине"],info1:["— постепенное восстановление ресурса","— снижение ощущения истощения","— более ровный уровень энергии","— возвращение устойчивости"]},v3:{title:"Попробуйте семейную программу →",description:"Поддержка, которая работает сразу на всю систему.",cardTitle:"Семейная программа",cardText:"Подходит для семей, живущих в условиях постоянного эмоционального шума.",info2:["— мягкий формат без требований","— отсутствие давления на участие"],info1:["— снижение общего напряжения","— более ровный эмоциональный фон","— меньше конфликтов","— устойчивый повседневный ритм"]},v4:{title:"Попробуйте программу цифрового выгорания →",description:"Когда невозможно просто выйти из онлайна, но хочется тишины.",cardTitle:"Программа цифрового восстановления",cardText:"Для жизни в ритме экранов, уведомлений и постоянного присутствия.",info2:["— без отказа от технологий"],info1:["— снижение ощущения постоянной включённости","— меньше тревоги из-за пропущенного","— более стабильное внимание","— ощущение контроля над временем"]},v5:{title:"Попробуйте программу тихой жизни →",description:"Когда даже отдых начинает утомлять.",cardTitle:"Программа эмоционального выравнивания",cardText:"Подходит для людей с повышенной чувствительностью и перегрузкой.",info2:["— без самокопания","— без обязательных практик"],info1:["— снижение эмоциональной перегрузки","— более спокойные реакции","— ощущение устойчивости"]},v6:{title:"Попробуйте программу нового ритма →",description:"Для жизни в мире, который не замедляется.",cardTitle:"Программа адаптации к современному ритму",cardText:"Для тех, кто чувствует, что старые модели жизни больше не работают.",info2:["— не про прошлые сценарии","— не про универсальные советы"],info1:["— формирование собственного ритма","— меньше давления извне","— больше ощущения выбора","— жизнь без внутреннего ускорения"]}},"stat-block":{v1:{title:"Результаты нашей программы →",description:"Фиксируем устойчивые изменения в состоянии, внимании и общем ритме жизни после подключения программы.",buttonText:"Посмотреть результаты",imgSrc:"./src/assets/imgs/lend/stst.svg",imgAlt:""},v2:{title:"Как меняется состояние со временем →",description:"Статистика показывает, как снижение фонового напряжения влияет на устойчивость, концентрацию и ощущение контроля.",buttonText:"Изучить данные",imgSrc:"./src/assets/imgs/lend/stst.svg",imgAlt:""},v3:{title:"Что происходит после подключения →",description:"Мы отслеживаем динамику изменений, чтобы показать реальное влияние программы на повседневный ритм.",buttonText:"Смотреть подробнее",imgSrc:"./src/assets/imgs/lend/stst.svg",imgAlt:""}}},$h={"./src/assets/imgs/lend/Group 5.png":new URL(""+new URL("Group 5-D5wmw2uB.png",import.meta.url).href,import.meta.url).href,"./src/assets/imgs/lend/family.png":new URL(""+new URL("family-BaLETImb.png",import.meta.url).href,import.meta.url).href,"./src/assets/imgs/lend/forest.png":new URL(""+new URL("forest-Cm6P5bpU.png",import.meta.url).href,import.meta.url).href,"./src/assets/imgs/lend/lal.png":new URL(""+new URL("lal-CBo1DhWA.png",import.meta.url).href,import.meta.url).href,"./src/assets/imgs/lend/stst.svg":new URL(""+new URL("stst-Dh9mR9Nl.svg",import.meta.url).href,import.meta.url).href,"./src/assets/imgs/lend/water.png":new URL(""+new URL("water-DFEy_G9d.png",import.meta.url).href,import.meta.url).href,"./src/assets/imgs/lend/woman.png":new URL(""+new URL("woman-Cxfc5aOT.png",import.meta.url).href,import.meta.url).href,"./src/assets/imgs/avvv/man-mid.jpg":new URL(""+new URL("man-mid-CyiRGg2r.jpg",import.meta.url).href,import.meta.url).href,"./src/assets/imgs/avvv/man-old2.jpg":new URL(""+new URL("man-old2-gXKTF-Us.jpg",import.meta.url).href,import.meta.url).href,"./src/assets/imgs/avvv/man-old3.jpg":new URL(""+new URL("man-old3-mkSSnGGM.jpg",import.meta.url).href,import.meta.url).href,"./src/assets/imgs/avvv/man-old9.jpg":new URL(""+new URL("man-old9-B_rux9G8.jpg",import.meta.url).href,import.meta.url).href,"./src/assets/imgs/avvv/man-yan.jpg":new URL(""+new URL("man-yan-4-8ffqf9.jpg",import.meta.url).href,import.meta.url).href,"./src/assets/imgs/avvv/man-yom.jpg":new URL(""+new URL("man-yan-4-8ffqf9.jpg",import.meta.url).href,import.meta.url).href,"./src/assets/imgs/avvv/man1.jpg":new URL(""+new URL("man1-br58xYq5.jpg",import.meta.url).href,import.meta.url).href,"./src/assets/imgs/avvv/wom-mid2.jpg":new URL(""+new URL("wom-mid2-BefQuvAd.jpg",import.meta.url).href,import.meta.url).href,"./src/assets/imgs/avvv/wom-old.jpg":new URL(""+new URL("wom-old-B5riyDY1.jpg",import.meta.url).href,import.meta.url).href,"./src/assets/imgs/avvv/wom-old4.jpg":new URL(""+new URL("wom-old4-Cgq37XZI.jpg",import.meta.url).href,import.meta.url).href,"./src/assets/imgs/avvv/wom-old6.jpg":new URL(""+new URL("wom-old6-puVT-FAk.jpg",import.meta.url).href,import.meta.url).href,"./src/assets/imgs/avvv/wom-old7.jpg":new URL(""+new URL("wom-old7-BLeXhq7y.jpg",import.meta.url).href,import.meta.url).href,"./src/assets/imgs/avvv/wom-yan.jpg":new URL(""+new URL("wom-yan-CTGaeF2U.jpg",import.meta.url).href,import.meta.url).href,"./src/assets/imgs/avvv/wom-yang.jpg":new URL(""+new URL("wom-yang-BJ420NWY.jpg",import.meta.url).href,import.meta.url).href,"./src/assets/imgs/avvv/wom-yang2.jpg":new URL(""+new URL("wom-yang2-BYPNAgdR.jpg",import.meta.url).href,import.meta.url).href,"./src/assets/imgs/avvv/wom-yang3.jpg":new URL(""+new URL("wom-yang3-BIJsvU-y.jpg",import.meta.url).href,import.meta.url).href};function Yh(t){return typeof t!="string"?t:$h[t]??t}function Qi(t){if(Array.isArray(t)){for(let r=0;r<t.length;r++)t[r]=Qi(t[r]);return t}if(t&&typeof t=="object"){for(const[r,e]of Object.entries(t))t[r]=Qi(e);return t}return Yh(t)}const Kh=Qi(JSON.parse(JSON.stringify(Wh)));function Zh(t,r){const e=Kh?.[t];if(!e)throw new Error(`contentVariants: no entry for type "${t}"`);if(r&&e[r])return{variant:r,content:e[r]};const n=Object.keys(e);if(n.length===0)throw new Error(`contentVariants: type "${t}" has no variants`);const i=n[Math.floor(Math.random()*n.length)];return{variant:i,content:e[i]}}const ts={"hero-block":{label:"Hero block",description:"Первый экран: навигационные кнопки, большой заголовок/описание, две CTA-кнопки, правый информационный столбец (хештег/оглавление/почта).",slots:{titleHtml:"string",description:"string",primaryCtaText:"string",primaryCtaHref:"string",secondaryCtaText:"string",secondaryCtaHref:"string",rightTopTag:"string",rightNavTextHtml:"string",rightEmail:"string",yearMark:"string",helpButtonText:"string",quizButtonText:"string"},props:{glassPrimaryCta:["none","pill-liquid"],showNavButtons:["on","off"]},notes:["Кнопки data-theme-toggle внутри hero — НЕ часть варианта контента; это UI-элементы (app-level).","Содержание правого столбца сделано как контентные слоты (можно варьировать)."]},"what-is-it-block":{label:"What is it block",description:"Блок «Что это?» + три секции (каждая: bubble(h3+p) и numeric-container с номером и кнопкой).",slots:{title:"string",description:"string",sections:"array[3] of { heading: string, text: string, buttonText: string }"},props:{glass:["strong","soft","none"],layoutPattern:["bubble-left","bubble-right-mixed"]},notes:["Номера 1/2/3 — структурные, не из варианта (можно оставить фикс).","Внутри одного варианта всегда 3 пары (h3+p) + 3 текста кнопок."]},"break-block":{label:"Break block",description:"Короткий интермедиальный блок: h4 + p. Вариантов будет много.",slots:{title:"string",description:"string"},props:{tone:["neutral","sales","ironic"]}},"big-blur-content-block":{label:"Big blur content block",description:"Большой блок с блюром: внешний h2 + внутренний контейнер (h3 + p + CTA) + кнопка '?' + картинка справа.",slots:{title:"string",cardTitle:"string",cardText:"string",ctaText:"string",ctaHref:"string",imageSrc:"string",imageAlt:"string"},props:{glass:["strong","soft","none"],rightPartStyle:["image-plain","image-filled"],showQuestionButton:["on","off"]},notes:["В HTML есть два варианта правой части: обычный <img> внутри right-part и заполненный right-part-filled. Это вынесено в prop rightPartStyle."]},"three-filled-elements-block":{label:"Three filled elements block",description:"Заголовок + описание + три карточки, каждая (h3+p).",slots:{title:"string",description:"string",items:"array[3] of { title: string, text: string }"},props:{showNumbersInTitles:["on","off"]}},"why-we-block":{label:"Why we block",description:"Сравнение «они» vs «мы»: заголовок/описание + два списка. Левый список на 1 элемент короче правого.",slots:{title:"string",description:"string",leftTitle:"string",rightTitle:"string",leftItems:"array[n] of { title: string, text: string }",rightItems:"array[n+1] of { title: string, text: string }"},props:{glassLeft:["strong","soft","none"],iconLeft:["x","custom"],iconRight:["check","custom"]},notes:["Правило «правый на 1 больше левого» держим как контракт данных (валидировать позже)."]},"tarifs-block":{label:"Tariffs block",description:"Тарифы: заголовок/описание + 3 тарифа. У каждого: имя, описание, список пунктов, цена. Средний тариф визуально белый/иной.",slots:{title:"string",description:"string",tariffs:"array[3] of { name: string, text: string, bullets: array[string], priceText: string }"},props:{glass:["strong","soft","none"],middleTariffStyle:["white","glass"],priceButtonStyle:["default","dark-pill-liquid"]},notes:["Тексты пунктов в HTML уже с длинным тире. В данных лучше хранить строки БЕЗ тире, а тире добавлять рендерером — но можно и хранить как есть."]},"bubbles-block":{label:"Bubbles testimonials block",description:"Отзывы: заголовок/описание + сетка пузырей. Один вариант содержит либо 3 отзыва, либо 6 отзывов. Раскладка по колонкам зависит от количества.",slots:{title:"string",description:"string",testimonials:"array[3|6] of { avatarSrc: string, avatarAlt: string, personTitle: string, personSubtitle: string, quote: string }"},props:{glass:["strong","soft","none"],count:["3","6"],pattern:["mixed-white-glass"]},notes:["Правило раскладки: при 6 — по 2 в колонке, при 3 — по 1 в колонке. Это лучше решать рендерером по testimonials.length."]},"faq-block":{label:"FAQ block",description:"FAQ: заголовок/описание + два столбца вопросов. Каждый item: question + answer (answer в glass).",slots:{title:"string",description:"string",leftItems:"array of { question: string, answerHtml: string }",rightItems:"array of { question: string, answerHtml: string }"},props:{glass:["strong","soft","none"],collapsible:["on","off"],icon:["plus"]}},"prog-block":{label:"Corporate program block",description:"Корпоративная программа: заголовок/описание + большая форма (h3+p) + два массива пунктов (до 3 слева, до 3 справа).",slots:{title:"string",description:"string",cardTitle:"string",cardText:"string",infoLeft:"array[0..3] of string",infoRight:"array[0..3] of string"},props:{glass:["soft","strong","none"]}},"stat-block":{label:"Stat block (rare)",description:"Редкий блок результатов: h4 + p + CTA кнопка + картинка справа.",slots:{title:"string",description:"string",ctaText:"string",ctaHref:"string",imageSrc:"string",imageAlt:"string"},props:{glassCta:["pill-liquid","none"]}}};function Jh(t){const r=t.content??{},e=document.createElement("div");e.className="ll__hero-block ll__container",e.setAttribute("data-hero-section","");const n=document.createElement("div");n.className="ll__hero-block__title-container";const i=document.createElement("nav"),s=document.createElement("button");s.className="ll__filled-button glass glass--pill is-liquid",s.type="button",s.setAttribute("data-theme-toggle",""),s.setAttribute("aria-label","Сменить тему"),s.textContent="~";const a=document.createElement("button");a.className="ll__unfilled-button",a.type="button",a.textContent=r.helpButtonText??"Получить помощь";const o=document.createElement("button");o.className="ll__unfilled-button",o.type="button",o.textContent=r.quizButtonText??"?!",i.append(s,a,o);const l=document.createElement("div");l.className="ll__hero-block__info-container";const u=document.createElement("h1");u.className="ll__text-title-h1",u.innerHTML=r.titleHtml??"—";const h=document.createElement("p");h.className="ll__text-description-20-white",h.textContent=r.description??"";const f=document.createElement("div");f.className="ll__hero-block__buttons-container";const c=document.createElement("button");c.className="ll__filled-button glass glass--pill is-liquid",c.type="button",c.textContent=r.primaryCtaText??"Купить";const d=document.createElement("button");d.className="ll__unfilled-button",d.type="button",d.textContent=r.secondaryCtaText??"Узнать больше",f.append(c,d),l.append(u,h,f);const v=document.createElement("span");v.className="ll__text-description-20-white",v.textContent=r.yearMark??"/2026",n.append(i,l,v);const _=document.createElement("div");_.className="ll__hero-block__img-container";const p=document.createElement("span");p.className="ll__text-description-20-dark",p.textContent=r.rightTopTag??"/#wearemorethenyouthink";const m=document.createElement("div");m.className="ll__text-description-20-dark ll__hero-block-nav-text",m.setAttribute("data-hero-nav-list",""),m.innerHTML=r.rightNavTextHtml??"Что это •<br>Общая информация •<br>Конкуренты •<br>Тарифы •<br>Отзывы •<br>FAG •";const E=document.createElement("span");return E.className="ll__text-description-20-dark",E.textContent=r.rightEmail??"/revolutionproduct@mail.com",_.append(p,m,E),e.append(n,_),e}function Qh(t){const r=t.content??{},e=Array.isArray(r.sections)?r.sections:[],n=document.createElement("div");n.className="ll__what-is-it-block ll__container";const i=document.createElement("div");i.className="ll__title-container";const s=document.createElement("h2");s.textContent=r.title??"—";const a=document.createElement("p");a.textContent=r.description??"",i.append(s,a);const o=document.createElement("div");o.className="ll__what-is-it-block__sections-container";for(let l=0;l<3;l+=1){const u=e[l]??{},h=document.createElement("div");h.className="ll__what-is-it-block-section";const f=document.createElement("div");f.className="ll__what-is-it-block-bubble glass glass--strong is-liquid";const c=document.createElement("h3");c.textContent=u.heading??"—";const d=document.createElement("p");d.textContent=u.text??"",f.append(c,d);const v=document.createElement("div");v.className="ll__what-is-it-block__numeric-container";const _=document.createElement("h2");_.textContent=`${l+1}.`;const p=document.createElement("button");p.className="ll__unfilled-button",p.type="button",p.textContent=u.buttonText??"Узнать больше",v.append(_,p),l===1?h.append(v,f):h.append(f,v),o.appendChild(h)}return n.append(i,o),n}function tc(t){const r=t.content??{},e=document.createElement("div");e.className="ll__break-block ll__container";const n=document.createElement("h4");n.textContent=r.title??"—";const i=document.createElement("p");return i.textContent=r.description??"",e.append(n,i),e}function ec(t){const r=t.content??{},e=document.createElement("div");e.className="ll__big-blur-content-block ll__container";const n=document.createElement("h2");n.textContent=r.title??"—";const i=document.createElement("div");i.className="ll__big-blur-content-block__blur-container glass glass--strong is-liquid";const s=document.createElement("div");s.className="ll__big-blur-content-block__blur-left-part";const a=document.createElement("div");a.className="ll__big-blur-content-block__blur-left-part__title-container";const o=document.createElement("div");o.className="ll__big-blur-content-block__titles";const l=document.createElement("h3");l.textContent=r.cardTitle??"—";const u=document.createElement("p");u.textContent=r.cardText??"",o.append(l,u);const h=document.createElement("button");h.className="ll__unfilled-button",h.type="button",h.textContent=r.ctaText??"Узнать больше",a.append(o,h);const f=document.createElement("button");f.className="ll__unfilled-button ll__big-blur-content-block_question",f.type="button",f.textContent="?",s.append(a,f),i.appendChild(s);const c=document.createElement("div");c.className="ll__big-blur-content-block__blur-container__right-part";const d=document.createElement("img");return d.src=r.imageSrc??"",d.alt=r.imageAlt??"",c.appendChild(d),i.appendChild(c),e.append(n,i),e}function rc(t){const r=t.content??{},e=Array.isArray(r.items)?r.items:[],n=document.createElement("div");n.className="ll__three-filled-elements-block ll__container";const i=document.createElement("div");i.className="ll__title-container";const s=document.createElement("h2");s.textContent=r.title??"—";const a=document.createElement("p");a.textContent=r.description??"",i.append(s,a);const o=document.createElement("div");o.className="ll__three-filled-elements-block__three-blocks-container";for(let l=0;l<3;l+=1){const u=e[l]??{},h=document.createElement("div");h.className="ll__three-filled-elements-block__block";const f=document.createElement("h3");f.textContent=u.title??"—";const c=document.createElement("p");c.textContent=u.text??"",h.append(f,c),o.appendChild(h)}return n.append(i,o),n}function nc(t){const r=t.content??{},e=Array.isArray(r.left)?r.left:[],n=Array.isArray(r.right)?r.right:[],i=document.createElement("div");i.setAttribute("class","ll__why-we-block ll__container");const s=document.createElement("div");s.setAttribute("class","ll__title-container");const a=document.createElement("h2");a.textContent=r.title??"—";const o=document.createElement("p");o.textContent=r.description??"",s.append(a,o);const l=document.createElement("div");l.setAttribute("class","ll__why-we-block__container");const u=document.createElement("div");u.setAttribute("class","ll__why-we-block__left ");const h=document.createElement("h4");h.textContent=r.leftTitle??"—",u.appendChild(h),e.forEach((d,v)=>{const _=document.createElement("div"),p=v===0?"ll__why-we-block__left-unfilled-part  glass glass--strong is-liquid":"ll__why-we-block__left-unfilled-part glass glass--strong is-liquid";_.setAttribute("class",p);const m=document.createElement("h3");m.textContent="×";const E=document.createElement("div");E.setAttribute("class","ll__why-we-block__sub-text-container");const I=document.createElement("h4");I.textContent=d.title??"—";const C=document.createElement("p");C.textContent=d.text??"",E.append(I,C),_.append(m,E),u.appendChild(_)});const f=document.createElement("div");f.setAttribute("class","ll__why-we-block__right");const c=document.createElement("h4");return c.textContent=r.rightTitle??"—",f.appendChild(c),n.forEach(d=>{const v=document.createElement("div");v.setAttribute("class","ll__why-we-block__right-filled-part");const _=document.createElement("h3");_.textContent="✓";const p=document.createElement("div");p.setAttribute("class","ll__why-we-block__sub-text-container");const m=document.createElement("h4");m.textContent=d.title??"—";const E=document.createElement("p");E.textContent=d.text??"",p.append(m,E),v.append(_,p),f.appendChild(v)}),l.append(u,f),i.append(s,l),i}function ic(t){const r=t.content??{},e=Array.isArray(r.tarifs)?r.tarifs:[],n=document.createElement("div");n.className="ll__tarifs-block ll__container";const i=document.createElement("div");i.className="ll__title-container";const s=document.createElement("h2");s.textContent=r.title??"—";const a=document.createElement("p");a.textContent=r.description??"",i.append(s,a);const o=document.createElement("div");o.className="ll__tarifs-block__tarifs-container";const l=["ll__tarifs-block__tarif tarif1 glass glass--strong is-liquid","ll__tarifs-block__tarif ll__white-container ","ll__tarifs-block__tarif tarif3 glass glass--strong is-liquid"];for(let u=0;u<3;u+=1){const h=e[u]??{},f=Array.isArray(h.points)?h.points:[],c=document.createElement("div");c.className=l[u];const d=document.createElement("div");d.className="ll__tarifs-block__titles";const v=document.createElement("h3");v.textContent=h.title??"—";const _=document.createElement("p");_.textContent=h.description??"",d.append(v,_);const p=document.createElement("div");p.className="ll__tarifs-block__tarif-p";for(const E of f){const I=document.createElement("p");I.textContent=String(E??""),p.appendChild(I)}const m=document.createElement("button");m.type="button",u===1?m.className="ll__unfilled-button ll__unfilled-button-dark  glass glass--pill is-liquid":m.className="ll__unfilled-button",m.textContent=h.ctaText??h.price??"—",c.append(d,p,m),o.appendChild(c)}return n.append(i,o),n}function sc(t){const r=t.content??{},e=Array.isArray(r.testimonials)?r.testimonials:[],n=document.createElement("div");n.className="ll__bubbles-block ll__container";const i=document.createElement("div");i.className="ll__title-container";const s=document.createElement("h2");s.textContent=r.title??"—";const a=document.createElement("p");a.textContent=r.description??"",i.append(s,a);const o=document.createElement("div");o.className="ll__bubbles-block__three-blocks-container";const l=e.length,u=l>=6?2:1,h=l>=6?["glass glass--strong is-liquid","ll__white-container","ll__white-container","glass glass--strong is-liquid","glass glass--strong is-liquid","ll__white-container"]:["glass glass--strong is-liquid","ll__white-container","glass glass--strong is-liquid"],f=(c,d)=>{const v=document.createElement("div");v.className=`ll__bubbles-block__bubble bubble${d} ${h[d-1]}`;const _=document.createElement("div");_.className="ll__bubbles-block__person";const p=document.createElement("img");p.src=c.imgSrc??"",p.alt=c.imgAlt??"";const m=document.createElement("div");m.className="ll__bubbles-block__person__info";const E=document.createElement("h4");E.textContent=c.title??"—";const I=document.createElement("p");I.textContent=c.subtitle??"",m.append(E,I),_.append(p,m);const C=document.createElement("p");return C.textContent=c.text??"",v.append(_,C),v};for(let c=0;c<3;c+=1){const d=document.createElement("div");d.className="ll__bubbles-block__two-blocks";const v=c*u;e.slice(v,v+u).forEach((p,m)=>{const E=v+m+1;d.appendChild(f(p,E))}),o.appendChild(d)}return n.append(i,o),n}function ac(t){const r=t.content??{},e=Array.isArray(r.left)?r.left:[],n=Array.isArray(r.right)?r.right:[],i=document.createElement("div");i.className="ll__faq-block ll__container";const s=document.createElement("div");s.className="ll__title-container";const a=document.createElement("h2");a.textContent=r.title??"—";const o=document.createElement("p");o.textContent=r.description??"",s.append(a,o);const l=document.createElement("div");l.className="ll__faq-block__faq-container";const u=document.createElement("div");u.className="ll__faq-block__left";const h=document.createElement("div");h.className="ll__faq-block__right";const f=c=>{const d=document.createElement("div");d.className="ll__faq-block__question-container";const v=document.createElement("div");v.className="ll__faq-block__question";const _=document.createElement("h4");_.textContent="+";const p=document.createElement("h5");p.textContent=c.question??"—",v.append(_,p);const m=document.createElement("div");m.className="ll__faq-block__answer glass glass--strong is-liquid";const E=document.createElement("p");return E.innerHTML=c.answerHtml??"",m.appendChild(E),d.append(v,m),d};return e.forEach(c=>u.appendChild(f(c))),n.forEach(c=>h.appendChild(f(c))),l.append(u,h),i.append(s,l),i}function oc(t){const r=t.content??{},e=Array.isArray(r.info1)?r.info1:[],n=Array.isArray(r.info2)?r.info2:[],i=document.createElement("div");i.className="ll__prog-block ll__container";const s=document.createElement("div");s.className="ll__title-container";const a=document.createElement("h2");a.textContent=r.title??"—";const o=document.createElement("p");o.textContent=r.description??"",s.append(a,o);const l=document.createElement("div");l.className="ll__prog-block__main-shape glass glass--soft is-liquid";const u=document.createElement("div");u.className="ll__prog-block__main-container";const h=document.createElement("div");h.className="ll__prog-block__title-container";const f=document.createElement("h3");f.textContent=r.cardTitle??"—";const c=document.createElement("p");c.textContent=r.cardText??"",h.append(f,c);const d=document.createElement("div");d.className="ll__prog-block__info-container";const v=document.createElement("div");v.className="ll__p-b__info1",e.forEach(p=>{const m=document.createElement("p");m.textContent=String(p??""),v.appendChild(m)});const _=document.createElement("div");return _.className="ll__p-b__info2",n.forEach(p=>{const m=document.createElement("p");m.textContent=String(p??""),_.appendChild(m)}),d.append(v,_),u.append(h,d),l.appendChild(u),i.append(s,l),i}function lc(t){const r=t.content??{},e=document.createElement("div");e.setAttribute("class","ll__stat-block ll__container");const n=document.createElement("div");n.setAttribute("class","ll__title-container");const i=document.createElement("h4");i.textContent=r.title??"—";const s=document.createElement("p");s.textContent=r.description??"";const a=document.createElement("button");a.setAttribute("class","ll__filled-button glass glass--pill is-liquid"),a.type="button",a.textContent=r.buttonText??"Узнать больше",n.append(i,s,a);const o=document.createElement("img");return o.setAttribute("src",r.imgSrc??"./src/assets/imgs/lend/stst.svg"),o.setAttribute("alt",r.imgAlt??""),e.append(n,o),e}const Fu={"hero-block":Jh,"what-is-it-block":Qh,"break-block":tc,"big-blur-content-block":ec,"three-filled-elements-block":rc,"why-we-block":nc,"tarifs-block":ic,"bubbles-block":sc,"faq-block":ac,"stat-block":lc,"prog-block":oc};function Mu(t){const r=Fu[t.type];if(!r){const n=document.createElement("section");return n.className="ll__unknown",n.textContent=`Unknown section type: ${t.type}`,n}const e=r(t);return e.dataset.sectionId=t.id,e.dataset.sectionType=t.type,e.dataset.sectionVariant=t.variant,e}function Bu(t){return!!Fu[t]}function uc(t){if(!t||typeof t!="object")throw new Error("Section spec must be object");if(!t.type||typeof t.type!="string")throw new Error("Section spec must have string 'type'");if(!ts[t.type])throw new Error(`blockTypes: unknown type "${t.type}"`);if(Bu(t.type)||console.warn(`renderers: no renderer for type "${t.type}"`),t.variant!=null&&typeof t.variant!="string")throw new Error("Section 'variant' must be string if provided");if(t.props!=null&&(typeof t.props!="object"||Array.isArray(t.props)))throw new Error("Section 'props' must be object if provided")}let ua=0;function Gu(t){uc(t);const{variant:r,content:e}=Zh(t.type,t.variant);return ua+=1,{id:`${t.type}__${r}__${Date.now()}__${ua}`,type:t.type,variant:r,content:e,props:t.props??{}}}function hc(t,r){if(!(t instanceof HTMLElement))throw new Error("mountSections: feed must be HTMLElement");if(!Array.isArray(r))throw new Error("mountSections: specs must be an array");const e=document.createDocumentFragment(),n=[],i=new Set;for(const s of r){if(!Bu(s.type)){i.add(s.type),console.warn(`[mount] skipped (no renderer): ${s.type}`);continue}const a=Gu(s),o=Mu(a);e.appendChild(o),n.push(o)}return t.appendChild(e),i.size?console.log("[mount] missing renderers:",[...i]):console.log("[mount] all section types rendered"),n}function cc(t){const{feed:r,batchSize:e=6,bufferAbove:n=3,bufferBelow:i=12,nearBottomPx:s=900,excludeTypes:a=["hero-block"],protectHero:o=!0,minDistance:l=2}=t??{};if(!(r instanceof HTMLElement))throw new Error("createInfiniteLoader: feed must be HTMLElement");const h=Object.keys(ts).filter(g=>!a.includes(g));if(!h.length)throw new Error("createInfiniteLoader: no eligible types to generate");let f=0,c=!1,d=!1;const v=[],_=new Map;p();function p(){const b=m().slice(-l);for(const x of b){const S=x?.dataset?.sectionType;S&&v.push(S)}for(;v.length>l;)v.shift()}function m(){return Array.from(r.children)}function E(g){return g[Math.floor(Math.random()*g.length)]}function I(g){return!v.includes(g)}function C(){for(let b=0;b<50;b+=1){const x=E(h);if(I(x))return x}return E(h)}function y(g){const b=ts[g],x=Array.isArray(b?.variants)?b.variants:[];if(!x.length)return;const S=f===0;let R=x.slice();S&&R.length>1&&(R=R.slice(1));const A=_.get(g);if(R.length>1&&A!=null){const P=R.filter(D=>D!==A);P.length&&(R=P)}const N=E(R);return _.set(g,N),N}function w(g){for(v.push(g);v.length>l;)v.shift()}function T(g){return{type:g,variant:y(g),props:{}}}function B(){const g=document.createDocumentFragment();for(let b=0;b<e;b+=1){const x=C(),S=T(x),R=Gu(S),A=Mu(R);g.appendChild(A),w(x)}r.appendChild(g),f+=1,k()}function U(){const g=document.scrollingElement||document.documentElement;return g.scrollHeight-(g.scrollTop+window.innerHeight)<s}function F(g){for(let x=0;x<g.length;x+=1)if(g[x].getBoundingClientRect().bottom>0)return x;return Math.max(0,g.length-1)}function k(){const g=m();if(g.length===0)return;const b=F(g),x=Math.max(0,b-n),S=Math.min(g.length,b+i);if(x<=0)return;let R=0;o&&g[0]?.dataset?.sectionType==="hero-block"&&(R=1);const A=x;if(A<=R)return;const N=g[b];if(!N||!N.isConnected)return;const P=N.getBoundingClientRect().top;for(let j=R;j<A;j+=1)g[j].remove();const H=N.getBoundingClientRect().top-P;window.scrollBy(0,H),O(S)}function O(g){const b=m(),x=(n+i+6)*2;if(b.length<=x)return;const S=Math.min(b.length,g+6);for(let R=b.length-1;R>=S;R-=1)b[R].remove()}function q(){c&&(d||(d=!0,requestAnimationFrame(()=>{d=!1,U()&&B()})))}function W(){c||(c=!0,window.addEventListener("scroll",q,{passive:!0}),U()&&B())}function G(){c&&(c=!1,window.removeEventListener("scroll",q))}return{enable:W,disable:G,appendBatch:B}}function fc(t){var r=this.constructor;return this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){return r.reject(e)})})}function dc(t){var r=this;return new r(function(e,n){if(!(t&&typeof t.length<"u"))return n(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(t);if(i.length===0)return e([]);var s=i.length;function a(l,u){if(u&&(typeof u=="object"||typeof u=="function")){var h=u.then;if(typeof h=="function"){h.call(u,function(f){a(l,f)},function(f){i[l]={status:"rejected",reason:f},--s===0&&e(i)});return}}i[l]={status:"fulfilled",value:u},--s===0&&e(i)}for(var o=0;o<i.length;o++)a(o,i[o])})}function Du(t,r){this.name="AggregateError",this.errors=t,this.message=r||""}Du.prototype=Error.prototype;function pc(t){var r=this;return new r(function(e,n){if(!(t&&typeof t.length<"u"))return n(new TypeError("Promise.any accepts an array"));var i=Array.prototype.slice.call(t);if(i.length===0)return n();for(var s=[],a=0;a<i.length;a++)try{r.resolve(i[a]).then(e).catch(function(o){s.push(o),s.length===i.length&&n(new Du(s,"All promises were rejected"))})}catch(o){n(o)}})}var vc=setTimeout;function ku(t){return!!(t&&typeof t.length<"u")}function _c(){}function mc(t,r){return function(){t.apply(r,arguments)}}function mt(t){if(!(this instanceof mt))throw new TypeError("Promises must be constructed via new");if(typeof t!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Xu(t,this)}function Hu(t,r){for(;t._state===3;)t=t._value;if(t._state===0){t._deferreds.push(r);return}t._handled=!0,mt._immediateFn(function(){var e=t._state===1?r.onFulfilled:r.onRejected;if(e===null){(t._state===1?es:hr)(r.promise,t._value);return}var n;try{n=e(t._value)}catch(i){hr(r.promise,i);return}es(r.promise,n)})}function es(t,r){try{if(r===t)throw new TypeError("A promise cannot be resolved with itself.");if(r&&(typeof r=="object"||typeof r=="function")){var e=r.then;if(r instanceof mt){t._state=3,t._value=r,rs(t);return}else if(typeof e=="function"){Xu(mc(e,r),t);return}}t._state=1,t._value=r,rs(t)}catch(n){hr(t,n)}}function hr(t,r){t._state=2,t._value=r,rs(t)}function rs(t){t._state===2&&t._deferreds.length===0&&mt._immediateFn(function(){t._handled||mt._unhandledRejectionFn(t._value)});for(var r=0,e=t._deferreds.length;r<e;r++)Hu(t,t._deferreds[r]);t._deferreds=null}function gc(t,r,e){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof r=="function"?r:null,this.promise=e}function Xu(t,r){var e=!1;try{t(function(n){e||(e=!0,es(r,n))},function(n){e||(e=!0,hr(r,n))})}catch(n){if(e)return;e=!0,hr(r,n)}}mt.prototype.catch=function(t){return this.then(null,t)};mt.prototype.then=function(t,r){var e=new this.constructor(_c);return Hu(this,new gc(t,r,e)),e};mt.prototype.finally=fc;mt.all=function(t){return new mt(function(r,e){if(!ku(t))return e(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(t);if(n.length===0)return r([]);var i=n.length;function s(o,l){try{if(l&&(typeof l=="object"||typeof l=="function")){var u=l.then;if(typeof u=="function"){u.call(l,function(h){s(o,h)},e);return}}n[o]=l,--i===0&&r(n)}catch(h){e(h)}}for(var a=0;a<n.length;a++)s(a,n[a])})};mt.any=pc;mt.allSettled=dc;mt.resolve=function(t){return t&&typeof t=="object"&&t.constructor===mt?t:new mt(function(r){r(t)})};mt.reject=function(t){return new mt(function(r,e){e(t)})};mt.race=function(t){return new mt(function(r,e){if(!ku(t))return e(new TypeError("Promise.race accepts an array"));for(var n=0,i=t.length;n<i;n++)mt.resolve(t[n]).then(r,e)})};mt._immediateFn=typeof setImmediate=="function"&&function(t){setImmediate(t)}||function(t){vc(t,0)};mt._unhandledRejectionFn=function(r){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",r)};var Kr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function yc(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var r=t.default;if(typeof r=="function"){var e=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};e.prototype=r.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),e}var wn,ha;function bc(){if(ha)return wn;ha=1;var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable;function n(s){if(s==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(s)}function i(){try{if(!Object.assign)return!1;var s=new String("abc");if(s[5]="de",Object.getOwnPropertyNames(s)[0]==="5")return!1;for(var a={},o=0;o<10;o++)a["_"+String.fromCharCode(o)]=o;var l=Object.getOwnPropertyNames(a).map(function(h){return a[h]});if(l.join("")!=="0123456789")return!1;var u={};return"abcdefghijklmnopqrst".split("").forEach(function(h){u[h]=h}),Object.keys(Object.assign({},u)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return wn=i()?Object.assign:function(s,a){for(var o,l=n(s),u,h=1;h<arguments.length;h++){o=Object(arguments[h]);for(var f in o)r.call(o,f)&&(l[f]=o[f]);if(t){u=t(o);for(var c=0;c<u.length;c++)e.call(o,u[c])&&(l[u[c]]=o[u[c]])}}return l},wn}var xc=bc();const Tc=Hs(xc);self.Promise||(self.Promise=mt);Object.assign||(Object.assign=Tc);var Ec=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(self.performance&&self.performance.now)){var wc=Date.now();self.performance||(self.performance={}),self.performance.now=function(){return Date.now()-wc}}var In=Date.now(),ca=["ms","moz","webkit","o"];for(var Rn=0;Rn<ca.length&&!self.requestAnimationFrame;++Rn){var Cn=ca[Rn];self.requestAnimationFrame=self[Cn+"RequestAnimationFrame"],self.cancelAnimationFrame=self[Cn+"CancelAnimationFrame"]||self[Cn+"CancelRequestAnimationFrame"]}self.requestAnimationFrame||(self.requestAnimationFrame=function(t){if(typeof t!="function")throw new TypeError(t+"is not a function");var r=Date.now(),e=Ec+In-r;return e<0&&(e=0),In=r,self.setTimeout(function(){In=Date.now(),t(performance.now())},e)});self.cancelAnimationFrame||(self.cancelAnimationFrame=function(t){return clearTimeout(t)});Math.sign||(Math.sign=function(r){return r=Number(r),r===0||isNaN(r)?r:r>0?1:-1});Number.isInteger||(Number.isInteger=function(r){return typeof r=="number"&&isFinite(r)&&Math.floor(r)===r});self.ArrayBuffer||(self.ArrayBuffer=Array);self.Float32Array||(self.Float32Array=Array);self.Uint32Array||(self.Uint32Array=Array);self.Uint16Array||(self.Uint16Array=Array);self.Uint8Array||(self.Uint8Array=Array);self.Int32Array||(self.Int32Array=Array);var An=/iPhone/i,fa=/iPod/i,da=/iPad/i,pa=/\biOS-universal(?:.+)Mac\b/i,Sn=/\bAndroid(?:.+)Mobile\b/i,va=/Android/i,Fe=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Ir=/Silk/i,Kt=/Windows Phone/i,_a=/\bWindows(?:.+)ARM\b/i,ma=/BlackBerry/i,ga=/BB10/i,ya=/Opera Mini/i,ba=/\b(CriOS|Chrome)(?:.+)Mobile/i,xa=/Mobile(?:.+)Firefox\b/i,Ta=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function Ic(t){return function(r){return r.test(t)}}function Rc(t){var r={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?r={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?r.userAgent=t:t&&t.userAgent&&(r={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var e=r.userAgent,n=e.split("[FBAN");typeof n[1]<"u"&&(e=n[0]),n=e.split("Twitter"),typeof n[1]<"u"&&(e=n[0]);var i=Ic(e),s={apple:{phone:i(An)&&!i(Kt),ipod:i(fa),tablet:!i(An)&&(i(da)||Ta(r))&&!i(Kt),universal:i(pa),device:(i(An)||i(fa)||i(da)||i(pa)||Ta(r))&&!i(Kt)},amazon:{phone:i(Fe),tablet:!i(Fe)&&i(Ir),device:i(Fe)||i(Ir)},android:{phone:!i(Kt)&&i(Fe)||!i(Kt)&&i(Sn),tablet:!i(Kt)&&!i(Fe)&&!i(Sn)&&(i(Ir)||i(va)),device:!i(Kt)&&(i(Fe)||i(Ir)||i(Sn)||i(va))||i(/\bokhttp\b/i)},windows:{phone:i(Kt),tablet:i(_a),device:i(Kt)||i(_a)},other:{blackberry:i(ma),blackberry10:i(ga),opera:i(ya),firefox:i(xa),chrome:i(ba),device:i(ma)||i(ga)||i(ya)||i(xa)||i(ba)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}var jt=Rc(self.navigator);function Cc(t){var r=!0;if(jt.tablet||jt.phone){if(jt.apple.device){var e=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(e){var n=parseInt(e[1],10);n<11&&(r=!1)}}if(jt.android.device){var e=navigator.userAgent.match(/Android\s([0-9.]*)/);if(e){var n=parseInt(e[1],10);n<7&&(r=!1)}}}return r?t:4}function Ac(){return!jt.apple.device}var Ea;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(Ea||(Ea={}));var wa;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(wa||(wa={}));var Ia;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(Ia||(Ia={}));var Ra;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(Ra||(Ra={}));var Ca;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Ca||(Ca={}));var Aa;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Aa||(Aa={}));var Sa;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Sa||(Sa={}));var Pa;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(Pa||(Pa={}));var Na;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(Na||(Na={}));var ns;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(ns||(ns={}));var is;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(is||(is={}));var ss;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(ss||(ss={}));var Oa;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Oa||(Oa={}));var Ua;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(Ua||(Ua={}));var as;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(as||(as={}));var or;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(or||(or={}));var La;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"})(La||(La={}));var os;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(os||(os={}));var Fa;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Fa||(Fa={}));var et={MIPMAP_TEXTURES:ss.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:os.NONE,SPRITE_MAX_TEXTURES:Cc(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:as.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:is.CLAMP,SCALE_MODE:ns.LINEAR,PRECISION_VERTEX:or.HIGH,PRECISION_FRAGMENT:jt.apple.device?or.HIGH:or.MEDIUM,CAN_UPLOAD_SAME_BUFFER:Ac(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Pn={exports:{}},Ma;function Sc(){return Ma||(Ma=1,(function(t){var r=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function i(l,u,h){this.fn=l,this.context=u,this.once=h||!1}function s(l,u,h,f,c){if(typeof h!="function")throw new TypeError("The listener must be a function");var d=new i(h,f||l,c),v=e?e+u:u;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],d]:l._events[v].push(d):(l._events[v]=d,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],h,f;if(this._eventsCount===0)return u;for(f in h=this._events)r.call(h,f)&&u.push(e?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},o.prototype.listeners=function(u){var h=e?e+u:u,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var c=0,d=f.length,v=new Array(d);c<d;c++)v[c]=f[c].fn;return v},o.prototype.listenerCount=function(u){var h=e?e+u:u,f=this._events[h];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,h,f,c,d,v){var _=e?e+u:u;if(!this._events[_])return!1;var p=this._events[_],m=arguments.length,E,I;if(p.fn){switch(p.once&&this.removeListener(u,p.fn,void 0,!0),m){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,h),!0;case 3:return p.fn.call(p.context,h,f),!0;case 4:return p.fn.call(p.context,h,f,c),!0;case 5:return p.fn.call(p.context,h,f,c,d),!0;case 6:return p.fn.call(p.context,h,f,c,d,v),!0}for(I=1,E=new Array(m-1);I<m;I++)E[I-1]=arguments[I];p.fn.apply(p.context,E)}else{var C=p.length,y;for(I=0;I<C;I++)switch(p[I].once&&this.removeListener(u,p[I].fn,void 0,!0),m){case 1:p[I].fn.call(p[I].context);break;case 2:p[I].fn.call(p[I].context,h);break;case 3:p[I].fn.call(p[I].context,h,f);break;case 4:p[I].fn.call(p[I].context,h,f,c);break;default:if(!E)for(y=1,E=new Array(m-1);y<m;y++)E[y-1]=arguments[y];p[I].fn.apply(p[I].context,E)}}return!0},o.prototype.on=function(u,h,f){return s(this,u,h,f,!1)},o.prototype.once=function(u,h,f){return s(this,u,h,f,!0)},o.prototype.removeListener=function(u,h,f,c){var d=e?e+u:u;if(!this._events[d])return this;if(!h)return a(this,d),this;var v=this._events[d];if(v.fn)v.fn===h&&(!c||v.once)&&(!f||v.context===f)&&a(this,d);else{for(var _=0,p=[],m=v.length;_<m;_++)(v[_].fn!==h||c&&!v[_].once||f&&v[_].context!==f)&&p.push(v[_]);p.length?this._events[d]=p.length===1?p[0]:p:a(this,d)}return this},o.prototype.removeAllListeners=function(u){var h;return u?(h=e?e+u:u,this._events[h]&&a(this,h)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=e,o.EventEmitter=o,t.exports=o})(Pn)),Pn.exports}var Pc=Sc();const yr=Hs(Pc);var Rr={exports:{}},Ba;function Nc(){if(Ba)return Rr.exports;Ba=1,Rr.exports=t,Rr.exports.default=t;function t(g,b,x){x=x||2;var S=b&&b.length,R=S?b[0]*x:g.length,A=r(g,0,R,x,!0),N=[];if(!A||A.next===A.prev)return N;var P,D,H,j,$,J,Y;if(S&&(A=l(g,b,A,x)),g.length>80*x){P=H=g[0],D=j=g[1];for(var X=x;X<R;X+=x)$=g[X],J=g[X+1],$<P&&(P=$),J<D&&(D=J),$>H&&(H=$),J>j&&(j=J);Y=Math.max(H-P,j-D),Y=Y!==0?32767/Y:0}return n(A,N,x,P,D,Y,0),N}function r(g,b,x,S,R){var A,N;if(R===G(g,b,x,S)>0)for(A=b;A<x;A+=S)N=O(A,g[A],g[A+1],N);else for(A=x-S;A>=b;A-=S)N=O(A,g[A],g[A+1],N);return N&&C(N,N.next)&&(q(N),N=N.next),N}function e(g,b){if(!g)return g;b||(b=g);var x=g,S;do if(S=!1,!x.steiner&&(C(x,x.next)||I(x.prev,x,x.next)===0)){if(q(x),x=b=x.prev,x===x.next)break;S=!0}else x=x.next;while(S||x!==b);return b}function n(g,b,x,S,R,A,N){if(g){!N&&A&&d(g,S,R,A);for(var P=g,D,H;g.prev!==g.next;){if(D=g.prev,H=g.next,A?s(g,S,R,A):i(g)){b.push(D.i/x|0),b.push(g.i/x|0),b.push(H.i/x|0),q(g),g=H.next,P=H.next;continue}if(g=H,g===P){N?N===1?(g=a(e(g),b,x),n(g,b,x,S,R,A,2)):N===2&&o(g,b,x,S,R,A):n(e(g),b,x,S,R,A,1);break}}}}function i(g){var b=g.prev,x=g,S=g.next;if(I(b,x,S)>=0)return!1;for(var R=b.x,A=x.x,N=S.x,P=b.y,D=x.y,H=S.y,j=R<A?R<N?R:N:A<N?A:N,$=P<D?P<H?P:H:D<H?D:H,J=R>A?R>N?R:N:A>N?A:N,Y=P>D?P>H?P:H:D>H?D:H,X=S.next;X!==b;){if(X.x>=j&&X.x<=J&&X.y>=$&&X.y<=Y&&m(R,P,A,D,N,H,X.x,X.y)&&I(X.prev,X,X.next)>=0)return!1;X=X.next}return!0}function s(g,b,x,S){var R=g.prev,A=g,N=g.next;if(I(R,A,N)>=0)return!1;for(var P=R.x,D=A.x,H=N.x,j=R.y,$=A.y,J=N.y,Y=P<D?P<H?P:H:D<H?D:H,X=j<$?j<J?j:J:$<J?$:J,Z=P>D?P>H?P:H:D>H?D:H,Q=j>$?j>J?j:J:$>J?$:J,tt=_(Y,X,b,x,S),st=_(Z,Q,b,x,S),K=g.prevZ,V=g.nextZ;K&&K.z>=tt&&V&&V.z<=st;){if(K.x>=Y&&K.x<=Z&&K.y>=X&&K.y<=Q&&K!==R&&K!==N&&m(P,j,D,$,H,J,K.x,K.y)&&I(K.prev,K,K.next)>=0||(K=K.prevZ,V.x>=Y&&V.x<=Z&&V.y>=X&&V.y<=Q&&V!==R&&V!==N&&m(P,j,D,$,H,J,V.x,V.y)&&I(V.prev,V,V.next)>=0))return!1;V=V.nextZ}for(;K&&K.z>=tt;){if(K.x>=Y&&K.x<=Z&&K.y>=X&&K.y<=Q&&K!==R&&K!==N&&m(P,j,D,$,H,J,K.x,K.y)&&I(K.prev,K,K.next)>=0)return!1;K=K.prevZ}for(;V&&V.z<=st;){if(V.x>=Y&&V.x<=Z&&V.y>=X&&V.y<=Q&&V!==R&&V!==N&&m(P,j,D,$,H,J,V.x,V.y)&&I(V.prev,V,V.next)>=0)return!1;V=V.nextZ}return!0}function a(g,b,x){var S=g;do{var R=S.prev,A=S.next.next;!C(R,A)&&y(R,S,S.next,A)&&U(R,A)&&U(A,R)&&(b.push(R.i/x|0),b.push(S.i/x|0),b.push(A.i/x|0),q(S),q(S.next),S=g=A),S=S.next}while(S!==g);return e(S)}function o(g,b,x,S,R,A){var N=g;do{for(var P=N.next.next;P!==N.prev;){if(N.i!==P.i&&E(N,P)){var D=k(N,P);N=e(N,N.next),D=e(D,D.next),n(N,b,x,S,R,A,0),n(D,b,x,S,R,A,0);return}P=P.next}N=N.next}while(N!==g)}function l(g,b,x,S){var R=[],A,N,P,D,H;for(A=0,N=b.length;A<N;A++)P=b[A]*S,D=A<N-1?b[A+1]*S:g.length,H=r(g,P,D,S,!1),H===H.next&&(H.steiner=!0),R.push(p(H));for(R.sort(u),A=0;A<R.length;A++)x=h(R[A],x);return x}function u(g,b){return g.x-b.x}function h(g,b){var x=f(g,b);if(!x)return b;var S=k(x,g);return e(S,S.next),e(x,x.next)}function f(g,b){var x=b,S=g.x,R=g.y,A=-1/0,N;do{if(R<=x.y&&R>=x.next.y&&x.next.y!==x.y){var P=x.x+(R-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(P<=S&&P>A&&(A=P,N=x.x<x.next.x?x:x.next,P===S))return N}x=x.next}while(x!==b);if(!N)return null;var D=N,H=N.x,j=N.y,$=1/0,J;x=N;do S>=x.x&&x.x>=H&&S!==x.x&&m(R<j?S:A,R,H,j,R<j?A:S,R,x.x,x.y)&&(J=Math.abs(R-x.y)/(S-x.x),U(x,g)&&(J<$||J===$&&(x.x>N.x||x.x===N.x&&c(N,x)))&&(N=x,$=J)),x=x.next;while(x!==D);return N}function c(g,b){return I(g.prev,g,b.prev)<0&&I(b.next,g,g.next)<0}function d(g,b,x,S){var R=g;do R.z===0&&(R.z=_(R.x,R.y,b,x,S)),R.prevZ=R.prev,R.nextZ=R.next,R=R.next;while(R!==g);R.prevZ.nextZ=null,R.prevZ=null,v(R)}function v(g){var b,x,S,R,A,N,P,D,H=1;do{for(x=g,g=null,A=null,N=0;x;){for(N++,S=x,P=0,b=0;b<H&&(P++,S=S.nextZ,!!S);b++);for(D=H;P>0||D>0&&S;)P!==0&&(D===0||!S||x.z<=S.z)?(R=x,x=x.nextZ,P--):(R=S,S=S.nextZ,D--),A?A.nextZ=R:g=R,R.prevZ=A,A=R;x=S}A.nextZ=null,H*=2}while(N>1);return g}function _(g,b,x,S,R){return g=(g-x)*R|0,b=(b-S)*R|0,g=(g|g<<8)&16711935,g=(g|g<<4)&252645135,g=(g|g<<2)&858993459,g=(g|g<<1)&1431655765,b=(b|b<<8)&16711935,b=(b|b<<4)&252645135,b=(b|b<<2)&858993459,b=(b|b<<1)&1431655765,g|b<<1}function p(g){var b=g,x=g;do(b.x<x.x||b.x===x.x&&b.y<x.y)&&(x=b),b=b.next;while(b!==g);return x}function m(g,b,x,S,R,A,N,P){return(R-N)*(b-P)>=(g-N)*(A-P)&&(g-N)*(S-P)>=(x-N)*(b-P)&&(x-N)*(A-P)>=(R-N)*(S-P)}function E(g,b){return g.next.i!==b.i&&g.prev.i!==b.i&&!B(g,b)&&(U(g,b)&&U(b,g)&&F(g,b)&&(I(g.prev,g,b.prev)||I(g,b.prev,b))||C(g,b)&&I(g.prev,g,g.next)>0&&I(b.prev,b,b.next)>0)}function I(g,b,x){return(b.y-g.y)*(x.x-b.x)-(b.x-g.x)*(x.y-b.y)}function C(g,b){return g.x===b.x&&g.y===b.y}function y(g,b,x,S){var R=T(I(g,b,x)),A=T(I(g,b,S)),N=T(I(x,S,g)),P=T(I(x,S,b));return!!(R!==A&&N!==P||R===0&&w(g,x,b)||A===0&&w(g,S,b)||N===0&&w(x,g,S)||P===0&&w(x,b,S))}function w(g,b,x){return b.x<=Math.max(g.x,x.x)&&b.x>=Math.min(g.x,x.x)&&b.y<=Math.max(g.y,x.y)&&b.y>=Math.min(g.y,x.y)}function T(g){return g>0?1:g<0?-1:0}function B(g,b){var x=g;do{if(x.i!==g.i&&x.next.i!==g.i&&x.i!==b.i&&x.next.i!==b.i&&y(x,x.next,g,b))return!0;x=x.next}while(x!==g);return!1}function U(g,b){return I(g.prev,g,g.next)<0?I(g,b,g.next)>=0&&I(g,g.prev,b)>=0:I(g,b,g.prev)<0||I(g,g.next,b)<0}function F(g,b){var x=g,S=!1,R=(g.x+b.x)/2,A=(g.y+b.y)/2;do x.y>A!=x.next.y>A&&x.next.y!==x.y&&R<(x.next.x-x.x)*(A-x.y)/(x.next.y-x.y)+x.x&&(S=!S),x=x.next;while(x!==g);return S}function k(g,b){var x=new W(g.i,g.x,g.y),S=new W(b.i,b.x,b.y),R=g.next,A=b.prev;return g.next=b,b.prev=g,x.next=R,R.prev=x,S.next=x,x.prev=S,A.next=S,S.prev=A,S}function O(g,b,x,S){var R=new W(g,b,x);return S?(R.next=S.next,R.prev=S,S.next.prev=R,S.next=R):(R.prev=R,R.next=R),R}function q(g){g.next.prev=g.prev,g.prev.next=g.next,g.prevZ&&(g.prevZ.nextZ=g.nextZ),g.nextZ&&(g.nextZ.prevZ=g.prevZ)}function W(g,b,x){this.i=g,this.x=b,this.y=x,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}t.deviation=function(g,b,x,S){var R=b&&b.length,A=R?b[0]*x:g.length,N=Math.abs(G(g,0,A,x));if(R)for(var P=0,D=b.length;P<D;P++){var H=b[P]*x,j=P<D-1?b[P+1]*x:g.length;N-=Math.abs(G(g,H,j,x))}var $=0;for(P=0;P<S.length;P+=3){var J=S[P]*x,Y=S[P+1]*x,X=S[P+2]*x;$+=Math.abs((g[J]-g[X])*(g[Y+1]-g[J+1])-(g[J]-g[Y])*(g[X+1]-g[J+1]))}return N===0&&$===0?0:Math.abs(($-N)/N)};function G(g,b,x,S){for(var R=0,A=b,N=x-S;A<x;A+=S)R+=(g[N]-g[A])*(g[A+1]+g[N+1]),N=A;return R}return t.flatten=function(g){for(var b=g[0][0].length,x={vertices:[],holes:[],dimensions:b},S=0,R=0;R<g.length;R++){for(var A=0;A<g[R].length;A++)for(var N=0;N<b;N++)x.vertices.push(g[R][A][N]);R>0&&(S+=g[R-1].length,x.holes.push(S))}return x},Rr.exports}var Oc=Nc();const ju=Hs(Oc);var _e={},ar={exports:{}};var Uc=ar.exports,Ga;function Lc(){return Ga||(Ga=1,(function(t,r){(function(e){var n=r&&!r.nodeType&&r,i=t&&!t.nodeType&&t,s=typeof Kr=="object"&&Kr;(s.global===s||s.window===s||s.self===s)&&(e=s);var a,o=2147483647,l=36,u=1,h=26,f=38,c=700,d=72,v=128,_="-",p=/^xn--/,m=/[^\x20-\x7E]/,E=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=l-u,y=Math.floor,w=String.fromCharCode,T;function B(R){throw new RangeError(I[R])}function U(R,A){for(var N=R.length,P=[];N--;)P[N]=A(R[N]);return P}function F(R,A){var N=R.split("@"),P="";N.length>1&&(P=N[0]+"@",R=N[1]),R=R.replace(E,".");var D=R.split("."),H=U(D,A).join(".");return P+H}function k(R){for(var A=[],N=0,P=R.length,D,H;N<P;)D=R.charCodeAt(N++),D>=55296&&D<=56319&&N<P?(H=R.charCodeAt(N++),(H&64512)==56320?A.push(((D&1023)<<10)+(H&1023)+65536):(A.push(D),N--)):A.push(D);return A}function O(R){return U(R,function(A){var N="";return A>65535&&(A-=65536,N+=w(A>>>10&1023|55296),A=56320|A&1023),N+=w(A),N}).join("")}function q(R){return R-48<10?R-22:R-65<26?R-65:R-97<26?R-97:l}function W(R,A){return R+22+75*(R<26)-((A!=0)<<5)}function G(R,A,N){var P=0;for(R=N?y(R/c):R>>1,R+=y(R/A);R>C*h>>1;P+=l)R=y(R/C);return y(P+(C+1)*R/(R+f))}function g(R){var A=[],N=R.length,P,D=0,H=v,j=d,$,J,Y,X,Z,Q,tt,st,K;for($=R.lastIndexOf(_),$<0&&($=0),J=0;J<$;++J)R.charCodeAt(J)>=128&&B("not-basic"),A.push(R.charCodeAt(J));for(Y=$>0?$+1:0;Y<N;){for(X=D,Z=1,Q=l;Y>=N&&B("invalid-input"),tt=q(R.charCodeAt(Y++)),(tt>=l||tt>y((o-D)/Z))&&B("overflow"),D+=tt*Z,st=Q<=j?u:Q>=j+h?h:Q-j,!(tt<st);Q+=l)K=l-st,Z>y(o/K)&&B("overflow"),Z*=K;P=A.length+1,j=G(D-X,P,X==0),y(D/P)>o-H&&B("overflow"),H+=y(D/P),D%=P,A.splice(D++,0,H)}return O(A)}function b(R){var A,N,P,D,H,j,$,J,Y,X,Z,Q=[],tt,st,K,V;for(R=k(R),tt=R.length,A=v,N=0,H=d,j=0;j<tt;++j)Z=R[j],Z<128&&Q.push(w(Z));for(P=D=Q.length,D&&Q.push(_);P<tt;){for($=o,j=0;j<tt;++j)Z=R[j],Z>=A&&Z<$&&($=Z);for(st=P+1,$-A>y((o-N)/st)&&B("overflow"),N+=($-A)*st,A=$,j=0;j<tt;++j)if(Z=R[j],Z<A&&++N>o&&B("overflow"),Z==A){for(J=N,Y=l;X=Y<=H?u:Y>=H+h?h:Y-H,!(J<X);Y+=l)V=J-X,K=l-X,Q.push(w(W(X+V%K,0))),J=y(V/K);Q.push(w(W(J,0))),H=G(N,st,P==D),N=0,++P}++N,++A}return Q.join("")}function x(R){return F(R,function(A){return p.test(A)?g(A.slice(4).toLowerCase()):A})}function S(R){return F(R,function(A){return m.test(A)?"xn--"+b(A):A})}if(a={version:"1.4.1",ucs2:{decode:k,encode:O},decode:g,encode:b,toASCII:S,toUnicode:x},n&&i)if(t.exports==n)i.exports=a;else for(T in a)a.hasOwnProperty(T)&&(n[T]=a[T]);else e.punycode=a})(Uc)})(ar,ar.exports)),ar.exports}var Nn,Da;function $e(){return Da||(Da=1,Nn=TypeError),Nn}const Fc={},Mc=Object.freeze(Object.defineProperty({__proto__:null,default:Fc},Symbol.toStringTag,{value:"Module"})),Bc=yc(Mc);var On,ka;function ln(){if(ka)return On;ka=1;var t=typeof Map=="function"&&Map.prototype,r=Object.getOwnPropertyDescriptor&&t?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,e=t&&r&&typeof r.get=="function"?r.get:null,n=t&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,a=i&&s&&typeof s.get=="function"?s.get:null,o=i&&Set.prototype.forEach,l=typeof WeakMap=="function"&&WeakMap.prototype,u=l?WeakMap.prototype.has:null,h=typeof WeakSet=="function"&&WeakSet.prototype,f=h?WeakSet.prototype.has:null,c=typeof WeakRef=="function"&&WeakRef.prototype,d=c?WeakRef.prototype.deref:null,v=Boolean.prototype.valueOf,_=Object.prototype.toString,p=Function.prototype.toString,m=String.prototype.match,E=String.prototype.slice,I=String.prototype.replace,C=String.prototype.toUpperCase,y=String.prototype.toLowerCase,w=RegExp.prototype.test,T=Array.prototype.concat,B=Array.prototype.join,U=Array.prototype.slice,F=Math.floor,k=typeof BigInt=="function"?BigInt.prototype.valueOf:null,O=Object.getOwnPropertySymbols,q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,W=typeof Symbol=="function"&&typeof Symbol.iterator=="object",G=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===W||!0)?Symbol.toStringTag:null,g=Object.prototype.propertyIsEnumerable,b=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(L){return L.__proto__}:null);function x(L,M){if(L===1/0||L===-1/0||L!==L||L&&L>-1e3&&L<1e3||w.call(/e/,M))return M;var ht=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof L=="number"){var dt=L<0?-F(-L):F(L);if(dt!==L){var vt=String(dt),ot=E.call(M,vt.length+1);return I.call(vt,ht,"$&_")+"."+I.call(I.call(ot,/([0-9]{3})/g,"$&_"),/_$/,"")}}return I.call(M,ht,"$&_")}var S=Bc,R=S.custom,A=st(R)?R:null,N={__proto__:null,double:'"',single:"'"},P={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};On=function L(M,ht,dt,vt){var ot=ht||{};if(ct(ot,"quoteStyle")&&!ct(N,ot.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ct(ot,"maxStringLength")&&(typeof ot.maxStringLength=="number"?ot.maxStringLength<0&&ot.maxStringLength!==1/0:ot.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var ne=ct(ot,"customInspect")?ot.customInspect:!0;if(typeof ne!="boolean"&&ne!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ct(ot,"indent")&&ot.indent!==null&&ot.indent!=="	"&&!(parseInt(ot.indent,10)===ot.indent&&ot.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ct(ot,"numericSeparator")&&typeof ot.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var ve=ot.numericSeparator;if(typeof M>"u")return"undefined";if(M===null)return"null";if(typeof M=="boolean")return M?"true":"false";if(typeof M=="string")return Qs(M,ot);if(typeof M=="number"){if(M===0)return 1/0/M>0?"0":"-0";var Pt=String(M);return ve?x(M,Pt):Pt}if(typeof M=="bigint"){var ie=String(M)+"n";return ve?x(M,ie):ie}var mn=typeof ot.depth>"u"?5:ot.depth;if(typeof dt>"u"&&(dt=0),dt>=mn&&mn>0&&typeof M=="object")return $(M)?"[Array]":"[Object]";var Ue=Xh(ot,dt);if(typeof vt>"u")vt=[];else if(Bt(vt,M)>=0)return"[Circular]";function Gt(Le,wr,Vh){if(wr&&(vt=U.call(vt),vt.push(wr)),Vh){var la={depth:ot.depth};return ct(ot,"quoteStyle")&&(la.quoteStyle=ot.quoteStyle),L(Le,la,dt+1,vt)}return L(Le,ot,dt+1,vt)}if(typeof M=="function"&&!Y(M)){var ea=Mt(M),ra=Tr(M,Gt);return"[Function"+(ea?": "+ea:" (anonymous)")+"]"+(ra.length>0?" { "+B.call(ra,", ")+" }":"")}if(st(M)){var na=W?I.call(String(M),/^(Symbol\(.*\))_[^)]*$/,"$1"):q.call(M);return typeof M=="object"&&!W?Ke(na):na}if(Dh(M)){for(var Ze="<"+y.call(String(M.nodeName)),gn=M.attributes||[],Er=0;Er<gn.length;Er++)Ze+=" "+gn[Er].name+"="+D(H(gn[Er].value),"double",ot);return Ze+=">",M.childNodes&&M.childNodes.length&&(Ze+="..."),Ze+="</"+y.call(String(M.nodeName))+">",Ze}if($(M)){if(M.length===0)return"[]";var yn=Tr(M,Gt);return Ue&&!Hh(yn)?"["+_n(yn,Ue)+"]":"[ "+B.call(yn,", ")+" ]"}if(X(M)){var bn=Tr(M,Gt);return!("cause"in Error.prototype)&&"cause"in M&&!g.call(M,"cause")?"{ ["+String(M)+"] "+B.call(T.call("[cause]: "+Gt(M.cause),bn),", ")+" }":bn.length===0?"["+String(M)+"]":"{ ["+String(M)+"] "+B.call(bn,", ")+" }"}if(typeof M=="object"&&ne){if(A&&typeof M[A]=="function"&&S)return S(M,{depth:mn-dt});if(ne!=="symbol"&&typeof M.inspect=="function")return M.inspect()}if(St(M)){var ia=[];return n&&n.call(M,function(Le,wr){ia.push(Gt(wr,M,!0)+" => "+Gt(Le,M))}),ta("Map",e.call(M),ia,Ue)}if(Oe(M)){var sa=[];return o&&o.call(M,function(Le){sa.push(Gt(Le,M))}),ta("Set",a.call(M),sa,Ue)}if($t(M))return vn("WeakMap");if(Gh(M))return vn("WeakSet");if(Yt(M))return vn("WeakRef");if(Q(M))return Ke(Gt(Number(M)));if(K(M))return Ke(Gt(k.call(M)));if(tt(M))return Ke(v.call(M));if(Z(M))return Ke(Gt(String(M)));if(typeof window<"u"&&M===window)return"{ [object Window] }";if(typeof globalThis<"u"&&M===globalThis||typeof Kr<"u"&&M===Kr)return"{ [object globalThis] }";if(!J(M)&&!Y(M)){var xn=Tr(M,Gt),aa=b?b(M)===Object.prototype:M instanceof Object||M.constructor===Object,Tn=M instanceof Object?"":"null prototype",oa=!aa&&G&&Object(M)===M&&G in M?E.call(yt(M),8,-1):Tn?"Object":"",jh=aa||typeof M.constructor!="function"?"":M.constructor.name?M.constructor.name+" ":"",En=jh+(oa||Tn?"["+B.call(T.call([],oa||[],Tn||[]),": ")+"] ":"");return xn.length===0?En+"{}":Ue?En+"{"+_n(xn,Ue)+"}":En+"{ "+B.call(xn,", ")+" }"}return String(M)};function D(L,M,ht){var dt=ht.quoteStyle||M,vt=N[dt];return vt+L+vt}function H(L){return I.call(String(L),/"/g,"&quot;")}function j(L){return!G||!(typeof L=="object"&&(G in L||typeof L[G]<"u"))}function $(L){return yt(L)==="[object Array]"&&j(L)}function J(L){return yt(L)==="[object Date]"&&j(L)}function Y(L){return yt(L)==="[object RegExp]"&&j(L)}function X(L){return yt(L)==="[object Error]"&&j(L)}function Z(L){return yt(L)==="[object String]"&&j(L)}function Q(L){return yt(L)==="[object Number]"&&j(L)}function tt(L){return yt(L)==="[object Boolean]"&&j(L)}function st(L){if(W)return L&&typeof L=="object"&&L instanceof Symbol;if(typeof L=="symbol")return!0;if(!L||typeof L!="object"||!q)return!1;try{return q.call(L),!0}catch{}return!1}function K(L){if(!L||typeof L!="object"||!k)return!1;try{return k.call(L),!0}catch{}return!1}var V=Object.prototype.hasOwnProperty||function(L){return L in this};function ct(L,M){return V.call(L,M)}function yt(L){return _.call(L)}function Mt(L){if(L.name)return L.name;var M=m.call(p.call(L),/^function\s*([\w$]+)/);return M?M[1]:null}function Bt(L,M){if(L.indexOf)return L.indexOf(M);for(var ht=0,dt=L.length;ht<dt;ht++)if(L[ht]===M)return ht;return-1}function St(L){if(!e||!L||typeof L!="object")return!1;try{e.call(L);try{a.call(L)}catch{return!0}return L instanceof Map}catch{}return!1}function $t(L){if(!u||!L||typeof L!="object")return!1;try{u.call(L,u);try{f.call(L,f)}catch{return!0}return L instanceof WeakMap}catch{}return!1}function Yt(L){if(!d||!L||typeof L!="object")return!1;try{return d.call(L),!0}catch{}return!1}function Oe(L){if(!a||!L||typeof L!="object")return!1;try{a.call(L);try{e.call(L)}catch{return!0}return L instanceof Set}catch{}return!1}function Gh(L){if(!f||!L||typeof L!="object")return!1;try{f.call(L,f);try{u.call(L,u)}catch{return!0}return L instanceof WeakSet}catch{}return!1}function Dh(L){return!L||typeof L!="object"?!1:typeof HTMLElement<"u"&&L instanceof HTMLElement?!0:typeof L.nodeName=="string"&&typeof L.getAttribute=="function"}function Qs(L,M){if(L.length>M.maxStringLength){var ht=L.length-M.maxStringLength,dt="... "+ht+" more character"+(ht>1?"s":"");return Qs(E.call(L,0,M.maxStringLength),M)+dt}var vt=P[M.quoteStyle||"single"];vt.lastIndex=0;var ot=I.call(I.call(L,vt,"\\$1"),/[\x00-\x1f]/g,kh);return D(ot,"single",M)}function kh(L){var M=L.charCodeAt(0),ht={8:"b",9:"t",10:"n",12:"f",13:"r"}[M];return ht?"\\"+ht:"\\x"+(M<16?"0":"")+C.call(M.toString(16))}function Ke(L){return"Object("+L+")"}function vn(L){return L+" { ? }"}function ta(L,M,ht,dt){var vt=dt?_n(ht,dt):B.call(ht,", ");return L+" ("+M+") {"+vt+"}"}function Hh(L){for(var M=0;M<L.length;M++)if(Bt(L[M],`
`)>=0)return!1;return!0}function Xh(L,M){var ht;if(L.indent==="	")ht="	";else if(typeof L.indent=="number"&&L.indent>0)ht=B.call(Array(L.indent+1)," ");else return null;return{base:ht,prev:B.call(Array(M+1),ht)}}function _n(L,M){if(L.length===0)return"";var ht=`
`+M.prev+M.base;return ht+B.call(L,","+ht)+`
`+M.prev}function Tr(L,M){var ht=$(L),dt=[];if(ht){dt.length=L.length;for(var vt=0;vt<L.length;vt++)dt[vt]=ct(L,vt)?M(L[vt],L):""}var ot=typeof O=="function"?O(L):[],ne;if(W){ne={};for(var ve=0;ve<ot.length;ve++)ne["$"+ot[ve]]=ot[ve]}for(var Pt in L)ct(L,Pt)&&(ht&&String(Number(Pt))===Pt&&Pt<L.length||W&&ne["$"+Pt]instanceof Symbol||(w.call(/[^\w$]/,Pt)?dt.push(M(Pt,L)+": "+M(L[Pt],L)):dt.push(Pt+": "+M(L[Pt],L))));if(typeof O=="function")for(var ie=0;ie<ot.length;ie++)g.call(L,ot[ie])&&dt.push("["+M(ot[ie])+"]: "+M(L[ot[ie]],L));return dt}return On}var Un,Ha;function Gc(){if(Ha)return Un;Ha=1;var t=ln(),r=$e(),e=function(o,l,u){for(var h=o,f;(f=h.next)!=null;h=f)if(f.key===l)return h.next=f.next,u||(f.next=o.next,o.next=f),f},n=function(o,l){if(o){var u=e(o,l);return u&&u.value}},i=function(o,l,u){var h=e(o,l);h?h.value=u:o.next={key:l,next:o.next,value:u}},s=function(o,l){return o?!!e(o,l):!1},a=function(o,l){if(o)return e(o,l,!0)};return Un=function(){var l,u={assert:function(h){if(!u.has(h))throw new r("Side channel does not contain "+t(h))},delete:function(h){var f=l&&l.next,c=a(l,h);return c&&f&&f===c&&(l=void 0),!!c},get:function(h){return n(l,h)},has:function(h){return s(l,h)},set:function(h,f){l||(l={next:void 0}),i(l,h,f)}};return u},Un}var Ln,Xa;function Vu(){return Xa||(Xa=1,Ln=Object),Ln}var Fn,ja;function Dc(){return ja||(ja=1,Fn=Error),Fn}var Mn,Va;function kc(){return Va||(Va=1,Mn=EvalError),Mn}var Bn,qa;function Hc(){return qa||(qa=1,Bn=RangeError),Bn}var Gn,za;function Xc(){return za||(za=1,Gn=ReferenceError),Gn}var Dn,Wa;function jc(){return Wa||(Wa=1,Dn=SyntaxError),Dn}var kn,$a;function Vc(){return $a||($a=1,kn=URIError),kn}var Hn,Ya;function qc(){return Ya||(Ya=1,Hn=Math.abs),Hn}var Xn,Ka;function zc(){return Ka||(Ka=1,Xn=Math.floor),Xn}var jn,Za;function Wc(){return Za||(Za=1,jn=Math.max),jn}var Vn,Ja;function $c(){return Ja||(Ja=1,Vn=Math.min),Vn}var qn,Qa;function Yc(){return Qa||(Qa=1,qn=Math.pow),qn}var zn,to;function Kc(){return to||(to=1,zn=Math.round),zn}var Wn,eo;function Zc(){return eo||(eo=1,Wn=Number.isNaN||function(r){return r!==r}),Wn}var $n,ro;function Jc(){if(ro)return $n;ro=1;var t=Zc();return $n=function(e){return t(e)||e===0?e:e<0?-1:1},$n}var Yn,no;function Qc(){return no||(no=1,Yn=Object.getOwnPropertyDescriptor),Yn}var Kn,io;function qu(){if(io)return Kn;io=1;var t=Qc();if(t)try{t([],"length")}catch{t=null}return Kn=t,Kn}var Zn,so;function tf(){if(so)return Zn;so=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return Zn=t,Zn}var Jn,ao;function ef(){return ao||(ao=1,Jn=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var r={},e=Symbol("test"),n=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;r[e]=i;for(var s in r)return!1;if(typeof Object.keys=="function"&&Object.keys(r).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(r).length!==0)return!1;var a=Object.getOwnPropertySymbols(r);if(a.length!==1||a[0]!==e||!Object.prototype.propertyIsEnumerable.call(r,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(r,e);if(o.value!==i||o.enumerable!==!0)return!1}return!0}),Jn}var Qn,oo;function rf(){if(oo)return Qn;oo=1;var t=typeof Symbol<"u"&&Symbol,r=ef();return Qn=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:r()},Qn}var ti,lo;function zu(){return lo||(lo=1,ti=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),ti}var ei,uo;function Wu(){if(uo)return ei;uo=1;var t=Vu();return ei=t.getPrototypeOf||null,ei}var ri,ho;function nf(){if(ho)return ri;ho=1;var t="Function.prototype.bind called on incompatible ",r=Object.prototype.toString,e=Math.max,n="[object Function]",i=function(l,u){for(var h=[],f=0;f<l.length;f+=1)h[f]=l[f];for(var c=0;c<u.length;c+=1)h[c+l.length]=u[c];return h},s=function(l,u){for(var h=[],f=u,c=0;f<l.length;f+=1,c+=1)h[c]=l[f];return h},a=function(o,l){for(var u="",h=0;h<o.length;h+=1)u+=o[h],h+1<o.length&&(u+=l);return u};return ri=function(l){var u=this;if(typeof u!="function"||r.apply(u)!==n)throw new TypeError(t+u);for(var h=s(arguments,1),f,c=function(){if(this instanceof f){var m=u.apply(this,i(h,arguments));return Object(m)===m?m:this}return u.apply(l,i(h,arguments))},d=e(0,u.length-h.length),v=[],_=0;_<d;_++)v[_]="$"+_;if(f=Function("binder","return function ("+a(v,",")+"){ return binder.apply(this,arguments); }")(c),u.prototype){var p=function(){};p.prototype=u.prototype,f.prototype=new p,p.prototype=null}return f},ri}var ni,co;function un(){if(co)return ni;co=1;var t=nf();return ni=Function.prototype.bind||t,ni}var ii,fo;function Xs(){return fo||(fo=1,ii=Function.prototype.call),ii}var si,po;function $u(){return po||(po=1,si=Function.prototype.apply),si}var ai,vo;function sf(){return vo||(vo=1,ai=typeof Reflect<"u"&&Reflect&&Reflect.apply),ai}var oi,_o;function af(){if(_o)return oi;_o=1;var t=un(),r=$u(),e=Xs(),n=sf();return oi=n||t.call(e,r),oi}var li,mo;function Yu(){if(mo)return li;mo=1;var t=un(),r=$e(),e=Xs(),n=af();return li=function(s){if(s.length<1||typeof s[0]!="function")throw new r("a function is required");return n(t,e,s)},li}var ui,go;function of(){if(go)return ui;go=1;var t=Yu(),r=qu(),e;try{e=[].__proto__===Array.prototype}catch(a){if(!a||typeof a!="object"||!("code"in a)||a.code!=="ERR_PROTO_ACCESS")throw a}var n=!!e&&r&&r(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return ui=n&&typeof n.get=="function"?t([n.get]):typeof s=="function"?function(o){return s(o==null?o:i(o))}:!1,ui}var hi,yo;function lf(){if(yo)return hi;yo=1;var t=zu(),r=Wu(),e=of();return hi=t?function(i){return t(i)}:r?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return r(i)}:e?function(i){return e(i)}:null,hi}var ci,bo;function uf(){if(bo)return ci;bo=1;var t=Function.prototype.call,r=Object.prototype.hasOwnProperty,e=un();return ci=e.call(t,r),ci}var fi,xo;function js(){if(xo)return fi;xo=1;var t,r=Vu(),e=Dc(),n=kc(),i=Hc(),s=Xc(),a=jc(),o=$e(),l=Vc(),u=qc(),h=zc(),f=Wc(),c=$c(),d=Yc(),v=Kc(),_=Jc(),p=Function,m=function(Y){try{return p('"use strict"; return ('+Y+").constructor;")()}catch{}},E=qu(),I=tf(),C=function(){throw new o},y=E?(function(){try{return arguments.callee,C}catch{try{return E(arguments,"callee").get}catch{return C}}})():C,w=rf()(),T=lf(),B=Wu(),U=zu(),F=$u(),k=Xs(),O={},q=typeof Uint8Array>"u"||!T?t:T(Uint8Array),W={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":w&&T?T([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":O,"%AsyncGenerator%":O,"%AsyncGeneratorFunction%":O,"%AsyncIteratorPrototype%":O,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":n,"%Float16Array%":typeof Float16Array>"u"?t:Float16Array,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":p,"%GeneratorFunction%":O,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":w&&T?T(T([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!w||!T?t:T(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":r,"%Object.getOwnPropertyDescriptor%":E,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!w||!T?t:T(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":w&&T?T(""[Symbol.iterator]()):t,"%Symbol%":w?Symbol:t,"%SyntaxError%":a,"%ThrowTypeError%":y,"%TypedArray%":q,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":l,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet,"%Function.prototype.call%":k,"%Function.prototype.apply%":F,"%Object.defineProperty%":I,"%Object.getPrototypeOf%":B,"%Math.abs%":u,"%Math.floor%":h,"%Math.max%":f,"%Math.min%":c,"%Math.pow%":d,"%Math.round%":v,"%Math.sign%":_,"%Reflect.getPrototypeOf%":U};if(T)try{null.error}catch(Y){var G=T(T(Y));W["%Error.prototype%"]=G}var g=function Y(X){var Z;if(X==="%AsyncFunction%")Z=m("async function () {}");else if(X==="%GeneratorFunction%")Z=m("function* () {}");else if(X==="%AsyncGeneratorFunction%")Z=m("async function* () {}");else if(X==="%AsyncGenerator%"){var Q=Y("%AsyncGeneratorFunction%");Q&&(Z=Q.prototype)}else if(X==="%AsyncIteratorPrototype%"){var tt=Y("%AsyncGenerator%");tt&&T&&(Z=T(tt.prototype))}return W[X]=Z,Z},b={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},x=un(),S=uf(),R=x.call(k,Array.prototype.concat),A=x.call(F,Array.prototype.splice),N=x.call(k,String.prototype.replace),P=x.call(k,String.prototype.slice),D=x.call(k,RegExp.prototype.exec),H=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,j=/\\(\\)?/g,$=function(X){var Z=P(X,0,1),Q=P(X,-1);if(Z==="%"&&Q!=="%")throw new a("invalid intrinsic syntax, expected closing `%`");if(Q==="%"&&Z!=="%")throw new a("invalid intrinsic syntax, expected opening `%`");var tt=[];return N(X,H,function(st,K,V,ct){tt[tt.length]=V?N(ct,j,"$1"):K||st}),tt},J=function(X,Z){var Q=X,tt;if(S(b,Q)&&(tt=b[Q],Q="%"+tt[0]+"%"),S(W,Q)){var st=W[Q];if(st===O&&(st=g(Q)),typeof st>"u"&&!Z)throw new o("intrinsic "+X+" exists, but is not available. Please file an issue!");return{alias:tt,name:Q,value:st}}throw new a("intrinsic "+X+" does not exist!")};return fi=function(X,Z){if(typeof X!="string"||X.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Z!="boolean")throw new o('"allowMissing" argument must be a boolean');if(D(/^%?[^%]*%?$/,X)===null)throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Q=$(X),tt=Q.length>0?Q[0]:"",st=J("%"+tt+"%",Z),K=st.name,V=st.value,ct=!1,yt=st.alias;yt&&(tt=yt[0],A(Q,R([0,1],yt)));for(var Mt=1,Bt=!0;Mt<Q.length;Mt+=1){var St=Q[Mt],$t=P(St,0,1),Yt=P(St,-1);if(($t==='"'||$t==="'"||$t==="`"||Yt==='"'||Yt==="'"||Yt==="`")&&$t!==Yt)throw new a("property names with quotes must have matching quotes");if((St==="constructor"||!Bt)&&(ct=!0),tt+="."+St,K="%"+tt+"%",S(W,K))V=W[K];else if(V!=null){if(!(St in V)){if(!Z)throw new o("base intrinsic for "+X+" exists, but the property is not available.");return}if(E&&Mt+1>=Q.length){var Oe=E(V,St);Bt=!!Oe,Bt&&"get"in Oe&&!("originalValue"in Oe.get)?V=Oe.get:V=V[St]}else Bt=S(V,St),V=V[St];Bt&&!ct&&(W[K]=V)}}return V},fi}var di,To;function Ku(){if(To)return di;To=1;var t=js(),r=Yu(),e=r([t("%String.prototype.indexOf%")]);return di=function(i,s){var a=t(i,!!s);return typeof a=="function"&&e(i,".prototype.")>-1?r([a]):a},di}var pi,Eo;function Zu(){if(Eo)return pi;Eo=1;var t=js(),r=Ku(),e=ln(),n=$e(),i=t("%Map%",!0),s=r("Map.prototype.get",!0),a=r("Map.prototype.set",!0),o=r("Map.prototype.has",!0),l=r("Map.prototype.delete",!0),u=r("Map.prototype.size",!0);return pi=!!i&&function(){var f,c={assert:function(d){if(!c.has(d))throw new n("Side channel does not contain "+e(d))},delete:function(d){if(f){var v=l(f,d);return u(f)===0&&(f=void 0),v}return!1},get:function(d){if(f)return s(f,d)},has:function(d){return f?o(f,d):!1},set:function(d,v){f||(f=new i),a(f,d,v)}};return c},pi}var vi,wo;function hf(){if(wo)return vi;wo=1;var t=js(),r=Ku(),e=ln(),n=Zu(),i=$e(),s=t("%WeakMap%",!0),a=r("WeakMap.prototype.get",!0),o=r("WeakMap.prototype.set",!0),l=r("WeakMap.prototype.has",!0),u=r("WeakMap.prototype.delete",!0);return vi=s?function(){var f,c,d={assert:function(v){if(!d.has(v))throw new i("Side channel does not contain "+e(v))},delete:function(v){if(s&&v&&(typeof v=="object"||typeof v=="function")){if(f)return u(f,v)}else if(n&&c)return c.delete(v);return!1},get:function(v){return s&&v&&(typeof v=="object"||typeof v=="function")&&f?a(f,v):c&&c.get(v)},has:function(v){return s&&v&&(typeof v=="object"||typeof v=="function")&&f?l(f,v):!!c&&c.has(v)},set:function(v,_){s&&v&&(typeof v=="object"||typeof v=="function")?(f||(f=new s),o(f,v,_)):n&&(c||(c=n()),c.set(v,_))}};return d}:n,vi}var _i,Io;function cf(){if(Io)return _i;Io=1;var t=$e(),r=ln(),e=Gc(),n=Zu(),i=hf(),s=i||n||e;return _i=function(){var o,l={assert:function(u){if(!l.has(u))throw new t("Side channel does not contain "+r(u))},delete:function(u){return!!o&&o.delete(u)},get:function(u){return o&&o.get(u)},has:function(u){return!!o&&o.has(u)},set:function(u,h){o||(o=s()),o.set(u,h)}};return l},_i}var mi,Ro;function Vs(){if(Ro)return mi;Ro=1;var t=String.prototype.replace,r=/%20/g,e={RFC1738:"RFC1738",RFC3986:"RFC3986"};return mi={default:e.RFC3986,formatters:{RFC1738:function(n){return t.call(n,r,"+")},RFC3986:function(n){return String(n)}},RFC1738:e.RFC1738,RFC3986:e.RFC3986},mi}var gi,Co;function Ju(){if(Co)return gi;Co=1;var t=Vs(),r=Object.prototype.hasOwnProperty,e=Array.isArray,n=(function(){for(var p=[],m=0;m<256;++m)p.push("%"+((m<16?"0":"")+m.toString(16)).toUpperCase());return p})(),i=function(m){for(;m.length>1;){var E=m.pop(),I=E.obj[E.prop];if(e(I)){for(var C=[],y=0;y<I.length;++y)typeof I[y]<"u"&&C.push(I[y]);E.obj[E.prop]=C}}},s=function(m,E){for(var I=E&&E.plainObjects?{__proto__:null}:{},C=0;C<m.length;++C)typeof m[C]<"u"&&(I[C]=m[C]);return I},a=function p(m,E,I){if(!E)return m;if(typeof E!="object"&&typeof E!="function"){if(e(m))m.push(E);else if(m&&typeof m=="object")(I&&(I.plainObjects||I.allowPrototypes)||!r.call(Object.prototype,E))&&(m[E]=!0);else return[m,E];return m}if(!m||typeof m!="object")return[m].concat(E);var C=m;return e(m)&&!e(E)&&(C=s(m,I)),e(m)&&e(E)?(E.forEach(function(y,w){if(r.call(m,w)){var T=m[w];T&&typeof T=="object"&&y&&typeof y=="object"?m[w]=p(T,y,I):m.push(y)}else m[w]=y}),m):Object.keys(E).reduce(function(y,w){var T=E[w];return r.call(y,w)?y[w]=p(y[w],T,I):y[w]=T,y},C)},o=function(m,E){return Object.keys(E).reduce(function(I,C){return I[C]=E[C],I},m)},l=function(p,m,E){var I=p.replace(/\+/g," ");if(E==="iso-8859-1")return I.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(I)}catch{return I}},u=1024,h=function(m,E,I,C,y){if(m.length===0)return m;var w=m;if(typeof m=="symbol"?w=Symbol.prototype.toString.call(m):typeof m!="string"&&(w=String(m)),I==="iso-8859-1")return escape(w).replace(/%u[0-9a-f]{4}/gi,function(q){return"%26%23"+parseInt(q.slice(2),16)+"%3B"});for(var T="",B=0;B<w.length;B+=u){for(var U=w.length>=u?w.slice(B,B+u):w,F=[],k=0;k<U.length;++k){var O=U.charCodeAt(k);if(O===45||O===46||O===95||O===126||O>=48&&O<=57||O>=65&&O<=90||O>=97&&O<=122||y===t.RFC1738&&(O===40||O===41)){F[F.length]=U.charAt(k);continue}if(O<128){F[F.length]=n[O];continue}if(O<2048){F[F.length]=n[192|O>>6]+n[128|O&63];continue}if(O<55296||O>=57344){F[F.length]=n[224|O>>12]+n[128|O>>6&63]+n[128|O&63];continue}k+=1,O=65536+((O&1023)<<10|U.charCodeAt(k)&1023),F[F.length]=n[240|O>>18]+n[128|O>>12&63]+n[128|O>>6&63]+n[128|O&63]}T+=F.join("")}return T},f=function(m){for(var E=[{obj:{o:m},prop:"o"}],I=[],C=0;C<E.length;++C)for(var y=E[C],w=y.obj[y.prop],T=Object.keys(w),B=0;B<T.length;++B){var U=T[B],F=w[U];typeof F=="object"&&F!==null&&I.indexOf(F)===-1&&(E.push({obj:w,prop:U}),I.push(F))}return i(E),m},c=function(m){return Object.prototype.toString.call(m)==="[object RegExp]"},d=function(m){return!m||typeof m!="object"?!1:!!(m.constructor&&m.constructor.isBuffer&&m.constructor.isBuffer(m))},v=function(m,E){return[].concat(m,E)},_=function(m,E){if(e(m)){for(var I=[],C=0;C<m.length;C+=1)I.push(E(m[C]));return I}return E(m)};return gi={arrayToObject:s,assign:o,combine:v,compact:f,decode:l,encode:h,isBuffer:d,isRegExp:c,maybeMap:_,merge:a},gi}var yi,Ao;function ff(){if(Ao)return yi;Ao=1;var t=cf(),r=Ju(),e=Vs(),n=Object.prototype.hasOwnProperty,i={brackets:function(p){return p+"[]"},comma:"comma",indices:function(p,m){return p+"["+m+"]"},repeat:function(p){return p}},s=Array.isArray,a=Array.prototype.push,o=function(_,p){a.apply(_,s(p)?p:[p])},l=Date.prototype.toISOString,u=e.default,h={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:r.encode,encodeValuesOnly:!1,filter:void 0,format:u,formatter:e.formatters[u],indices:!1,serializeDate:function(p){return l.call(p)},skipNulls:!1,strictNullHandling:!1},f=function(p){return typeof p=="string"||typeof p=="number"||typeof p=="boolean"||typeof p=="symbol"||typeof p=="bigint"},c={},d=function _(p,m,E,I,C,y,w,T,B,U,F,k,O,q,W,G,g,b){for(var x=p,S=b,R=0,A=!1;(S=S.get(c))!==void 0&&!A;){var N=S.get(p);if(R+=1,typeof N<"u"){if(N===R)throw new RangeError("Cyclic object value");A=!0}typeof S.get(c)>"u"&&(R=0)}if(typeof U=="function"?x=U(m,x):x instanceof Date?x=O(x):E==="comma"&&s(x)&&(x=r.maybeMap(x,function(K){return K instanceof Date?O(K):K})),x===null){if(y)return B&&!G?B(m,h.encoder,g,"key",q):m;x=""}if(f(x)||r.isBuffer(x)){if(B){var P=G?m:B(m,h.encoder,g,"key",q);return[W(P)+"="+W(B(x,h.encoder,g,"value",q))]}return[W(m)+"="+W(String(x))]}var D=[];if(typeof x>"u")return D;var H;if(E==="comma"&&s(x))G&&B&&(x=r.maybeMap(x,B)),H=[{value:x.length>0?x.join(",")||null:void 0}];else if(s(U))H=U;else{var j=Object.keys(x);H=F?j.sort(F):j}var $=T?String(m).replace(/\./g,"%2E"):String(m),J=I&&s(x)&&x.length===1?$+"[]":$;if(C&&s(x)&&x.length===0)return J+"[]";for(var Y=0;Y<H.length;++Y){var X=H[Y],Z=typeof X=="object"&&X&&typeof X.value<"u"?X.value:x[X];if(!(w&&Z===null)){var Q=k&&T?String(X).replace(/\./g,"%2E"):String(X),tt=s(x)?typeof E=="function"?E(J,Q):J:J+(k?"."+Q:"["+Q+"]");b.set(p,R);var st=t();st.set(c,b),o(D,_(Z,tt,E,I,C,y,w,T,E==="comma"&&G&&s(x)?null:B,U,F,k,O,q,W,G,g,st))}}return D},v=function(p){if(!p)return h;if(typeof p.allowEmptyArrays<"u"&&typeof p.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof p.encodeDotInKeys<"u"&&typeof p.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(p.encoder!==null&&typeof p.encoder<"u"&&typeof p.encoder!="function")throw new TypeError("Encoder has to be a function.");var m=p.charset||h.charset;if(typeof p.charset<"u"&&p.charset!=="utf-8"&&p.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var E=e.default;if(typeof p.format<"u"){if(!n.call(e.formatters,p.format))throw new TypeError("Unknown format option provided.");E=p.format}var I=e.formatters[E],C=h.filter;(typeof p.filter=="function"||s(p.filter))&&(C=p.filter);var y;if(p.arrayFormat in i?y=p.arrayFormat:"indices"in p?y=p.indices?"indices":"repeat":y=h.arrayFormat,"commaRoundTrip"in p&&typeof p.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var w=typeof p.allowDots>"u"?p.encodeDotInKeys===!0?!0:h.allowDots:!!p.allowDots;return{addQueryPrefix:typeof p.addQueryPrefix=="boolean"?p.addQueryPrefix:h.addQueryPrefix,allowDots:w,allowEmptyArrays:typeof p.allowEmptyArrays=="boolean"?!!p.allowEmptyArrays:h.allowEmptyArrays,arrayFormat:y,charset:m,charsetSentinel:typeof p.charsetSentinel=="boolean"?p.charsetSentinel:h.charsetSentinel,commaRoundTrip:!!p.commaRoundTrip,delimiter:typeof p.delimiter>"u"?h.delimiter:p.delimiter,encode:typeof p.encode=="boolean"?p.encode:h.encode,encodeDotInKeys:typeof p.encodeDotInKeys=="boolean"?p.encodeDotInKeys:h.encodeDotInKeys,encoder:typeof p.encoder=="function"?p.encoder:h.encoder,encodeValuesOnly:typeof p.encodeValuesOnly=="boolean"?p.encodeValuesOnly:h.encodeValuesOnly,filter:C,format:E,formatter:I,serializeDate:typeof p.serializeDate=="function"?p.serializeDate:h.serializeDate,skipNulls:typeof p.skipNulls=="boolean"?p.skipNulls:h.skipNulls,sort:typeof p.sort=="function"?p.sort:null,strictNullHandling:typeof p.strictNullHandling=="boolean"?p.strictNullHandling:h.strictNullHandling}};return yi=function(_,p){var m=_,E=v(p),I,C;typeof E.filter=="function"?(C=E.filter,m=C("",m)):s(E.filter)&&(C=E.filter,I=C);var y=[];if(typeof m!="object"||m===null)return"";var w=i[E.arrayFormat],T=w==="comma"&&E.commaRoundTrip;I||(I=Object.keys(m)),E.sort&&I.sort(E.sort);for(var B=t(),U=0;U<I.length;++U){var F=I[U],k=m[F];E.skipNulls&&k===null||o(y,d(k,F,w,T,E.allowEmptyArrays,E.strictNullHandling,E.skipNulls,E.encodeDotInKeys,E.encode?E.encoder:null,E.filter,E.sort,E.allowDots,E.serializeDate,E.format,E.formatter,E.encodeValuesOnly,E.charset,B))}var O=y.join(E.delimiter),q=E.addQueryPrefix===!0?"?":"";return E.charsetSentinel&&(E.charset==="iso-8859-1"?q+="utf8=%26%2310003%3B&":q+="utf8=%E2%9C%93&"),O.length>0?q+O:""},yi}var bi,So;function df(){if(So)return bi;So=1;var t=Ju(),r=Object.prototype.hasOwnProperty,e=Array.isArray,n={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:t.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},i=function(c){return c.replace(/&#(\d+);/g,function(d,v){return String.fromCharCode(parseInt(v,10))})},s=function(c,d,v){if(c&&typeof c=="string"&&d.comma&&c.indexOf(",")>-1)return c.split(",");if(d.throwOnLimitExceeded&&v>=d.arrayLimit)throw new RangeError("Array limit exceeded. Only "+d.arrayLimit+" element"+(d.arrayLimit===1?"":"s")+" allowed in an array.");return c},a="utf8=%26%2310003%3B",o="utf8=%E2%9C%93",l=function(d,v){var _={__proto__:null},p=v.ignoreQueryPrefix?d.replace(/^\?/,""):d;p=p.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var m=v.parameterLimit===1/0?void 0:v.parameterLimit,E=p.split(v.delimiter,v.throwOnLimitExceeded?m+1:m);if(v.throwOnLimitExceeded&&E.length>m)throw new RangeError("Parameter limit exceeded. Only "+m+" parameter"+(m===1?"":"s")+" allowed.");var I=-1,C,y=v.charset;if(v.charsetSentinel)for(C=0;C<E.length;++C)E[C].indexOf("utf8=")===0&&(E[C]===o?y="utf-8":E[C]===a&&(y="iso-8859-1"),I=C,C=E.length);for(C=0;C<E.length;++C)if(C!==I){var w=E[C],T=w.indexOf("]="),B=T===-1?w.indexOf("="):T+1,U,F;B===-1?(U=v.decoder(w,n.decoder,y,"key"),F=v.strictNullHandling?null:""):(U=v.decoder(w.slice(0,B),n.decoder,y,"key"),F=t.maybeMap(s(w.slice(B+1),v,e(_[U])?_[U].length:0),function(O){return v.decoder(O,n.decoder,y,"value")})),F&&v.interpretNumericEntities&&y==="iso-8859-1"&&(F=i(String(F))),w.indexOf("[]=")>-1&&(F=e(F)?[F]:F);var k=r.call(_,U);k&&v.duplicates==="combine"?_[U]=t.combine(_[U],F):(!k||v.duplicates==="last")&&(_[U]=F)}return _},u=function(c,d,v,_){var p=0;if(c.length>0&&c[c.length-1]==="[]"){var m=c.slice(0,-1).join("");p=Array.isArray(d)&&d[m]?d[m].length:0}for(var E=_?d:s(d,v,p),I=c.length-1;I>=0;--I){var C,y=c[I];if(y==="[]"&&v.parseArrays)C=v.allowEmptyArrays&&(E===""||v.strictNullHandling&&E===null)?[]:t.combine([],E);else{C=v.plainObjects?{__proto__:null}:{};var w=y.charAt(0)==="["&&y.charAt(y.length-1)==="]"?y.slice(1,-1):y,T=v.decodeDotInKeys?w.replace(/%2E/g,"."):w,B=parseInt(T,10);!v.parseArrays&&T===""?C={0:E}:!isNaN(B)&&y!==T&&String(B)===T&&B>=0&&v.parseArrays&&B<=v.arrayLimit?(C=[],C[B]=E):T!=="__proto__"&&(C[T]=E)}E=C}return E},h=function(d,v,_,p){if(d){var m=_.allowDots?d.replace(/\.([^.[]+)/g,"[$1]"):d,E=/(\[[^[\]]*])/,I=/(\[[^[\]]*])/g,C=_.depth>0&&E.exec(m),y=C?m.slice(0,C.index):m,w=[];if(y){if(!_.plainObjects&&r.call(Object.prototype,y)&&!_.allowPrototypes)return;w.push(y)}for(var T=0;_.depth>0&&(C=I.exec(m))!==null&&T<_.depth;){if(T+=1,!_.plainObjects&&r.call(Object.prototype,C[1].slice(1,-1))&&!_.allowPrototypes)return;w.push(C[1])}if(C){if(_.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+_.depth+" and strictDepth is true");w.push("["+m.slice(C.index)+"]")}return u(w,v,_,p)}},f=function(d){if(!d)return n;if(typeof d.allowEmptyArrays<"u"&&typeof d.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof d.decodeDotInKeys<"u"&&typeof d.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(d.decoder!==null&&typeof d.decoder<"u"&&typeof d.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof d.charset<"u"&&d.charset!=="utf-8"&&d.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof d.throwOnLimitExceeded<"u"&&typeof d.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var v=typeof d.charset>"u"?n.charset:d.charset,_=typeof d.duplicates>"u"?n.duplicates:d.duplicates;if(_!=="combine"&&_!=="first"&&_!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var p=typeof d.allowDots>"u"?d.decodeDotInKeys===!0?!0:n.allowDots:!!d.allowDots;return{allowDots:p,allowEmptyArrays:typeof d.allowEmptyArrays=="boolean"?!!d.allowEmptyArrays:n.allowEmptyArrays,allowPrototypes:typeof d.allowPrototypes=="boolean"?d.allowPrototypes:n.allowPrototypes,allowSparse:typeof d.allowSparse=="boolean"?d.allowSparse:n.allowSparse,arrayLimit:typeof d.arrayLimit=="number"?d.arrayLimit:n.arrayLimit,charset:v,charsetSentinel:typeof d.charsetSentinel=="boolean"?d.charsetSentinel:n.charsetSentinel,comma:typeof d.comma=="boolean"?d.comma:n.comma,decodeDotInKeys:typeof d.decodeDotInKeys=="boolean"?d.decodeDotInKeys:n.decodeDotInKeys,decoder:typeof d.decoder=="function"?d.decoder:n.decoder,delimiter:typeof d.delimiter=="string"||t.isRegExp(d.delimiter)?d.delimiter:n.delimiter,depth:typeof d.depth=="number"||d.depth===!1?+d.depth:n.depth,duplicates:_,ignoreQueryPrefix:d.ignoreQueryPrefix===!0,interpretNumericEntities:typeof d.interpretNumericEntities=="boolean"?d.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:typeof d.parameterLimit=="number"?d.parameterLimit:n.parameterLimit,parseArrays:d.parseArrays!==!1,plainObjects:typeof d.plainObjects=="boolean"?d.plainObjects:n.plainObjects,strictDepth:typeof d.strictDepth=="boolean"?!!d.strictDepth:n.strictDepth,strictNullHandling:typeof d.strictNullHandling=="boolean"?d.strictNullHandling:n.strictNullHandling,throwOnLimitExceeded:typeof d.throwOnLimitExceeded=="boolean"?d.throwOnLimitExceeded:!1}};return bi=function(c,d){var v=f(d);if(c===""||c===null||typeof c>"u")return v.plainObjects?{__proto__:null}:{};for(var _=typeof c=="string"?l(c,v):c,p=v.plainObjects?{__proto__:null}:{},m=Object.keys(_),E=0;E<m.length;++E){var I=m[E],C=h(I,_[I],v,typeof c=="string");p=t.merge(p,C,v)}return v.allowSparse===!0?p:t.compact(p)},bi}var xi,Po;function pf(){if(Po)return xi;Po=1;var t=ff(),r=df(),e=Vs();return xi={formats:e,parse:r,stringify:t},xi}var No;function vf(){if(No)return _e;No=1;var t=Lc();function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var e=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,s=["<",">",'"',"`"," ","\r",`
`,"	"],a=["{","}","|","\\","^","`"].concat(s),o=["'"].concat(a),l=["%","/","?",";","#"].concat(o),u=["/","?","#"],h=255,f=/^[+a-z0-9A-Z_-]{0,63}$/,c=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,d={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},p=pf();function m(y,w,T){if(y&&typeof y=="object"&&y instanceof r)return y;var B=new r;return B.parse(y,w,T),B}r.prototype.parse=function(y,w,T){if(typeof y!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof y);var B=y.indexOf("?"),U=B!==-1&&B<y.indexOf("#")?"?":"#",F=y.split(U),k=/\\/g;F[0]=F[0].replace(k,"/"),y=F.join(U);var O=y;if(O=O.trim(),!T&&y.split("#").length===1){var q=i.exec(O);if(q)return this.path=O,this.href=O,this.pathname=q[1],q[2]?(this.search=q[2],w?this.query=p.parse(this.search.substr(1)):this.query=this.search.substr(1)):w&&(this.search="",this.query={}),this}var W=e.exec(O);if(W){W=W[0];var G=W.toLowerCase();this.protocol=G,O=O.substr(W.length)}if(T||W||O.match(/^\/\/[^@/]+@[^@/]+/)){var g=O.substr(0,2)==="//";g&&!(W&&v[W])&&(O=O.substr(2),this.slashes=!0)}if(!v[W]&&(g||W&&!_[W])){for(var b=-1,x=0;x<u.length;x++){var S=O.indexOf(u[x]);S!==-1&&(b===-1||S<b)&&(b=S)}var R,A;b===-1?A=O.lastIndexOf("@"):A=O.lastIndexOf("@",b),A!==-1&&(R=O.slice(0,A),O=O.slice(A+1),this.auth=decodeURIComponent(R)),b=-1;for(var x=0;x<l.length;x++){var S=O.indexOf(l[x]);S!==-1&&(b===-1||S<b)&&(b=S)}b===-1&&(b=O.length),this.host=O.slice(0,b),O=O.slice(b),this.parseHost(),this.hostname=this.hostname||"";var N=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!N)for(var P=this.hostname.split(/\./),x=0,D=P.length;x<D;x++){var H=P[x];if(H&&!H.match(f)){for(var j="",$=0,J=H.length;$<J;$++)H.charCodeAt($)>127?j+="x":j+=H[$];if(!j.match(f)){var Y=P.slice(0,x),X=P.slice(x+1),Z=H.match(c);Z&&(Y.push(Z[1]),X.unshift(Z[2])),X.length&&(O="/"+X.join(".")+O),this.hostname=Y.join(".");break}}}this.hostname.length>h?this.hostname="":this.hostname=this.hostname.toLowerCase(),N||(this.hostname=t.toASCII(this.hostname));var Q=this.port?":"+this.port:"",tt=this.hostname||"";this.host=tt+Q,this.href+=this.host,N&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),O[0]!=="/"&&(O="/"+O))}if(!d[G])for(var x=0,D=o.length;x<D;x++){var st=o[x];if(O.indexOf(st)!==-1){var K=encodeURIComponent(st);K===st&&(K=escape(st)),O=O.split(st).join(K)}}var V=O.indexOf("#");V!==-1&&(this.hash=O.substr(V),O=O.slice(0,V));var ct=O.indexOf("?");if(ct!==-1?(this.search=O.substr(ct),this.query=O.substr(ct+1),w&&(this.query=p.parse(this.query)),O=O.slice(0,ct)):w&&(this.search="",this.query={}),O&&(this.pathname=O),_[G]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Q=this.pathname||"",yt=this.search||"";this.path=Q+yt}return this.href=this.format(),this};function E(y){return typeof y=="string"&&(y=m(y)),y instanceof r?y.format():r.prototype.format.call(y)}r.prototype.format=function(){var y=this.auth||"";y&&(y=encodeURIComponent(y),y=y.replace(/%3A/i,":"),y+="@");var w=this.protocol||"",T=this.pathname||"",B=this.hash||"",U=!1,F="";this.host?U=y+this.host:this.hostname&&(U=y+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(U+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(F=p.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var k=this.search||F&&"?"+F||"";return w&&w.substr(-1)!==":"&&(w+=":"),this.slashes||(!w||_[w])&&U!==!1?(U="//"+(U||""),T&&T.charAt(0)!=="/"&&(T="/"+T)):U||(U=""),B&&B.charAt(0)!=="#"&&(B="#"+B),k&&k.charAt(0)!=="?"&&(k="?"+k),T=T.replace(/[?#]/g,function(O){return encodeURIComponent(O)}),k=k.replace("#","%23"),w+U+T+k+B};function I(y,w){return m(y,!1,!0).resolve(w)}r.prototype.resolve=function(y){return this.resolveObject(m(y,!1,!0)).format()};function C(y,w){return y?m(y,!1,!0).resolveObject(w):w}return r.prototype.resolveObject=function(y){if(typeof y=="string"){var w=new r;w.parse(y,!1,!0),y=w}for(var T=new r,B=Object.keys(this),U=0;U<B.length;U++){var F=B[U];T[F]=this[F]}if(T.hash=y.hash,y.href==="")return T.href=T.format(),T;if(y.slashes&&!y.protocol){for(var k=Object.keys(y),O=0;O<k.length;O++){var q=k[O];q!=="protocol"&&(T[q]=y[q])}return _[T.protocol]&&T.hostname&&!T.pathname&&(T.pathname="/",T.path=T.pathname),T.href=T.format(),T}if(y.protocol&&y.protocol!==T.protocol){if(!_[y.protocol]){for(var W=Object.keys(y),G=0;G<W.length;G++){var g=W[G];T[g]=y[g]}return T.href=T.format(),T}if(T.protocol=y.protocol,!y.host&&!v[y.protocol]){for(var D=(y.pathname||"").split("/");D.length&&!(y.host=D.shift()););y.host||(y.host=""),y.hostname||(y.hostname=""),D[0]!==""&&D.unshift(""),D.length<2&&D.unshift(""),T.pathname=D.join("/")}else T.pathname=y.pathname;if(T.search=y.search,T.query=y.query,T.host=y.host||"",T.auth=y.auth,T.hostname=y.hostname||y.host,T.port=y.port,T.pathname||T.search){var b=T.pathname||"",x=T.search||"";T.path=b+x}return T.slashes=T.slashes||y.slashes,T.href=T.format(),T}var S=T.pathname&&T.pathname.charAt(0)==="/",R=y.host||y.pathname&&y.pathname.charAt(0)==="/",A=R||S||T.host&&y.pathname,N=A,P=T.pathname&&T.pathname.split("/")||[],D=y.pathname&&y.pathname.split("/")||[],H=T.protocol&&!_[T.protocol];if(H&&(T.hostname="",T.port=null,T.host&&(P[0]===""?P[0]=T.host:P.unshift(T.host)),T.host="",y.protocol&&(y.hostname=null,y.port=null,y.host&&(D[0]===""?D[0]=y.host:D.unshift(y.host)),y.host=null),A=A&&(D[0]===""||P[0]==="")),R)T.host=y.host||y.host===""?y.host:T.host,T.hostname=y.hostname||y.hostname===""?y.hostname:T.hostname,T.search=y.search,T.query=y.query,P=D;else if(D.length)P||(P=[]),P.pop(),P=P.concat(D),T.search=y.search,T.query=y.query;else if(y.search!=null){if(H){T.host=P.shift(),T.hostname=T.host;var j=T.host&&T.host.indexOf("@")>0?T.host.split("@"):!1;j&&(T.auth=j.shift(),T.hostname=j.shift(),T.host=T.hostname)}return T.search=y.search,T.query=y.query,(T.pathname!==null||T.search!==null)&&(T.path=(T.pathname?T.pathname:"")+(T.search?T.search:"")),T.href=T.format(),T}if(!P.length)return T.pathname=null,T.search?T.path="/"+T.search:T.path=null,T.href=T.format(),T;for(var $=P.slice(-1)[0],J=(T.host||y.host||P.length>1)&&($==="."||$==="..")||$==="",Y=0,X=P.length;X>=0;X--)$=P[X],$==="."?P.splice(X,1):$===".."?(P.splice(X,1),Y++):Y&&(P.splice(X,1),Y--);if(!A&&!N)for(;Y--;Y)P.unshift("..");A&&P[0]!==""&&(!P[0]||P[0].charAt(0)!=="/")&&P.unshift(""),J&&P.join("/").substr(-1)!=="/"&&P.push("");var Z=P[0]===""||P[0]&&P[0].charAt(0)==="/";if(H){T.hostname=Z?"":P.length?P.shift():"",T.host=T.hostname;var j=T.host&&T.host.indexOf("@")>0?T.host.split("@"):!1;j&&(T.auth=j.shift(),T.hostname=j.shift(),T.host=T.hostname)}return A=A||T.host&&P.length,A&&!Z&&P.unshift(""),P.length>0?T.pathname=P.join("/"):(T.pathname=null,T.path=null),(T.pathname!==null||T.search!==null)&&(T.path=(T.pathname?T.pathname:"")+(T.search?T.search:"")),T.auth=y.auth||T.auth,T.slashes=T.slashes||y.slashes,T.href=T.format(),T},r.prototype.parseHost=function(){var y=this.host,w=n.exec(y);w&&(w=w[0],w!==":"&&(this.port=w.substr(1)),y=y.substr(0,y.length-w.length)),y&&(this.hostname=y)},_e.parse=m,_e.resolve=I,_e.resolveObject=C,_e.format=E,_e.Url=r,_e}var Ti=vf();var ee;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(ee||(ee={}));var cr;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(cr||(cr={}));var Zr;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(Zr||(Zr={}));var rt;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(rt||(rt={}));var Xt;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Xt||(Xt={}));var z;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(z||(z={}));var Re;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Re||(Re={}));var it;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(it||(it={}));var Jr;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(Jr||(Jr={}));var Ot;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(Ot||(Ot={}));var Ut;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Ut||(Ut={}));var ce;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(ce||(ce={}));var zt;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(zt||(zt={}));var oe;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(oe||(oe={}));var ls;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(ls||(ls={}));var Vt;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(Vt||(Vt={}));var Ct;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"})(Ct||(Ct={}));var wt;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(wt||(wt={}));var qt;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(qt||(qt={}));var He={parse:Ti.parse,format:Ti.format,resolve:Ti.resolve};et.RETINA_PREFIX=/@([0-9\.]+)x/;et.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Oo=!1,Uo="6.2.0";function _f(t){var r;if(!Oo){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=[`
 %c %c %c PixiJS `+Uo+" - ✰ "+t+` ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(r=self.console).log.apply(r,e)}else self.console&&self.console.log("PixiJS "+Uo+" - "+t+" - http://www.pixijs.com/");Oo=!0}}var Ei;function mf(){return typeof Ei>"u"&&(Ei=(function(){var r={stencil:!0,failIfMajorPerformanceCaveat:et.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),n=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),i=!!(n&&n.getContextAttributes().stencil);if(n){var s=n.getExtension("WEBGL_lose_context");s&&s.loseContext()}return n=null,i}catch{return!1}})()),Ei}var gf="#f0f8ff",yf="#faebd7",bf="#00ffff",xf="#7fffd4",Tf="#f0ffff",Ef="#f5f5dc",wf="#ffe4c4",If="#000000",Rf="#ffebcd",Cf="#0000ff",Af="#8a2be2",Sf="#a52a2a",Pf="#deb887",Nf="#5f9ea0",Of="#7fff00",Uf="#d2691e",Lf="#ff7f50",Ff="#6495ed",Mf="#fff8dc",Bf="#dc143c",Gf="#00ffff",Df="#00008b",kf="#008b8b",Hf="#b8860b",Xf="#a9a9a9",jf="#006400",Vf="#a9a9a9",qf="#bdb76b",zf="#8b008b",Wf="#556b2f",$f="#ff8c00",Yf="#9932cc",Kf="#8b0000",Zf="#e9967a",Jf="#8fbc8f",Qf="#483d8b",td="#2f4f4f",ed="#2f4f4f",rd="#00ced1",nd="#9400d3",id="#ff1493",sd="#00bfff",ad="#696969",od="#696969",ld="#1e90ff",ud="#b22222",hd="#fffaf0",cd="#228b22",fd="#ff00ff",dd="#dcdcdc",pd="#f8f8ff",vd="#daa520",_d="#ffd700",md="#808080",gd="#008000",yd="#adff2f",bd="#808080",xd="#f0fff0",Td="#ff69b4",Ed="#cd5c5c",wd="#4b0082",Id="#fffff0",Rd="#f0e68c",Cd="#fff0f5",Ad="#e6e6fa",Sd="#7cfc00",Pd="#fffacd",Nd="#add8e6",Od="#f08080",Ud="#e0ffff",Ld="#fafad2",Fd="#d3d3d3",Md="#90ee90",Bd="#d3d3d3",Gd="#ffb6c1",Dd="#ffa07a",kd="#20b2aa",Hd="#87cefa",Xd="#778899",jd="#778899",Vd="#b0c4de",qd="#ffffe0",zd="#00ff00",Wd="#32cd32",$d="#faf0e6",Yd="#ff00ff",Kd="#800000",Zd="#66cdaa",Jd="#0000cd",Qd="#ba55d3",tp="#9370db",ep="#3cb371",rp="#7b68ee",np="#00fa9a",ip="#48d1cc",sp="#c71585",ap="#191970",op="#f5fffa",lp="#ffe4e1",up="#ffe4b5",hp="#ffdead",cp="#000080",fp="#fdf5e6",dp="#808000",pp="#6b8e23",vp="#ffa500",_p="#ff4500",mp="#da70d6",gp="#eee8aa",yp="#98fb98",bp="#afeeee",xp="#db7093",Tp="#ffefd5",Ep="#ffdab9",wp="#cd853f",Ip="#ffc0cb",Rp="#dda0dd",Cp="#b0e0e6",Ap="#800080",Sp="#663399",Pp="#ff0000",Np="#bc8f8f",Op="#4169e1",Up="#8b4513",Lp="#fa8072",Fp="#f4a460",Mp="#2e8b57",Bp="#fff5ee",Gp="#a0522d",Dp="#c0c0c0",kp="#87ceeb",Hp="#6a5acd",Xp="#708090",jp="#708090",Vp="#fffafa",qp="#00ff7f",zp="#4682b4",Wp="#d2b48c",$p="#008080",Yp="#d8bfd8",Kp="#ff6347",Zp="#40e0d0",Jp="#ee82ee",Qp="#f5deb3",tv="#ffffff",ev="#f5f5f5",rv="#ffff00",nv="#9acd32",iv={aliceblue:gf,antiquewhite:yf,aqua:bf,aquamarine:xf,azure:Tf,beige:Ef,bisque:wf,black:If,blanchedalmond:Rf,blue:Cf,blueviolet:Af,brown:Sf,burlywood:Pf,cadetblue:Nf,chartreuse:Of,chocolate:Uf,coral:Lf,cornflowerblue:Ff,cornsilk:Mf,crimson:Bf,cyan:Gf,darkblue:Df,darkcyan:kf,darkgoldenrod:Hf,darkgray:Xf,darkgreen:jf,darkgrey:Vf,darkkhaki:qf,darkmagenta:zf,darkolivegreen:Wf,darkorange:$f,darkorchid:Yf,darkred:Kf,darksalmon:Zf,darkseagreen:Jf,darkslateblue:Qf,darkslategray:td,darkslategrey:ed,darkturquoise:rd,darkviolet:nd,deeppink:id,deepskyblue:sd,dimgray:ad,dimgrey:od,dodgerblue:ld,firebrick:ud,floralwhite:hd,forestgreen:cd,fuchsia:fd,gainsboro:dd,ghostwhite:pd,goldenrod:vd,gold:_d,gray:md,green:gd,greenyellow:yd,grey:bd,honeydew:xd,hotpink:Td,indianred:Ed,indigo:wd,ivory:Id,khaki:Rd,lavenderblush:Cd,lavender:Ad,lawngreen:Sd,lemonchiffon:Pd,lightblue:Nd,lightcoral:Od,lightcyan:Ud,lightgoldenrodyellow:Ld,lightgray:Fd,lightgreen:Md,lightgrey:Bd,lightpink:Gd,lightsalmon:Dd,lightseagreen:kd,lightskyblue:Hd,lightslategray:Xd,lightslategrey:jd,lightsteelblue:Vd,lightyellow:qd,lime:zd,limegreen:Wd,linen:$d,magenta:Yd,maroon:Kd,mediumaquamarine:Zd,mediumblue:Jd,mediumorchid:Qd,mediumpurple:tp,mediumseagreen:ep,mediumslateblue:rp,mediumspringgreen:np,mediumturquoise:ip,mediumvioletred:sp,midnightblue:ap,mintcream:op,mistyrose:lp,moccasin:up,navajowhite:hp,navy:cp,oldlace:fp,olive:dp,olivedrab:pp,orange:vp,orangered:_p,orchid:mp,palegoldenrod:gp,palegreen:yp,paleturquoise:bp,palevioletred:xp,papayawhip:Tp,peachpuff:Ep,peru:wp,pink:Ip,plum:Rp,powderblue:Cp,purple:Ap,rebeccapurple:Sp,red:Pp,rosybrown:Np,royalblue:Op,saddlebrown:Up,salmon:Lp,sandybrown:Fp,seagreen:Mp,seashell:Bp,sienna:Gp,silver:Dp,skyblue:kp,slateblue:Hp,slategray:Xp,slategrey:jp,snow:Vp,springgreen:qp,steelblue:zp,tan:Wp,teal:$p,thistle:Yp,tomato:Kp,turquoise:Zp,violet:Jp,wheat:Qp,white:tv,whitesmoke:ev,yellow:rv,yellowgreen:nv};function ze(t,r){return r===void 0&&(r=[]),r[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(t&255)/255,r}function Qu(t){var r=t.toString(16);return r="000000".substr(0,6-r.length)+r,"#"+r}function Qr(t){return typeof t=="string"&&(t=iv[t.toLowerCase()]||t,t[0]==="#"&&(t=t.substr(1))),parseInt(t,16)}function sv(){for(var t=[],r=[],e=0;e<32;e++)t[e]=e,r[e]=e;t[rt.NORMAL_NPM]=rt.NORMAL,t[rt.ADD_NPM]=rt.ADD,t[rt.SCREEN_NPM]=rt.SCREEN,r[rt.NORMAL]=rt.NORMAL_NPM,r[rt.ADD]=rt.ADD_NPM,r[rt.SCREEN]=rt.SCREEN_NPM;var n=[];return n.push(r),n.push(t),n}var th=sv();function eh(t,r){return th[r?1:0][t]}function av(t,r,e,n){return e=e||new Float32Array(4),n||n===void 0?(e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r):(e[0]=t[0],e[1]=t[1],e[2]=t[2]),e[3]=r,e}function qs(t,r){if(r===1)return(r*255<<24)+t;if(r===0)return 0;var e=t>>16&255,n=t>>8&255,i=t&255;return e=e*r+.5|0,n=n*r+.5|0,i=i*r+.5|0,(r*255<<24)+(e<<16)+(n<<8)+i}function rh(t,r,e,n){return e=e||new Float32Array(4),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(t&255)/255,(n||n===void 0)&&(e[0]*=r,e[1]*=r,e[2]*=r),e[3]=r,e}function ov(t,r){r===void 0&&(r=null);var e=t*6;if(r=r||new Uint16Array(e),r.length!==e)throw new Error("Out buffer length is incorrect, got "+r.length+" and expected "+e);for(var n=0,i=0;n<e;n+=6,i+=4)r[n+0]=i+0,r[n+1]=i+1,r[n+2]=i+2,r[n+3]=i+0,r[n+4]=i+2,r[n+5]=i+3;return r}function nh(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}function tn(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function Lo(t){return!(t&t-1)&&!!t}function Fo(t){var r=(t>65535?1:0)<<4;t>>>=r;var e=(t>255?1:0)<<3;return t>>>=e,r|=e,e=(t>15?1:0)<<2,t>>>=e,r|=e,e=(t>3?1:0)<<1,t>>>=e,r|=e,r|t>>1}function Ve(t,r,e){var n=t.length,i;if(!(r>=n||e===0)){e=r+e>n?n-r:e;var s=n-e;for(i=r;i<s;++i)t[i]=t[i+e];t.length=s}}function Xe(t){return t===0?0:t<0?-1:1}var lv=0;function Se(){return++lv}var Mo={};function fr(t,r,e){if(e===void 0&&(e=3),!Mo[r]){var n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",r+`
Deprecated since v`+t):(n=n.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",r+`
Deprecated since v`+t),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",r+`
Deprecated since v`+t),console.warn(n))),Mo[r]=!0}}var Bo={},Zt=Object.create(null),me=Object.create(null),Go=(function(){function t(r,e,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||et.RESOLUTION,this.resize(r,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(r,e){this.canvas.width=Math.round(r*this.resolution),this.canvas.height=Math.round(e*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(r){this.canvas.width=Math.round(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(r){this.canvas.height=Math.round(r)},enumerable:!1,configurable:!0}),t})();function uv(t){var r=t.width,e=t.height,n=t.getContext("2d"),i=n.getImageData(0,0,r,e),s=i.data,a=s.length,o={top:null,left:null,right:null,bottom:null},l=null,u,h,f;for(u=0;u<a;u+=4)s[u+3]!==0&&(h=u/4%r,f=~~(u/4/r),o.top===null&&(o.top=f),(o.left===null||h<o.left)&&(o.left=h),(o.right===null||o.right<h)&&(o.right=h+1),(o.bottom===null||o.bottom<f)&&(o.bottom=f));return o.top!==null&&(r=o.right-o.left,e=o.bottom-o.top+1,l=n.getImageData(o.left,o.top,r,e)),{height:e,width:r,data:l}}var Cr;function hv(t,r){if(r===void 0&&(r=self.location),t.indexOf("data:")===0)return"";r=r||self.location,Cr||(Cr=document.createElement("a")),Cr.href=t;var e=He.parse(Cr.href),n=!e.port&&r.port===""||e.port===r.port;return e.hostname!==r.hostname||!n||e.protocol!==r.protocol?"anonymous":""}function en(t,r){var e=et.RETINA_PREFIX.exec(t);return e?parseFloat(e[1]):r!==void 0?r:1}var rn=Math.PI*2,cv=180/Math.PI,fv=Math.PI/180,bt;(function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"})(bt||(bt={}));var ut=(function(){function t(r,e,n,i){r===void 0&&(r=0),e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=Number(r),this.y=Number(e),this.width=Number(n),this.height=Number(i),this.type=bt.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(r){return this.x=r.x,this.y=r.y,this.width=r.width,this.height=r.height,this},t.prototype.copyTo=function(r){return r.x=this.x,r.y=this.y,r.width=this.width,r.height=this.height,r},t.prototype.contains=function(r,e){return this.width<=0||this.height<=0?!1:r>=this.x&&r<this.x+this.width&&e>=this.y&&e<this.y+this.height},t.prototype.pad=function(r,e){return r===void 0&&(r=0),e===void 0&&(e=r),this.x-=r,this.y-=e,this.width+=r*2,this.height+=e*2,this},t.prototype.fit=function(r){var e=Math.max(this.x,r.x),n=Math.min(this.x+this.width,r.x+r.width),i=Math.max(this.y,r.y),s=Math.min(this.y+this.height,r.y+r.height);return this.x=e,this.width=Math.max(n-e,0),this.y=i,this.height=Math.max(s-i,0),this},t.prototype.ceil=function(r,e){r===void 0&&(r=1),e===void 0&&(e=.001);var n=Math.ceil((this.x+this.width-e)*r)/r,i=Math.ceil((this.y+this.height-e)*r)/r;return this.x=Math.floor((this.x+e)*r)/r,this.y=Math.floor((this.y+e)*r)/r,this.width=n-this.x,this.height=i-this.y,this},t.prototype.enlarge=function(r){var e=Math.min(this.x,r.x),n=Math.max(this.x+this.width,r.x+r.width),i=Math.min(this.y,r.y),s=Math.max(this.y+this.height,r.y+r.height);return this.x=e,this.width=n-e,this.y=i,this.height=s-i,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t})(),dv=(function(){function t(r,e,n){r===void 0&&(r=0),e===void 0&&(e=0),n===void 0&&(n=0),this.x=r,this.y=e,this.radius=n,this.type=bt.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(r,e){if(this.radius<=0)return!1;var n=this.radius*this.radius,i=this.x-r,s=this.y-e;return i*=i,s*=s,i+s<=n},t.prototype.getBounds=function(){return new ut(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},t})(),pv=(function(){function t(r,e,n,i){r===void 0&&(r=0),e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=r,this.y=e,this.width=n,this.height=i,this.type=bt.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(r,e){if(this.width<=0||this.height<=0)return!1;var n=(r-this.x)/this.width,i=(e-this.y)/this.height;return n*=n,i*=i,n+i<=1},t.prototype.getBounds=function(){return new ut(this.x-this.width,this.y-this.height,this.width,this.height)},t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t})(),$r=(function(){function t(){for(var r=arguments,e=[],n=0;n<arguments.length;n++)e[n]=r[n];var i=Array.isArray(e[0])?e[0]:e;if(typeof i[0]!="number"){for(var s=[],a=0,o=i.length;a<o;a++)s.push(i[a].x,i[a].y);i=s}this.points=i,this.type=bt.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var r=this.points.slice(),e=new t(r);return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(r,e){for(var n=!1,i=this.points.length/2,s=0,a=i-1;s<i;a=s++){var o=this.points[s*2],l=this.points[s*2+1],u=this.points[a*2],h=this.points[a*2+1],f=l>e!=h>e&&r<(u-o)*((e-l)/(h-l))+o;f&&(n=!n)}return n},t.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(r,e){return r+", "+e},"")+"]")},t})(),vv=(function(){function t(r,e,n,i,s){r===void 0&&(r=0),e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=0),s===void 0&&(s=20),this.x=r,this.y=e,this.width=n,this.height=i,this.radius=s,this.type=bt.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(r,e){if(this.width<=0||this.height<=0)return!1;if(r>=this.x&&r<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||r>=this.x+this.radius&&r<=this.x+this.width-this.radius)return!0;var n=r-(this.x+this.radius),i=e-(this.y+this.radius),s=this.radius*this.radius;if(n*n+i*i<=s||(n=r-(this.x+this.width-this.radius),n*n+i*i<=s)||(i=e-(this.y+this.height-this.radius),n*n+i*i<=s)||(n=r-(this.x+this.radius),n*n+i*i<=s))return!0}return!1},t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},t})(),xt=(function(){function t(r,e){r===void 0&&(r=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=r,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(r){return this.set(r.x,r.y),this},t.prototype.copyTo=function(r){return r.set(this.x,this.y),r},t.prototype.equals=function(r){return r.x===this.x&&r.y===this.y},t.prototype.set=function(r,e){return r===void 0&&(r=0),e===void 0&&(e=r),this.x=r,this.y=e,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t})(),je=(function(){function t(r,e,n,i){n===void 0&&(n=0),i===void 0&&(i=0),this._x=n,this._y=i,this.cb=r,this.scope=e}return t.prototype.clone=function(r,e){return r===void 0&&(r=this.cb),e===void 0&&(e=this.scope),new t(r,e,this._x,this._y)},t.prototype.set=function(r,e){return r===void 0&&(r=0),e===void 0&&(e=r),(this._x!==r||this._y!==e)&&(this._x=r,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(r){return(this._x!==r.x||this._y!==r.y)&&(this._x=r.x,this._y=r.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(r){return r.set(this._x,this._y),r},t.prototype.equals=function(r){return r.x===this._x&&r.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(r){this._x!==r&&(this._x=r,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(r){this._y!==r&&(this._y=r,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t})(),Tt=(function(){function t(r,e,n,i,s,a){r===void 0&&(r=1),e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=r,this.b=e,this.c=n,this.d=i,this.tx=s,this.ty=a}return t.prototype.fromArray=function(r){this.a=r[0],this.b=r[1],this.c=r[3],this.d=r[4],this.tx=r[2],this.ty=r[5]},t.prototype.set=function(r,e,n,i,s,a){return this.a=r,this.b=e,this.c=n,this.d=i,this.tx=s,this.ty=a,this},t.prototype.toArray=function(r,e){this.array||(this.array=new Float32Array(9));var n=e||this.array;return r?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},t.prototype.apply=function(r,e){e=e||new xt;var n=r.x,i=r.y;return e.x=this.a*n+this.c*i+this.tx,e.y=this.b*n+this.d*i+this.ty,e},t.prototype.applyInverse=function(r,e){e=e||new xt;var n=1/(this.a*this.d+this.c*-this.b),i=r.x,s=r.y;return e.x=this.d*n*i+-this.c*n*s+(this.ty*this.c-this.tx*this.d)*n,e.y=this.a*n*s+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,e},t.prototype.translate=function(r,e){return this.tx+=r,this.ty+=e,this},t.prototype.scale=function(r,e){return this.a*=r,this.d*=e,this.c*=r,this.b*=e,this.tx*=r,this.ty*=e,this},t.prototype.rotate=function(r){var e=Math.cos(r),n=Math.sin(r),i=this.a,s=this.c,a=this.tx;return this.a=i*e-this.b*n,this.b=i*n+this.b*e,this.c=s*e-this.d*n,this.d=s*n+this.d*e,this.tx=a*e-this.ty*n,this.ty=a*n+this.ty*e,this},t.prototype.append=function(r){var e=this.a,n=this.b,i=this.c,s=this.d;return this.a=r.a*e+r.b*i,this.b=r.a*n+r.b*s,this.c=r.c*e+r.d*i,this.d=r.c*n+r.d*s,this.tx=r.tx*e+r.ty*i+this.tx,this.ty=r.tx*n+r.ty*s+this.ty,this},t.prototype.setTransform=function(r,e,n,i,s,a,o,l,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-l)*a,this.d=Math.cos(o-l)*a,this.tx=r-(n*this.a+i*this.c),this.ty=e-(n*this.b+i*this.d),this},t.prototype.prepend=function(r){var e=this.tx;if(r.a!==1||r.b!==0||r.c!==0||r.d!==1){var n=this.a,i=this.c;this.a=n*r.a+this.b*r.c,this.b=n*r.b+this.b*r.d,this.c=i*r.a+this.d*r.c,this.d=i*r.b+this.d*r.d}return this.tx=e*r.a+this.ty*r.c+r.tx,this.ty=e*r.b+this.ty*r.d+r.ty,this},t.prototype.decompose=function(r){var e=this.a,n=this.b,i=this.c,s=this.d,a=r.pivot,o=-Math.atan2(-i,s),l=Math.atan2(n,e),u=Math.abs(o+l);return u<1e-5||Math.abs(rn-u)<1e-5?(r.rotation=l,r.skew.x=r.skew.y=0):(r.rotation=0,r.skew.x=o,r.skew.y=l),r.scale.x=Math.sqrt(e*e+n*n),r.scale.y=Math.sqrt(i*i+s*s),r.position.x=this.tx+(a.x*e+a.y*i),r.position.y=this.ty+(a.x*n+a.y*s),r},t.prototype.invert=function(){var r=this.a,e=this.b,n=this.c,i=this.d,s=this.tx,a=r*i-e*n;return this.a=i/a,this.b=-e/a,this.c=-n/a,this.d=r/a,this.tx=(n*this.ty-i*s)/a,this.ty=-(r*this.ty-e*s)/a,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var r=new t;return r.a=this.a,r.b=this.b,r.c=this.c,r.d=this.d,r.tx=this.tx,r.ty=this.ty,r},t.prototype.copyTo=function(r){return r.a=this.a,r.b=this.b,r.c=this.c,r.d=this.d,r.tx=this.tx,r.ty=this.ty,r},t.prototype.copyFrom=function(r){return this.a=r.a,this.b=r.b,this.c=r.c,this.d=r.d,this.tx=r.tx,this.ty=r.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t})(),Te=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ee=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],we=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ie=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],us=[],ih=[],Ar=Math.sign;function _v(){for(var t=0;t<16;t++){var r=[];us.push(r);for(var e=0;e<16;e++)for(var n=Ar(Te[t]*Te[e]+we[t]*Ee[e]),i=Ar(Ee[t]*Te[e]+Ie[t]*Ee[e]),s=Ar(Te[t]*we[e]+we[t]*Ie[e]),a=Ar(Ee[t]*we[e]+Ie[t]*Ie[e]),o=0;o<16;o++)if(Te[o]===n&&Ee[o]===i&&we[o]===s&&Ie[o]===a){r.push(o);break}}for(var t=0;t<16;t++){var l=new Tt;l.set(Te[t],Ee[t],we[t],Ie[t],0,0),ih.push(l)}}_v();var _t={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return Te[t]},uY:function(t){return Ee[t]},vX:function(t){return we[t]},vY:function(t){return Ie[t]},inv:function(t){return t&8?t&15:-t&7},add:function(t,r){return us[t][r]},sub:function(t,r){return us[t][_t.inv(r)]},rotate180:function(t){return t^4},isVertical:function(t){return(t&3)===2},byDirection:function(t,r){return Math.abs(t)*2<=Math.abs(r)?r>=0?_t.S:_t.N:Math.abs(r)*2<=Math.abs(t)?t>0?_t.E:_t.W:r>0?t>0?_t.SE:_t.SW:t>0?_t.NE:_t.NW},matrixAppendRotationInv:function(t,r,e,n){e===void 0&&(e=0),n===void 0&&(n=0);var i=ih[_t.inv(r)];i.tx=e,i.ty=n,t.append(i)}},sh=(function(){function t(){this.worldTransform=new Tt,this.localTransform=new Tt,this.position=new je(this.onChange,this,0,0),this.scale=new je(this.onChange,this,1,1),this.pivot=new je(this.onChange,this,0,0),this.skew=new je(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},t.prototype.updateLocalTransform=function(){var r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(r){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){var n=r.worldTransform,i=this.worldTransform;i.a=e.a*n.a+e.b*n.c,i.b=e.a*n.b+e.b*n.d,i.c=e.c*n.a+e.d*n.c,i.d=e.c*n.b+e.d*n.d,i.tx=e.tx*n.a+e.ty*n.c+n.tx,i.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=r._worldID,this._worldID++}},t.prototype.setFromMatrix=function(r){r.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t})();et.SORTABLE_CHILDREN=!1;var nn=(function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(r){return this.minX>this.maxX||this.minY>this.maxY?ut.EMPTY:(r=r||new ut(0,0,1,1),r.x=this.minX,r.y=this.minY,r.width=this.maxX-this.minX,r.height=this.maxY-this.minY,r)},t.prototype.addPoint=function(r){this.minX=Math.min(this.minX,r.x),this.maxX=Math.max(this.maxX,r.x),this.minY=Math.min(this.minY,r.y),this.maxY=Math.max(this.maxY,r.y)},t.prototype.addPointMatrix=function(r,e){var n=r.a,i=r.b,s=r.c,a=r.d,o=r.tx,l=r.ty,u=n*e.x+s*e.y+o,h=i*e.x+a*e.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)},t.prototype.addQuad=function(r){var e=this.minX,n=this.minY,i=this.maxX,s=this.maxY,a=r[0],o=r[1];e=a<e?a:e,n=o<n?o:n,i=a>i?a:i,s=o>s?o:s,a=r[2],o=r[3],e=a<e?a:e,n=o<n?o:n,i=a>i?a:i,s=o>s?o:s,a=r[4],o=r[5],e=a<e?a:e,n=o<n?o:n,i=a>i?a:i,s=o>s?o:s,a=r[6],o=r[7],e=a<e?a:e,n=o<n?o:n,i=a>i?a:i,s=o>s?o:s,this.minX=e,this.minY=n,this.maxX=i,this.maxY=s},t.prototype.addFrame=function(r,e,n,i,s){this.addFrameMatrix(r.worldTransform,e,n,i,s)},t.prototype.addFrameMatrix=function(r,e,n,i,s){var a=r.a,o=r.b,l=r.c,u=r.d,h=r.tx,f=r.ty,c=this.minX,d=this.minY,v=this.maxX,_=this.maxY,p=a*e+l*n+h,m=o*e+u*n+f;c=p<c?p:c,d=m<d?m:d,v=p>v?p:v,_=m>_?m:_,p=a*i+l*n+h,m=o*i+u*n+f,c=p<c?p:c,d=m<d?m:d,v=p>v?p:v,_=m>_?m:_,p=a*e+l*s+h,m=o*e+u*s+f,c=p<c?p:c,d=m<d?m:d,v=p>v?p:v,_=m>_?m:_,p=a*i+l*s+h,m=o*i+u*s+f,c=p<c?p:c,d=m<d?m:d,v=p>v?p:v,_=m>_?m:_,this.minX=c,this.minY=d,this.maxX=v,this.maxY=_},t.prototype.addVertexData=function(r,e,n){for(var i=this.minX,s=this.minY,a=this.maxX,o=this.maxY,l=e;l<n;l+=2){var u=r[l],h=r[l+1];i=u<i?u:i,s=h<s?h:s,a=u>a?u:a,o=h>o?h:o}this.minX=i,this.minY=s,this.maxX=a,this.maxY=o},t.prototype.addVertices=function(r,e,n,i){this.addVerticesMatrix(r.worldTransform,e,n,i)},t.prototype.addVerticesMatrix=function(r,e,n,i,s,a){s===void 0&&(s=0),a===void 0&&(a=s);for(var o=r.a,l=r.b,u=r.c,h=r.d,f=r.tx,c=r.ty,d=this.minX,v=this.minY,_=this.maxX,p=this.maxY,m=n;m<i;m+=2){var E=e[m],I=e[m+1],C=o*E+u*I+f,y=h*I+l*E+c;d=Math.min(d,C-s),_=Math.max(_,C+s),v=Math.min(v,y-a),p=Math.max(p,y+a)}this.minX=d,this.minY=v,this.maxX=_,this.maxY=p},t.prototype.addBounds=function(r){var e=this.minX,n=this.minY,i=this.maxX,s=this.maxY;this.minX=r.minX<e?r.minX:e,this.minY=r.minY<n?r.minY:n,this.maxX=r.maxX>i?r.maxX:i,this.maxY=r.maxY>s?r.maxY:s},t.prototype.addBoundsMask=function(r,e){var n=r.minX>e.minX?r.minX:e.minX,i=r.minY>e.minY?r.minY:e.minY,s=r.maxX<e.maxX?r.maxX:e.maxX,a=r.maxY<e.maxY?r.maxY:e.maxY;if(n<=s&&i<=a){var o=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=n<o?n:o,this.minY=i<l?i:l,this.maxX=s>u?s:u,this.maxY=a>h?a:h}},t.prototype.addBoundsMatrix=function(r,e){this.addFrameMatrix(e,r.minX,r.minY,r.maxX,r.maxY)},t.prototype.addBoundsArea=function(r,e){var n=r.minX>e.x?r.minX:e.x,i=r.minY>e.y?r.minY:e.y,s=r.maxX<e.x+e.width?r.maxX:e.x+e.width,a=r.maxY<e.y+e.height?r.maxY:e.y+e.height;if(n<=s&&i<=a){var o=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=n<o?n:o,this.minY=i<l?i:l,this.maxX=s>u?s:u,this.maxY=a>h?a:h}},t.prototype.pad=function(r,e){r===void 0&&(r=0),e===void 0&&(e=r),this.isEmpty()||(this.minX-=r,this.maxX+=r,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(r,e,n,i,s,a){r-=s,e-=a,n+=s,i+=a,this.minX=this.minX<r?this.minX:r,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>i?this.maxY:i},t})();var hs=function(t,r){return hs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},hs(t,r)};function zs(t,r){hs(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Et=(function(t){zs(r,t);function r(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new sh,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new nn,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._maskRefCount=0,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return r.mixin=function(e){for(var n=Object.keys(e),i=0;i<n.length;++i){var s=n[i];Object.defineProperty(r.prototype,s,Object.getOwnPropertyDescriptor(e,s))}},Object.defineProperty(r.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),r.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},r.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},r.prototype.getBounds=function(e,n){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new ut),n=this._boundsRect),this._bounds.getRectangle(n)},r.prototype.getLocalBounds=function(e){e||(this._localBoundsRect||(this._localBoundsRect=new ut),e=this._localBoundsRect),this._localBounds||(this._localBounds=new nn);var n=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var s=this._bounds,a=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,e);return this.parent=i,this.transform=n,this._bounds=s,this._bounds.updateID+=this._boundsID-a,o},r.prototype.toGlobal=function(e,n,i){return i===void 0&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,n)},r.prototype.toLocal=function(e,n,i,s){return n&&(e=n.toGlobal(e,i,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,i)},r.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},r.prototype.setTransform=function(e,n,i,s,a,o,l,u,h){return e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=1),s===void 0&&(s=1),a===void 0&&(a=0),o===void 0&&(o=0),l===void 0&&(l=0),u===void 0&&(u=0),h===void 0&&(h=0),this.position.x=e,this.position.y=n,this.scale.x=i||1,this.scale.y=s||1,this.rotation=a,this.skew.x=o,this.skew.y=l,this.pivot.x=u,this.pivot.y=h,this},r.prototype.destroy=function(e){this.parent&&this.parent.removeChild(this),this.emit("destroyed"),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(r.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new ah),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),r.prototype.enableTempParent=function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e},r.prototype.disableTempParent=function(e){this.parent=e},Object.defineProperty(r.prototype,"x",{get:function(){return this.position.x},set:function(e){this.transform.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.position.y},set:function(e){this.transform.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"angle",{get:function(){return this.transform.rotation*cv},set:function(e){this.transform.rotation=e*fv},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mask",{get:function(){return this._mask},set:function(e){if(this._mask!==e){if(this._mask){var n=this._mask.maskObject||this._mask;n._maskRefCount--,n._maskRefCount===0&&(n.renderable=!0,n.isMask=!1)}if(this._mask=e,this._mask){var n=this._mask.maskObject||this._mask;n._maskRefCount===0&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++}}},enumerable:!1,configurable:!0}),r})(yr),ah=(function(t){zs(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return r})(Et);Et.prototype.displayObjectUpdateTransform=Et.prototype.updateTransform;var Do;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(Do||(Do={}));var ko;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(ko||(ko={}));var Ho;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(Ho||(Ho={}));var Xo;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(Xo||(Xo={}));var jo;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(jo||(jo={}));var Vo;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Vo||(Vo={}));var qo;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(qo||(qo={}));var zo;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(zo||(zo={}));var Wo;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(Wo||(Wo={}));var $o;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})($o||($o={}));var Yo;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Yo||(Yo={}));var Ko;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(Ko||(Ko={}));var Zo;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Zo||(Zo={}));var Jo;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(Jo||(Jo={}));var Qo;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Qo||(Qo={}));var tl;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(tl||(tl={}));var cs;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"})(cs||(cs={}));var el;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(el||(el={}));var rl;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(rl||(rl={}));function mv(t,r){return t.zIndex===r.zIndex?t._lastSortedIndex-r._lastSortedIndex:t.zIndex-r.zIndex}var Lt=(function(t){zs(r,t);function r(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=et.SORTABLE_CHILDREN,e.sortDirty=!1,e}return r.prototype.onChildrenChange=function(e){},r.prototype.addChild=function(){for(var e=arguments,n=[],i=0;i<arguments.length;i++)n[i]=e[i];if(n.length>1)for(var s=0;s<n.length;s++)this.addChild(n[s]);else{var a=n[0];a.parent&&a.parent.removeChild(a),a.parent=this,this.sortDirty=!0,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",a,this,this.children.length-1),a.emit("added",this)}return n[0]},r.prototype.addChildAt=function(e,n){if(n<0||n>this.children.length)throw new Error(e+"addChildAt: The index "+n+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(n,0,e),this._boundsID++,this.onChildrenChange(n),e.emit("added",this),this.emit("childAdded",e,this,n),e},r.prototype.swapChildren=function(e,n){if(e!==n){var i=this.getChildIndex(e),s=this.getChildIndex(n);this.children[i]=n,this.children[s]=e,this.onChildrenChange(i<s?i:s)}},r.prototype.getChildIndex=function(e){var n=this.children.indexOf(e);if(n===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return n},r.prototype.setChildIndex=function(e,n){if(n<0||n>=this.children.length)throw new Error("The index "+n+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(e);Ve(this.children,i,1),this.children.splice(n,0,e),this.onChildrenChange(n)},r.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},r.prototype.removeChild=function(){for(var e=arguments,n=[],i=0;i<arguments.length;i++)n[i]=e[i];if(n.length>1)for(var s=0;s<n.length;s++)this.removeChild(n[s]);else{var a=n[0],o=this.children.indexOf(a);if(o===-1)return null;a.parent=null,a.transform._parentID=-1,Ve(this.children,o,1),this._boundsID++,this.onChildrenChange(o),a.emit("removed",this),this.emit("childRemoved",a,this,o)}return n[0]},r.prototype.removeChildAt=function(e){var n=this.getChildAt(e);return n.parent=null,n.transform._parentID=-1,Ve(this.children,e,1),this._boundsID++,this.onChildrenChange(e),n.emit("removed",this),this.emit("childRemoved",n,this,e),n},r.prototype.removeChildren=function(e,n){e===void 0&&(e=0),n===void 0&&(n=this.children.length);var i=e,s=n,a=s-i,o;if(a>0&&a<=s){o=this.children.splice(i,a);for(var l=0;l<o.length;++l)o[l].parent=null,o[l].transform&&(o[l].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var l=0;l<o.length;++l)o[l].emit("removed",this),this.emit("childRemoved",o[l],this,l);return o}else if(a===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},r.prototype.sortChildren=function(){for(var e=!1,n=0,i=this.children.length;n<i;++n){var s=this.children[n];s._lastSortedIndex=n,!e&&s.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(mv),this.sortDirty=!1},r.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,n=this.children.length;e<n;++e){var i=this.children[e];i.visible&&i.updateTransform()}},r.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var n=this.children[e];if(!(!n.visible||!n.renderable))if(n.calculateBounds(),n._mask){var i=n._mask.maskObject||n._mask;i.calculateBounds(),this._bounds.addBoundsMask(n._bounds,i._bounds)}else n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds)}this._bounds.updateID=this._boundsID},r.prototype.getLocalBounds=function(e,n){n===void 0&&(n=!1);var i=t.prototype.getLocalBounds.call(this,e);if(!n)for(var s=0,a=this.children.length;s<a;++s){var o=this.children[s];o.visible&&o.updateTransform()}return i},r.prototype._calculateBounds=function(){},r.prototype.render=function(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else{this._render(e);for(var n=0,i=this.children.length;n<i;++n)this.children[n].render(e)}},r.prototype.renderAdvanced=function(e){var n=this.filters,i=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<n.length;s++)n[s].enabled&&this._enabledFilters.push(n[s])}var a=n&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==cs.NONE));a&&e.batch.flush(),n&&this._enabledFilters&&this._enabledFilters.length&&e.filter.push(this,this._enabledFilters),i&&e.mask.push(this,this._mask),this._render(e);for(var s=0,o=this.children.length;s<o;s++)this.children[s].render(e);a&&e.batch.flush(),i&&e.mask.pop(this),n&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},r.prototype._render=function(e){},r.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var n=typeof e=="boolean"?e:e&&e.children,i=this.removeChildren(0,this.children.length);if(n)for(var s=0;s<i.length;++s)i[s].destroy(e)},Object.defineProperty(r.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var n=this.getLocalBounds().width;n!==0?this.scale.x=e/n:this.scale.x=1,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var n=this.getLocalBounds().height;n!==0?this.scale.y=e/n:this.scale.y=1,this._height=e},enumerable:!1,configurable:!0}),r})(Et);Lt.prototype.containerUpdateTransform=Lt.prototype.updateTransform;var gv={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Et.mixin(gv);var yv=9,Sr=100,bv=0,xv=0,nl=2,il=1,Tv=-1e3,Ev=-1e3,wv=2,Iv=(function(){function t(r){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(jt.tablet||jt.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width=Sr+"px",e.style.height=Sr+"px",e.style.position="absolute",e.style.top=bv+"px",e.style.left=xv+"px",e.style.zIndex=nl.toString(),this.div=e,this.renderer=r,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),self.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var r=this,e=document.createElement("button");e.style.width=il+"px",e.style.height=il+"px",e.style.position="absolute",e.style.top=Tv+"px",e.style.left=Ev+"px",e.style.zIndex=wv.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",function(){r._isMobileAccessibility=!0,r.activate(),r.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){var r;this._isActive||(this._isActive=!0,self.document.addEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(r=this.renderer.view.parentNode)===null||r===void 0||r.appendChild(this.div))},t.prototype.deactivate=function(){var r;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(r=this.div.parentNode)===null||r===void 0||r.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(r){if(!(!r.visible||!r.accessibleChildren)){r.accessible&&r.interactive&&(r._accessibleActive||this.addChild(r),r.renderId=this.renderId);var e=r.children;if(e)for(var n=0;n<e.length;n++)this.updateAccessibleObjects(e[n])}},t.prototype.update=function(){var r=performance.now();if(!(jt.android.device&&r<this.androidUpdateCount)&&(this.androidUpdateCount=r+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),n=e.left,i=e.top,s=e.width,a=e.height,o=this.renderer,l=o.width,u=o.height,h=o.resolution,f=s/l*h,c=a/u*h,d=this.div;d.style.left=n+"px",d.style.top=i+"px",d.style.width=l+"px",d.style.height=u+"px";for(var v=0;v<this.children.length;v++){var _=this.children[v];if(_.renderId!==this.renderId)_._accessibleActive=!1,Ve(this.children,v,1),this.div.removeChild(_._accessibleDiv),this.pool.push(_._accessibleDiv),_._accessibleDiv=null,v--;else{d=_._accessibleDiv;var p=_.hitArea,m=_.worldTransform;_.hitArea?(d.style.left=(m.tx+p.x*m.a)*f+"px",d.style.top=(m.ty+p.y*m.d)*c+"px",d.style.width=p.width*m.a*f+"px",d.style.height=p.height*m.d*c+"px"):(p=_.getBounds(),this.capHitArea(p),d.style.left=p.x*f+"px",d.style.top=p.y*c+"px",d.style.width=p.width*f+"px",d.style.height=p.height*c+"px",d.title!==_.accessibleTitle&&_.accessibleTitle!==null&&(d.title=_.accessibleTitle),d.getAttribute("aria-label")!==_.accessibleHint&&_.accessibleHint!==null&&d.setAttribute("aria-label",_.accessibleHint)),(_.accessibleTitle!==d.title||_.tabIndex!==d.tabIndex)&&(d.title=_.accessibleTitle,d.tabIndex=_.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}},t.prototype.updateDebugHTML=function(r){r.innerHTML="type: "+r.type+"</br> title : "+r.title+"</br> tabIndex: "+r.tabIndex},t.prototype.capHitArea=function(r){r.x<0&&(r.width+=r.x,r.x=0),r.y<0&&(r.height+=r.y,r.y=0);var e=this.renderer,n=e.width,i=e.height;r.x+r.width>n&&(r.width=n-r.x),r.y+r.height>i&&(r.height=i-r.y)},t.prototype.addChild=function(r){var e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=Sr+"px",e.style.height=Sr+"px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=nl.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=r.accessiblePointerEvents,e.type=r.accessibleType,r.accessibleTitle&&r.accessibleTitle!==null?e.title=r.accessibleTitle:(!r.accessibleHint||r.accessibleHint===null)&&(e.title="displayObject "+r.tabIndex),r.accessibleHint&&r.accessibleHint!==null&&e.setAttribute("aria-label",r.accessibleHint),this.debug&&this.updateDebugHTML(e),r._accessibleActive=!0,r._accessibleDiv=e,e.displayObject=r,this.children.push(r),this.div.appendChild(r._accessibleDiv),r._accessibleDiv.tabIndex=r.tabIndex},t.prototype._onClick=function(r){var e=this.renderer.plugins.interaction,n=r.target.displayObject,i=e.eventData;e.dispatchEvent(n,"click",i),e.dispatchEvent(n,"pointertap",i),e.dispatchEvent(n,"tap",i)},t.prototype._onFocus=function(r){r.target.getAttribute("aria-live")||r.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction,n=r.target.displayObject,i=e.eventData;e.dispatchEvent(n,"mouseover",i)},t.prototype._onFocusOut=function(r){r.target.getAttribute("aria-live")||r.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction,n=r.target.displayObject,i=e.eventData;e.dispatchEvent(n,"mouseout",i)},t.prototype._onKeyDown=function(r){r.keyCode===yv&&this.activate()},t.prototype._onMouseMove=function(r){r.movementX===0&&r.movementY===0||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t})();et.TARGET_FPMS=.06;var re;(function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"})(re||(re={}));var wi=(function(){function t(r,e,n,i){e===void 0&&(e=null),n===void 0&&(n=0),i===void 0&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=r,this.context=e,this.priority=n,this.once=i}return t.prototype.match=function(r,e){return e===void 0&&(e=null),this.fn===r&&this.context===e},t.prototype.emit=function(r){this.fn&&(this.context?this.fn.call(this.context,r):this.fn(r));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(r){this.previous=r,r.next&&(r.next.previous=this),this.next=r.next,r.next=this},t.prototype.destroy=function(r){r===void 0&&(r=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=r?null:e,this.previous=null,e},t})(),Rt=(function(){function t(){var r=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new wi(null,null,1/0),this.deltaMS=1/et.TARGET_FPMS,this.elapsedMS=1/et.TARGET_FPMS,this._tick=function(e){r._requestId=null,r.started&&(r.update(e),r.started&&r._requestId===null&&r._head.next&&(r._requestId=requestAnimationFrame(r._tick)))}}return t.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(r,e,n){return n===void 0&&(n=re.NORMAL),this._addListener(new wi(r,e,n))},t.prototype.addOnce=function(r,e,n){return n===void 0&&(n=re.NORMAL),this._addListener(new wi(r,e,n,!0))},t.prototype._addListener=function(r){var e=this._head.next,n=this._head;if(!e)r.connect(n);else{for(;e;){if(r.priority>e.priority){r.connect(n);break}n=e,e=e.next}r.previous||r.connect(n)}return this._startIfPossible(),this},t.prototype.remove=function(r,e){for(var n=this._head.next;n;)n.match(r,e)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var r=0,e=this._head;e=e.next;)r++;return r},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var r=this._head.next;r;)r=r.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(r){r===void 0&&(r=performance.now());var e;if(r>this.lastTime){if(e=this.elapsedMS=r-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var n=r-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=r-n%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*et.TARGET_FPMS;for(var i=this._head,s=i.next;s;)s=s.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=r},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(r){var e=Math.min(this.maxFPS,r),n=Math.min(Math.max(0,e)/1e3,et.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(r){if(r===0)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,r);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var r=t._shared=new t;r.autoStart=!0,r._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var r=t._system=new t;r.autoStart=!0,r._protected=!0}return t._system},enumerable:!1,configurable:!0}),t})(),Rv=(function(){function t(){}return t.init=function(r){var e=this;r=Object.assign({autoStart:!0,sharedTicker:!1},r),Object.defineProperty(this,"ticker",{set:function(n){this._ticker&&this._ticker.remove(this.render,this),this._ticker=n,n&&n.add(this.render,this,re.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=r.sharedTicker?Rt.shared:new Rt,r.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var r=this._ticker;this.ticker=null,r.destroy()}},t})();var sl=(function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new xt,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(r,e,n){return r.worldTransform.applyInverse(n||this.global,e)},t.prototype.copyEvent=function(r){"isPrimary"in r&&r.isPrimary&&(this.isPrimary=!0),this.button="button"in r&&r.button;var e="buttons"in r&&r.buttons;this.buttons=Number.isInteger(e)?e:"which"in r&&r.which,this.width="width"in r&&r.width,this.height="height"in r&&r.height,this.tiltX="tiltX"in r&&r.tiltX,this.tiltY="tiltY"in r&&r.tiltY,this.pointerType="pointerType"in r&&r.pointerType,this.pressure="pressure"in r&&r.pressure,this.rotationAngle="rotationAngle"in r&&r.rotationAngle,this.twist="twist"in r&&r.twist||0,this.tangentialPressure="tangentialPressure"in r&&r.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t})();var fs=function(t,r){return fs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},fs(t,r)};function Cv(t,r){fs(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Av=(function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t})(),Ii=(function(){function t(r){this._pointerId=r,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(r,e){e?this._flags=this._flags|r:this._flags=this._flags&~r},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(r){this._flags=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return(this._flags&t.FLAGS.OVER)!==0},set:function(r){this._doSet(t.FLAGS.OVER,r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return(this._flags&t.FLAGS.RIGHT_DOWN)!==0},set:function(r){this._doSet(t.FLAGS.RIGHT_DOWN,r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return(this._flags&t.FLAGS.LEFT_DOWN)!==0},set:function(r){this._doSet(t.FLAGS.LEFT_DOWN,r)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t})(),Sv=(function(){function t(){this._tempPoint=new xt}return t.prototype.recursiveFindHit=function(r,e,n,i,s){if(!e||!e.visible)return!1;var a=r.data.global;s=e.interactive||s;var o=!1,l=s,u=!0;if(e.hitArea?(i&&(e.worldTransform.applyInverse(a,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?o=!0:(i=!1,u=!1)),l=!1):e._mask&&i&&(e._mask.containsPoint&&e._mask.containsPoint(a)||(i=!1)),u&&e.interactiveChildren&&e.children)for(var h=e.children,f=h.length-1;f>=0;f--){var c=h[f],d=this.recursiveFindHit(r,c,n,i,l);if(d){if(!c.parent)continue;l=!1,d&&(r.target&&(i=!1),o=!0)}}return s&&(i&&!r.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(a)&&(o=!0),e.interactive&&(o&&!r.target&&(r.target=e),n&&n(r,e,!!o))),o},t.prototype.findHit=function(r,e,n,i){this.recursiveFindHit(r,e,n,i,!1)},t})(),Pv={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(t){t?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Et.mixin(Pv);var Pr=1,Nr={target:null,data:{global:null}},Nv=(function(t){Cv(r,t);function r(e,n){var i=t.call(this)||this;return n=n||{},i.renderer=e,i.autoPreventDefault=n.autoPreventDefault!==void 0?n.autoPreventDefault:!0,i.interactionFrequency=n.interactionFrequency||10,i.mouse=new sl,i.mouse.identifier=Pr,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[Pr]=i.mouse,i.interactionDataPool=[],i.eventData=new Av,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.tickerAdded=!1,i.mouseOverRenderer=!("PointerEvent"in self),i.supportsTouchEvents="ontouchstart"in self,i.supportsPointerEvents=!!self.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i.resolution=1,i.delayedEvents=[],i.search=new Sv,i._tempDisplayObject=new ah,i._eventListenerOptions={capture:!0,passive:!1},i._useSystemTicker=n.useSystemTicker!==void 0?n.useSystemTicker:!0,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return Object.defineProperty(r.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(e){this._useSystemTicker=e,e?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),r.prototype.hitTest=function(e,n){return Nr.target=null,Nr.data.global=e,n||(n=this.lastObjectRendered),this.processInteractive(Nr,n,null,!0),Nr.target},r.prototype.setTargetElement=function(e,n){n===void 0&&(n=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=e,this.resolution=n,this.addEvents(),this.addTickerListener()},r.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(Rt.system.add(this.tickerUpdate,this,re.INTERACTION),this.tickerAdded=!0)},r.prototype.removeTickerListener=function(){this.tickerAdded&&(Rt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},r.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var e=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none"),this.supportsPointerEvents?(self.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),self.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),self.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(self.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),self.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},r.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var e=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(self.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),self.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),self.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(self.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),self.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},r.prototype.tickerUpdate=function(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},r.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var e in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var n=this.activeInteractionData[e];if(n.originalEvent&&n.pointerType!=="touch"){var i=this.configureInteractionEventForDOMEvent(this.eventData,n.originalEvent,n);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},r.prototype.setCursorMode=function(e){e=e||"default";var n=!0;if(self.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(n=!1),this.currentCursorMode!==e){this.currentCursorMode=e;var i=this.cursorStyles[e];if(i)switch(typeof i){case"string":n&&(this.interactionDOMElement.style.cursor=i);break;case"function":i(e);break;case"object":n&&Object.assign(this.interactionDOMElement.style,i);break}else n&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.interactionDOMElement.style.cursor=e)}},r.prototype.dispatchEvent=function(e,n,i){(!i.stopPropagationHint||e===i.stopsPropagatingAt)&&(i.currentTarget=e,i.type=n,e.emit(n,i),e[n]&&e[n](i))},r.prototype.delayDispatchEvent=function(e,n,i){this.delayedEvents.push({displayObject:e,eventString:n,eventData:i})},r.prototype.mapPositionToPoint=function(e,n,i){var s;this.interactionDOMElement.parentElement?s=this.interactionDOMElement.getBoundingClientRect():s={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var a=1/this.resolution;e.x=(n-s.left)*(this.interactionDOMElement.width/s.width)*a,e.y=(i-s.top)*(this.interactionDOMElement.height/s.height)*a},r.prototype.processInteractive=function(e,n,i,s){var a=this.search.findHit(e,n,i,s),o=this.delayedEvents;if(!o.length)return a;e.stopPropagationHint=!1;var l=o.length;this.delayedEvents=[];for(var u=0;u<l;u++){var h=o[u],f=h.displayObject,c=h.eventString,d=h.eventData;d.stopsPropagatingAt===f&&(d.stopPropagationHint=!0),this.dispatchEvent(f,c,d)}return a},r.prototype.onPointerDown=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var n=this.normalizeToPointerData(e);if(this.autoPreventDefault&&n[0].isNormalized){var i=e.cancelable||!("cancelable"in e);i&&e.preventDefault()}for(var s=n.length,a=0;a<s;a++){var o=n[a],l=this.getInteractionDataForPointerId(o),u=this.configureInteractionEventForDOMEvent(this.eventData,o,l);if(u.data.originalEvent=e,this.processInteractive(u,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",u),o.pointerType==="touch")this.emit("touchstart",u);else if(o.pointerType==="mouse"||o.pointerType==="pen"){var h=o.button===2;this.emit(h?"rightdown":"mousedown",this.eventData)}}}},r.prototype.processPointerDown=function(e,n,i){var s=e.data,a=e.data.identifier;if(i){if(n.trackedPointers[a]||(n.trackedPointers[a]=new Ii(a)),this.dispatchEvent(n,"pointerdown",e),s.pointerType==="touch")this.dispatchEvent(n,"touchstart",e);else if(s.pointerType==="mouse"||s.pointerType==="pen"){var o=s.button===2;o?n.trackedPointers[a].rightDown=!0:n.trackedPointers[a].leftDown=!0,this.dispatchEvent(n,o?"rightdown":"mousedown",e)}}},r.prototype.onPointerComplete=function(e,n,i){for(var s=this.normalizeToPointerData(e),a=s.length,o=e.target!==this.interactionDOMElement?"outside":"",l=0;l<a;l++){var u=s[l],h=this.getInteractionDataForPointerId(u),f=this.configureInteractionEventForDOMEvent(this.eventData,u,h);if(f.data.originalEvent=e,this.processInteractive(f,this.lastObjectRendered,i,n||!o),this.emit(n?"pointercancel":"pointerup"+o,f),u.pointerType==="mouse"||u.pointerType==="pen"){var c=u.button===2;this.emit(c?"rightup"+o:"mouseup"+o,f)}else u.pointerType==="touch"&&(this.emit(n?"touchcancel":"touchend"+o,f),this.releaseInteractionDataForPointerId(u.pointerId))}},r.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&e.pointerType==="touch"||this.onPointerComplete(e,!0,this.processPointerCancel)},r.prototype.processPointerCancel=function(e,n){var i=e.data,s=e.data.identifier;n.trackedPointers[s]!==void 0&&(delete n.trackedPointers[s],this.dispatchEvent(n,"pointercancel",e),i.pointerType==="touch"&&this.dispatchEvent(n,"touchcancel",e))},r.prototype.onPointerUp=function(e){this.supportsTouchEvents&&e.pointerType==="touch"||this.onPointerComplete(e,!1,this.processPointerUp)},r.prototype.processPointerUp=function(e,n,i){var s=e.data,a=e.data.identifier,o=n.trackedPointers[a],l=s.pointerType==="touch",u=s.pointerType==="mouse"||s.pointerType==="pen",h=!1;if(u){var f=s.button===2,c=Ii.FLAGS,d=f?c.RIGHT_DOWN:c.LEFT_DOWN,v=o!==void 0&&o.flags&d;i?(this.dispatchEvent(n,f?"rightup":"mouseup",e),v&&(this.dispatchEvent(n,f?"rightclick":"click",e),h=!0)):v&&this.dispatchEvent(n,f?"rightupoutside":"mouseupoutside",e),o&&(f?o.rightDown=!1:o.leftDown=!1)}i?(this.dispatchEvent(n,"pointerup",e),l&&this.dispatchEvent(n,"touchend",e),o&&((!u||h)&&this.dispatchEvent(n,"pointertap",e),l&&(this.dispatchEvent(n,"tap",e),o.over=!1))):o&&(this.dispatchEvent(n,"pointerupoutside",e),l&&this.dispatchEvent(n,"touchendoutside",e)),o&&o.none&&delete n.trackedPointers[a]},r.prototype.onPointerMove=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var n=this.normalizeToPointerData(e);(n[0].pointerType==="mouse"||n[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var i=n.length,s=0;s<i;s++){var a=n[s],o=this.getInteractionDataForPointerId(a),l=this.configureInteractionEventForDOMEvent(this.eventData,a,o);l.data.originalEvent=e,this.processInteractive(l,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",l),a.pointerType==="touch"&&this.emit("touchmove",l),(a.pointerType==="mouse"||a.pointerType==="pen")&&this.emit("mousemove",l)}n[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},r.prototype.processPointerMove=function(e,n,i){var s=e.data,a=s.pointerType==="touch",o=s.pointerType==="mouse"||s.pointerType==="pen";o&&this.processPointerOverOut(e,n,i),(!this.moveWhenInside||i)&&(this.dispatchEvent(n,"pointermove",e),a&&this.dispatchEvent(n,"touchmove",e),o&&this.dispatchEvent(n,"mousemove",e))},r.prototype.onPointerOut=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var n=this.normalizeToPointerData(e),i=n[0];i.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var s=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,s);a.data.originalEvent=i,this.processInteractive(a,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",a),i.pointerType==="mouse"||i.pointerType==="pen"?this.emit("mouseout",a):this.releaseInteractionDataForPointerId(s.identifier)}},r.prototype.processPointerOverOut=function(e,n,i){var s=e.data,a=e.data.identifier,o=s.pointerType==="mouse"||s.pointerType==="pen",l=n.trackedPointers[a];i&&!l&&(l=n.trackedPointers[a]=new Ii(a)),l!==void 0&&(i&&this.mouseOverRenderer?(l.over||(l.over=!0,this.delayDispatchEvent(n,"pointerover",e),o&&this.delayDispatchEvent(n,"mouseover",e)),o&&this.cursor===null&&(this.cursor=n.cursor)):l.over&&(l.over=!1,this.dispatchEvent(n,"pointerout",this.eventData),o&&this.dispatchEvent(n,"mouseout",e),l.none&&delete n.trackedPointers[a]))},r.prototype.onPointerOver=function(e){var n=this.normalizeToPointerData(e),i=n[0],s=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,s);a.data.originalEvent=i,i.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",a),(i.pointerType==="mouse"||i.pointerType==="pen")&&this.emit("mouseover",a)},r.prototype.getInteractionDataForPointerId=function(e){var n=e.pointerId,i;return n===Pr||e.pointerType==="mouse"?i=this.mouse:this.activeInteractionData[n]?i=this.activeInteractionData[n]:(i=this.interactionDataPool.pop()||new sl,i.identifier=n,this.activeInteractionData[n]=i),i.copyEvent(e),i},r.prototype.releaseInteractionDataForPointerId=function(e){var n=this.activeInteractionData[e];n&&(delete this.activeInteractionData[e],n.reset(),this.interactionDataPool.push(n))},r.prototype.configureInteractionEventForDOMEvent=function(e,n,i){return e.data=i,this.mapPositionToPoint(i.global,n.clientX,n.clientY),n.pointerType==="touch"&&(n.globalX=i.global.x,n.globalY=i.global.y),i.originalEvent=n,e.reset(),e},r.prototype.normalizeToPointerData=function(e){var n=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var i=0,s=e.changedTouches.length;i<s;i++){var a=e.changedTouches[i];typeof a.button>"u"&&(a.button=e.touches.length?1:0),typeof a.buttons>"u"&&(a.buttons=e.touches.length?1:0),typeof a.isPrimary>"u"&&(a.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof a.width>"u"&&(a.width=a.radiusX||1),typeof a.height>"u"&&(a.height=a.radiusY||1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="touch"),typeof a.pointerId>"u"&&(a.pointerId=a.identifier||0),typeof a.pressure>"u"&&(a.pressure=a.force||.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),typeof a.layerX>"u"&&(a.layerX=a.offsetX=a.clientX),typeof a.layerY>"u"&&(a.layerY=a.offsetY=a.clientY),a.isNormalized=!0,n.push(a)}else if(!self.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof self.PointerEvent))){var o=e;typeof o.isPrimary>"u"&&(o.isPrimary=!0),typeof o.width>"u"&&(o.width=1),typeof o.height>"u"&&(o.height=1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="mouse"),typeof o.pointerId>"u"&&(o.pointerId=Pr),typeof o.pressure>"u"&&(o.pressure=.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),o.isNormalized=!0,n.push(o)}else n.push(e);return n},r.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},r})(yr);var At=(function(){function t(r){this.items=[],this._name=r,this._aliasCount=0}return t.prototype.emit=function(r,e,n,i,s,a,o,l){if(arguments.length>8)throw new Error("max arguments reached");var u=this,h=u.name,f=u.items;this._aliasCount++;for(var c=0,d=f.length;c<d;c++)f[c][h](r,e,n,i,s,a,o,l);return f===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(r){return r[this._name]&&(this.ensureNonAliasedItems(),this.remove(r),this.items.push(r)),this},t.prototype.remove=function(r){var e=this.items.indexOf(r);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(r){return this.items.indexOf(r)!==-1},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t})();Object.defineProperties(At.prototype,{dispatch:{value:At.prototype.emit},run:{value:At.prototype.emit}});et.PREFER_ENV=jt.any?ee.WEBGL:ee.WEBGL2;et.STRICT_TEXTURE_CACHE=!1;var ds=[];function oh(t,r){if(!t)return null;var e="";if(typeof t=="string"){var n=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);n&&(e=n[1].toLowerCase())}for(var i=ds.length-1;i>=0;--i){var s=ds[i];if(s.test&&s.test(t,e))return new s(t,r)}throw new Error("Unrecognized source type to auto-detect Resource")}var ps=function(t,r){return ps=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},ps(t,r)};function pt(t,r){ps(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var vs=function(){return vs=Object.assign||function(r){for(var e=arguments,n,i=1,s=arguments.length;i<s;i++){n=e[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r},vs.apply(this,arguments)};function Ov(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&(e[n[i]]=t[n[i]]);return e}var dr=(function(){function t(r,e){r===void 0&&(r=0),e===void 0&&(e=0),this._width=r,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new At("setRealSize"),this.onUpdate=new At("update"),this.onError=new At("onError")}return t.prototype.bind=function(r){this.onResize.add(r),this.onUpdate.add(r),this.onError.add(r),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(r){this.onResize.remove(r),this.onUpdate.remove(r),this.onError.remove(r)},t.prototype.resize=function(r,e){(r!==this._width||e!==this._height)&&(this._width=r,this._height=e,this.onResize.emit(r,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(r,e,n){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(r,e){return!1},t})(),hn=(function(t){pt(r,t);function r(e,n){var i=this,s=n||{},a=s.width,o=s.height;if(!a||!o)throw new Error("BufferResource width or height invalid");return i=t.call(this,a,o)||this,i.data=e,i}return r.prototype.upload=function(e,n,i){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===zt.UNPACK);var a=n.realWidth,o=n.realHeight;return i.width===a&&i.height===o?s.texSubImage2D(n.target,0,0,0,a,o,n.format,i.type,this.data):(i.width=a,i.height=o,s.texImage2D(n.target,0,i.internalFormat,a,o,0,n.format,i.type,this.data)),!0},r.prototype.dispose=function(){this.data=null},r.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},r})(dr),Uv={scaleMode:Ot.NEAREST,format:z.RGBA,alphaMode:zt.NPM},lt=(function(t){pt(r,t);function r(e,n){e===void 0&&(e=null),n===void 0&&(n=null);var i=t.call(this)||this;n=n||{};var s=n.alphaMode,a=n.mipmap,o=n.anisotropicLevel,l=n.scaleMode,u=n.width,h=n.height,f=n.wrapMode,c=n.format,d=n.type,v=n.target,_=n.resolution,p=n.resourceOptions;return e&&!(e instanceof dr)&&(e=oh(e,p),e.internal=!0),i.resolution=_||et.RESOLUTION,i.width=Math.round((u||0)*i.resolution)/i.resolution,i.height=Math.round((h||0)*i.resolution)/i.resolution,i._mipmap=a!==void 0?a:et.MIPMAP_TEXTURES,i.anisotropicLevel=o!==void 0?o:et.ANISOTROPIC_LEVEL,i._wrapMode=f||et.WRAP_MODE,i._scaleMode=l!==void 0?l:et.SCALE_MODE,i.format=c||z.RGBA,i.type=d||it.UNSIGNED_BYTE,i.target=v||Re.TEXTURE_2D,i.alphaMode=s!==void 0?s:zt.UNPACK,i.uid=Se(),i.touched=0,i.isPowerOfTwo=!1,i._refreshPOT(),i._glTextures={},i.dirtyId=0,i.dirtyStyleId=0,i.cacheId=null,i.valid=u>0&&h>0,i.textureCacheIds=[],i.destroyed=!1,i.resource=null,i._batchEnabled=0,i._batchLocation=0,i.parentTextureArray=null,i.setResource(e),i}return Object.defineProperty(r.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),r.prototype.setStyle=function(e,n){var i;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,i=!0),n!==void 0&&n!==this.mipmap&&(this.mipmap=n,i=!0),i&&this.dirtyStyleId++,this},r.prototype.setSize=function(e,n,i){return i=i||this.resolution,this.setRealSize(e*i,n*i,i)},r.prototype.setRealSize=function(e,n,i){return this.resolution=i||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(n)/this.resolution,this._refreshPOT(),this.update(),this},r.prototype._refreshPOT=function(){this.isPowerOfTwo=Lo(this.realWidth)&&Lo(this.realHeight)},r.prototype.setResolution=function(e){var n=this.resolution;return n===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*n)/e,this.height=Math.round(this.height*n)/e,this.emit("update",this)),this._refreshPOT(),this)},r.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},r.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},r.prototype.onError=function(e){this.emit("error",this,e)},r.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete me[this.cacheId],delete Zt[this.cacheId],this.cacheId=null),this.dispose(),r.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},r.prototype.dispose=function(){this.emit("dispose",this)},r.prototype.castToBaseTexture=function(){return this},r.from=function(e,n,i){i===void 0&&(i=et.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=n&&n.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Se()}a=e._pixiId}var l=me[a];if(s&&i&&!l)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return l||(l=new r(e,n),l.cacheId=a,r.addToCache(l,a)),l},r.fromBuffer=function(e,n,i,s){e=e||new Float32Array(n*i*4);var a=new hn(e,{width:n,height:i}),o=e instanceof Float32Array?it.FLOAT:it.UNSIGNED_BYTE;return new r(a,Object.assign(Uv,s||{width:n,height:i,type:o}))},r.addToCache=function(e,n){n&&(e.textureCacheIds.indexOf(n)===-1&&e.textureCacheIds.push(n),me[n]&&console.warn("BaseTexture added to the cache with an id ["+n+"] that already had an entry"),me[n]=e)},r.removeFromCache=function(e){if(typeof e=="string"){var n=me[e];if(n){var i=n.textureCacheIds.indexOf(e);return i>-1&&n.textureCacheIds.splice(i,1),delete me[e],n}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)delete me[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},r._globalBatch=0,r})(yr),lh=(function(t){pt(r,t);function r(e,n){var i=this,s=n||{},a=s.width,o=s.height;i=t.call(this,a,o)||this,i.items=[],i.itemDirtyIds=[];for(var l=0;l<e;l++){var u=new lt;i.items.push(u),i.itemDirtyIds.push(-2)}return i.length=e,i._load=null,i.baseTexture=null,i}return r.prototype.initFromArray=function(e,n){for(var i=0;i<this.length;i++)e[i]&&(e[i].castToBaseTexture?this.addBaseTextureAt(e[i].castToBaseTexture(),i):e[i]instanceof dr?this.addResourceAt(e[i],i):this.addResourceAt(oh(e[i],n),i))},r.prototype.dispose=function(){for(var e=0,n=this.length;e<n;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},r.prototype.addResourceAt=function(e,n){if(!this.items[n])throw new Error("Index "+n+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[n].setResource(e),this},r.prototype.bind=function(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=e,this.items[n].on("update",e.update,e)},r.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",e.update,e)},r.prototype.load=function(){var e=this;if(this._load)return this._load;var n=this.items.map(function(s){return s.resource}).filter(function(s){return s}),i=n.map(function(s){return s.load()});return this._load=Promise.all(i).then(function(){var s=e.items[0],a=s.realWidth,o=s.realHeight;return e.resize(a,o),Promise.resolve(e)}),this._load},r})(dr),Lv=(function(t){pt(r,t);function r(e,n){var i=this,s=n||{},a=s.width,o=s.height,l,u;return Array.isArray(e)?(l=e,u=e.length):u=e,i=t.call(this,u,{width:a,height:o})||this,l&&i.initFromArray(l,n),i}return r.prototype.addBaseTextureAt=function(e,n){if(e.resource)this.addResourceAt(e.resource,n);else throw new Error("ArrayResource does not support RenderTexture");return this},r.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=Re.TEXTURE_2D_ARRAY},r.prototype.upload=function(e,n,i){var s=this,a=s.length,o=s.itemDirtyIds,l=s.items,u=e.gl;i.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,a,0,n.format,i.type,null);for(var h=0;h<a;h++){var f=l[h];o[h]<f.dirtyId&&(o[h]=f.dirtyId,f.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,h,f.resource.width,f.resource.height,1,n.format,i.type,f.resource.source))}return!0},r})(lh),fe=(function(t){pt(r,t);function r(e){var n=this,i=e,s=i.naturalWidth||i.videoWidth||i.width,a=i.naturalHeight||i.videoHeight||i.height;return n=t.call(this,s,a)||this,n.source=e,n.noSubImage=!1,n}return r.crossOrigin=function(e,n,i){i===void 0&&n.indexOf("data:")!==0?e.crossOrigin=hv(n):i!==!1&&(e.crossOrigin=typeof i=="string"?i:"anonymous")},r.prototype.upload=function(e,n,i,s){var a=e.gl,o=n.realWidth,l=n.realHeight;return s=s||this.source,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===zt.UNPACK),!this.noSubImage&&n.target===a.TEXTURE_2D&&i.width===o&&i.height===l?a.texSubImage2D(a.TEXTURE_2D,0,0,0,n.format,i.type,s):(i.width=o,i.height=l,a.texImage2D(n.target,0,i.internalFormat,n.format,i.type,s)),!0},r.prototype.update=function(){if(!this.destroyed){var e=this.source,n=e.naturalWidth||e.videoWidth||e.width,i=e.naturalHeight||e.videoHeight||e.height;this.resize(n,i),t.prototype.update.call(this)}},r.prototype.dispose=function(){this.source=null},r})(dr),uh=(function(t){pt(r,t);function r(e){return t.call(this,e)||this}return r.test=function(e){var n=self.OffscreenCanvas;return n&&e instanceof n?!0:self.HTMLCanvasElement&&e instanceof HTMLCanvasElement},r})(fe),Fv=(function(t){pt(r,t);function r(e,n){var i=this,s=n||{},a=s.width,o=s.height,l=s.autoLoad,u=s.linkBaseTexture;if(e&&e.length!==r.SIDES)throw new Error("Invalid length. Got "+e.length+", expected 6");i=t.call(this,6,{width:a,height:o})||this;for(var h=0;h<r.SIDES;h++)i.items[h].target=Re.TEXTURE_CUBE_MAP_POSITIVE_X+h;return i.linkBaseTexture=u!==!1,e&&i.initFromArray(e,n),l!==!1&&i.load(),i}return r.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=Re.TEXTURE_CUBE_MAP},r.prototype.addBaseTextureAt=function(e,n,i){if(i===void 0&&(i=this.linkBaseTexture),!this.items[n])throw new Error("Index "+n+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,n);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Re.TEXTURE_CUBE_MAP_POSITIVE_X+n,e.parentTextureArray=this.baseTexture,this.items[n]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[n]=e,this},r.prototype.upload=function(e,n,i){for(var s=this.itemDirtyIds,a=0;a<r.SIDES;a++){var o=this.items[a];s[a]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(e,o,i),s[a]=o.dirtyId):s[a]<-1&&(e.gl.texImage2D(o.target,0,i.internalFormat,n.realWidth,n.realHeight,0,n.format,i.type,null),s[a]=-1))}return!0},r.test=function(e){return Array.isArray(e)&&e.length===r.SIDES},r.SIDES=6,r})(lh),hh=(function(t){pt(r,t);function r(e,n){var i=this;if(n=n||{},!(e instanceof HTMLImageElement)){var s=new Image;fe.crossOrigin(s,e,n.crossorigin),s.src=e,e=s}return i=t.call(this,e)||this,!e.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=e.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(n.createBitmap!==void 0?n.createBitmap:et.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,i.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,i.bitmap=null,i._load=null,n.autoLoad!==!1&&i.load(),i}return r.prototype.load=function(e){var n=this;return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise(function(i,s){var a=n.source;n.url=a.src;var o=function(){n.destroyed||(a.onload=null,a.onerror=null,n.resize(a.width,a.height),n._load=null,n.createBitmap?i(n.process()):i(n))};a.complete&&a.src?o():(a.onload=o,a.onerror=function(l){s(l),n.onError.emit(l)})}),this._load)},r.prototype.process=function(){var e=this,n=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!self.createImageBitmap)return Promise.resolve(this);var i=self.createImageBitmap,s=!n.crossOrigin||n.crossOrigin==="anonymous";return this._process=fetch(n.src,{mode:s?"cors":"no-cors"}).then(function(a){return a.blob()}).then(function(a){return i(a,0,0,n.width,n.height,{premultiplyAlpha:e.alphaMode===zt.UNPACK?"premultiply":"none"})}).then(function(a){return e.destroyed?Promise.reject():(e.bitmap=a,e.update(),e._process=null,Promise.resolve(e))}),this._process},r.prototype.upload=function(e,n,i){if(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,n,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,n,i,this.bitmap),!this.preserveBitmap){var s=!0,a=n._glTextures;for(var o in a){var l=a[o];if(l!==i&&l.dirtyId!==n.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},r.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},r.test=function(e){return typeof e=="string"||e instanceof HTMLImageElement},r})(fe),Mv=(function(t){pt(r,t);function r(e,n){var i=this;return n=n||{},i=t.call(this,document.createElement("canvas"))||this,i._width=0,i._height=0,i.svg=e,i.scale=n.scale||1,i._overrideWidth=n.width,i._overrideHeight=n.height,i._resolve=null,i._crossorigin=n.crossorigin,i._load=null,n.autoLoad!==!1&&i.load(),i}return r.prototype.load=function(){var e=this;return this._load?this._load:(this._load=new Promise(function(n){if(e._resolve=function(){e.resize(e.source.width,e.source.height),n(e)},r.SVG_XML.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},r.prototype._loadSvg=function(){var e=this,n=new Image;fe.crossOrigin(n,this.svg,this._crossorigin),n.src=this.svg,n.onerror=function(i){e._resolve&&(n.onerror=null,e.onError.emit(i))},n.onload=function(){if(e._resolve){var i=n.width,s=n.height;if(!i||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=i*e.scale,o=s*e.scale;(e._overrideWidth||e._overrideHeight)&&(a=e._overrideWidth||e._overrideHeight/s*i,o=e._overrideHeight||e._overrideWidth/i*s),a=Math.round(a),o=Math.round(o);var l=e.source;l.width=a,l.height=o,l._pixiId="canvas_"+Se(),l.getContext("2d").drawImage(n,0,0,i,s,0,0,a,o),e._resolve(),e._resolve=null}}},r.getSize=function(e){var n=r.SVG_SIZE.exec(e),i={};return n&&(i[n[1]]=Math.round(parseFloat(n[3])),i[n[5]]=Math.round(parseFloat(n[7]))),i},r.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},r.test=function(e,n){return n==="svg"||typeof e=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||typeof e=="string"&&r.SVG_XML.test(e)},r.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,r.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,r})(fe),Bv=(function(t){pt(r,t);function r(e,n){var i=this;if(n=n||{},!(e instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);var a=e[0].src||e[0];fe.crossOrigin(s,a,n.crossorigin);for(var o=0;o<e.length;++o){var l=document.createElement("source"),u=e[o],h=u.src,f=u.mime;h=h||e[o];var c=h.split("?").shift().toLowerCase(),d=c.substr(c.lastIndexOf(".")+1);f=f||r.MIME_TYPES[d]||"video/"+d,l.src=h,l.type=f,s.appendChild(l)}e=s}return i=t.call(this,e)||this,i.noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=n.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=n.autoPlay!==!1,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),n.autoLoad!==!1&&i.load(),i}return r.prototype.update=function(e){if(!this.destroyed){var n=Rt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},r.prototype.load=function(){var e=this;if(this._load)return this._load;var n=this.source;return(n.readyState===n.HAVE_ENOUGH_DATA||n.readyState===n.HAVE_FUTURE_DATA)&&n.width&&n.height&&(n.complete=!0),n.addEventListener("play",this._onPlayStart.bind(this)),n.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(n.addEventListener("canplay",this._onCanPlay),n.addEventListener("canplaythrough",this._onCanPlay),n.addEventListener("error",this._onError,!0)),this._load=new Promise(function(i){e.valid?i(e):(e._resolve=i,n.load())}),this._load},r.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},r.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&e.paused===!1&&e.ended===!1&&e.readyState>2},r.prototype._isSourceReady=function(){var e=this.source;return e.readyState===3||e.readyState===4},r.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Rt.shared.add(this.update,this),this._isConnectedToTicker=!0)},r.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Rt.shared.remove(this.update,this),this._isConnectedToTicker=!1)},r.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var n=this.valid;this.resize(e.videoWidth,e.videoHeight),!n&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},r.prototype.dispose=function(){this._isConnectedToTicker&&(Rt.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(r.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Rt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Rt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),r.test=function(e,n){return self.HTMLVideoElement&&e instanceof HTMLVideoElement||r.TYPES.indexOf(n)>-1},r.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],r.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},r})(fe),Gv=(function(t){pt(r,t);function r(e){return t.call(this,e)||this}return r.test=function(e){return!!self.createImageBitmap&&e instanceof ImageBitmap},r})(fe);ds.push(hh,Gv,uh,Bv,Mv,hn,Fv,Lv);var Dv=(function(t){pt(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.upload=function(e,n,i){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===zt.UNPACK);var a=n.realWidth,o=n.realHeight;return i.width===a&&i.height===o?s.texSubImage2D(n.target,0,0,0,a,o,n.format,i.type,this.data):(i.width=a,i.height=o,s.texImage2D(n.target,0,i.internalFormat,a,o,0,n.format,i.type,this.data)),!0},r})(hn),_s=(function(){function t(r,e){this.width=Math.round(r||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new At("disposeFramebuffer"),this.multisample=wt.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(r,e){return r===void 0&&(r=0),this.colorTextures[r]=e||new lt(null,{scaleMode:Ot.NEAREST,resolution:1,mipmap:ce.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(r){return this.depthTexture=r||new lt(new Dv(null,{width:this.width,height:this.height}),{scaleMode:Ot.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:ce.OFF,format:z.DEPTH_COMPONENT,type:it.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(r,e){if(r=Math.round(r),e=Math.round(e),!(r===this.width&&e===this.height)){this.width=r,this.height=e,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var i=this.colorTextures[n],s=i.resolution;i.setSize(r/s,e/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(r/s,e/s)}}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t})(),ch=(function(t){pt(r,t);function r(e){var n=this;if(typeof e=="number"){var i=arguments[0],s=arguments[1],a=arguments[2],o=arguments[3];e={width:i,height:s,scaleMode:a,resolution:o}}return e.width=e.width||100,e.height=e.height||100,e.multisample=e.multisample!==void 0?e.multisample:wt.NONE,n=t.call(this,null,e)||this,n.mipmap=ce.OFF,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new _s(n.realWidth,n.realHeight).addColorTexture(0,n),n.framebuffer.multisample=e.multisample,n.maskStack=[],n.filterStack=[{}],n}return r.prototype.resize=function(e,n){this.framebuffer.resize(e*this.resolution,n*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},r.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},r.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},r})(lt),fh=(function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(r,e,n){var i=e.width,s=e.height;if(n){var a=r.width/2/i,o=r.height/2/s,l=r.x/i+a,u=r.y/s+o;n=_t.add(n,_t.NW),this.x0=l+a*_t.uX(n),this.y0=u+o*_t.uY(n),n=_t.add(n,2),this.x1=l+a*_t.uX(n),this.y1=u+o*_t.uY(n),n=_t.add(n,2),this.x2=l+a*_t.uX(n),this.y2=u+o*_t.uY(n),n=_t.add(n,2),this.x3=l+a*_t.uX(n),this.y3=u+o*_t.uY(n)}else this.x0=r.x/i,this.y0=r.y/s,this.x1=(r.x+r.width)/i,this.y1=r.y/s,this.x2=(r.x+r.width)/i,this.y2=(r.y+r.height)/s,this.x3=r.x/i,this.y3=(r.y+r.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},t})(),al=new fh,nt=(function(t){pt(r,t);function r(e,n,i,s,a,o){var l=t.call(this)||this;if(l.noFrame=!1,n||(l.noFrame=!0,n=new ut(0,0,1,1)),e instanceof r&&(e=e.baseTexture),l.baseTexture=e,l._frame=n,l.trim=s,l.valid=!1,l._uvs=al,l.uvMatrix=null,l.orig=i||n,l._rotate=Number(a||0),a===!0)l._rotate=2;else if(l._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=o?new xt(o.x,o.y):new xt(0,0),l._updateID=0,l.textureCacheIds=[],e.valid?l.noFrame?e.valid&&l.onBaseTextureUpdated(e):l.frame=n:e.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&e.on("update",l.onBaseTextureUpdated,l),l}return r.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},r.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},r.prototype.destroy=function(e){if(this.baseTexture){if(e){var n=this.baseTexture.resource;n&&n.url&&Zt[n.url]&&r.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,r.removeFromCache(this),this.textureCacheIds=null},r.prototype.clone=function(){var e=this._frame.clone(),n=this._frame===this.orig?e:this.orig.clone(),i=new r(this.baseTexture,!this.noFrame&&e,n,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(i._frame=e),i},r.prototype.updateUvs=function(){this._uvs===al&&(this._uvs=new fh),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},r.from=function(e,n,i){n===void 0&&(n={}),i===void 0&&(i=et.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else if(e instanceof lt){if(!e.cacheId){var o=n&&n.pixiIdPrefix||"pixiid";e.cacheId=o+"-"+Se(),lt.addToCache(e,e.cacheId)}a=e.cacheId}else{if(!e._pixiId){var o=n&&n.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Se()}a=e._pixiId}var l=Zt[a];if(s&&i&&!l)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return!l&&!(e instanceof lt)?(n.resolution||(n.resolution=en(e)),l=new r(new lt(e,n)),l.baseTexture.cacheId=a,lt.addToCache(l.baseTexture,a),r.addToCache(l,a)):!l&&e instanceof lt&&(l=new r(e),r.addToCache(l,a)),l},r.fromURL=function(e,n){var i=Object.assign({autoLoad:!1},n?.resourceOptions),s=r.from(e,Object.assign({resourceOptions:i},n),!1),a=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):a.load().then(function(){return Promise.resolve(s)})},r.fromBuffer=function(e,n,i,s){return new r(lt.fromBuffer(e,n,i,s))},r.fromLoader=function(e,n,i,s){var a=new lt(e,Object.assign({scaleMode:et.SCALE_MODE,resolution:en(n)},s)),o=a.resource;o instanceof hh&&(o.url=n);var l=new r(a);return i||(i=n),lt.addToCache(l.baseTexture,i),r.addToCache(l,i),i!==n&&(lt.addToCache(l.baseTexture,n),r.addToCache(l,n)),l.baseTexture.valid?Promise.resolve(l):new Promise(function(u){l.baseTexture.once("loaded",function(){return u(l)})})},r.addToCache=function(e,n){n&&(e.textureCacheIds.indexOf(n)===-1&&e.textureCacheIds.push(n),Zt[n]&&console.warn("Texture added to the cache with an id ["+n+"] that already had an entry"),Zt[n]=e)},r.removeFromCache=function(e){if(typeof e=="string"){var n=Zt[e];if(n){var i=n.textureCacheIds.indexOf(e);return i>-1&&n.textureCacheIds.splice(i,1),delete Zt[e],n}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)Zt[e.textureCacheIds[s]]===e&&delete Zt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(r.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var n=e.x,i=e.y,s=e.width,a=e.height,o=n+s>this.baseTexture.width,l=i+a>this.baseTexture.height;if(o||l){var u=o&&l?"and":"or",h="X: "+n+" + "+s+" = "+(n+s)+" > "+this.baseTexture.width,f="Y: "+i+" + "+a+" = "+(i+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(h+" "+u+" "+f))}this.valid=s&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),r.prototype.castToBaseTexture=function(){return this.baseTexture},r})(yr);function kv(){var t=document.createElement("canvas");t.width=16,t.height=16;var r=t.getContext("2d");return r.fillStyle="white",r.fillRect(0,0,16,16),new nt(new lt(new uh(t)))}function cn(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}nt.EMPTY=new nt(new lt);cn(nt.EMPTY);cn(nt.EMPTY.baseTexture);nt.WHITE=kv();cn(nt.WHITE);cn(nt.WHITE.baseTexture);var Pe=(function(t){pt(r,t);function r(e,n){var i=t.call(this,e,n)||this;return i.valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return Object.defineProperty(r.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e},enumerable:!1,configurable:!0}),r.prototype.resize=function(e,n,i){i===void 0&&(i=!0);var s=this.baseTexture.resolution,a=Math.round(e*s)/s,o=Math.round(n*s)/s;this.valid=a>0&&o>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=o,i&&this.baseTexture.resize(a,o),this.updateUvs()},r.prototype.setResolution=function(e){var n=this.baseTexture;n.resolution!==e&&(n.setResolution(e),this.resize(n.width,n.height,!1))},r.create=function(e){for(var n=arguments,i=[],s=1;s<arguments.length;s++)i[s-1]=n[s];return typeof e=="number"&&(fr("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),e={width:e,height:i[0],scaleMode:i[1],resolution:i[2]}),new r(new ch(e))},r})(nt),Hv=(function(){function t(r){this.texturePool={},this.textureOptions=r||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(r,e,n){n===void 0&&(n=wt.NONE);var i=new ch(Object.assign({width:r,height:e,resolution:1,multisample:n},this.textureOptions));return new Pe(i)},t.prototype.getOptimalTexture=function(r,e,n,i){n===void 0&&(n=1),i===void 0&&(i=wt.NONE);var s;r=Math.ceil(r*n),e=Math.ceil(e*n),!this.enableFullScreen||r!==this._pixelsWidth||e!==this._pixelsHeight?(r=tn(r),e=tn(e),s=((r&65535)<<16|e&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);var a=this.texturePool[s].pop();return a||(a=this.createTexture(r,e,i)),a.filterPoolKey=s,a.setResolution(n),a},t.prototype.getFilterTexture=function(r,e,n){var i=this.getOptimalTexture(r.width,r.height,e||r.resolution,n||wt.NONE);return i.filterFrame=r.filterFrame,i},t.prototype.returnTexture=function(r){var e=r.filterPoolKey;r.filterFrame=null,this.texturePool[e].push(r)},t.prototype.returnFilterTexture=function(r){this.returnTexture(r)},t.prototype.clear=function(r){if(r=r!==!1,r)for(var e in this.texturePool){var n=this.texturePool[e];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(r){if(!(r.width===this._pixelsWidth&&r.height===this._pixelsHeight)){this.enableFullScreen=r.width>0&&r.height>0;for(var e in this.texturePool)if(Number(e)<0){var n=this.texturePool[e];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=r.width,this._pixelsHeight=r.height}},t.SCREEN_KEY=-1,t})(),ol=(function(){function t(r,e,n,i,s,a,o){e===void 0&&(e=0),n===void 0&&(n=!1),i===void 0&&(i=it.FLOAT),this.buffer=r,this.size=e,this.normalized=n,this.type=i,this.stride=s,this.start=a,this.instance=o}return t.prototype.destroy=function(){this.buffer=null},t.from=function(r,e,n,i,s){return new t(r,e,n,i,s)},t})(),Xv=0,It=(function(){function t(r,e,n){e===void 0&&(e=!0),n===void 0&&(n=!1),this.data=r||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=e,this.id=Xv++,this.disposeRunner=new At("disposeBuffer")}return t.prototype.update=function(r){r instanceof Array&&(r=new Float32Array(r)),this.data=r||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(t.prototype,"index",{get:function(){return this.type===qt.ELEMENT_ARRAY_BUFFER},set:function(r){this.type=r?qt.ELEMENT_ARRAY_BUFFER:qt.ARRAY_BUFFER},enumerable:!1,configurable:!0}),t.from=function(r){return r instanceof Array&&(r=new Float32Array(r)),new t(r)},t})(),jv={Float32Array,Uint32Array,Int32Array,Uint8Array};function Vv(t,r){for(var e=0,n=0,i={},s=0;s<t.length;s++)n+=r[s],e+=t[s].length;for(var a=new ArrayBuffer(e*4),o=null,l=0,s=0;s<t.length;s++){var u=r[s],h=t[s],f=nh(h);i[f]||(i[f]=new jv[f](a)),o=i[f];for(var c=0;c<h.length;c++){var d=(c/u|0)*n+l,v=c%u;o[d+v]=h[c]}l+=u}return new Float32Array(a)}var ll={5126:4,5123:2,5121:1},qv=0,zv={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},br=(function(){function t(r,e){r===void 0&&(r=[]),e===void 0&&(e={}),this.buffers=r,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=qv++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new At("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(r,e,n,i,s,a,o,l){if(n===void 0&&(n=0),i===void 0&&(i=!1),l===void 0&&(l=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof It||(e instanceof Array&&(e=new Float32Array(e)),e=new It(e));var u=r.split("|");if(u.length>1){for(var h=0;h<u.length;h++)this.addAttribute(u[h],e,n,i,s);return this}var f=this.buffers.indexOf(e);return f===-1&&(this.buffers.push(e),f=this.buffers.length-1),this.attributes[r]=new ol(f,n,i,s,a,o,l),this.instanced=this.instanced||l,this},t.prototype.getAttribute=function(r){return this.attributes[r]},t.prototype.getBuffer=function(r){return this.buffers[this.getAttribute(r).buffer]},t.prototype.addIndex=function(r){return r instanceof It||(r instanceof Array&&(r=new Uint16Array(r)),r=new It(r)),r.type=qt.ELEMENT_ARRAY_BUFFER,this.indexBuffer=r,this.buffers.indexOf(r)===-1&&this.buffers.push(r),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var r=[],e=[],n=new It,i;for(i in this.attributes){var s=this.attributes[i],a=this.buffers[s.buffer];r.push(a.data),e.push(s.size*ll[s.type]/4),s.buffer=0}for(n.data=Vv(r,e),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var r in this.attributes){var e=this.attributes[r],n=this.buffers[e.buffer];return n.data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var r=new t,e=0;e<this.buffers.length;e++)r.buffers[e]=new It(this.buffers[e].data.slice(0));for(var e in this.attributes){var n=this.attributes[e];r.attributes[e]=new ol(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(r.indexBuffer=r.buffers[this.buffers.indexOf(this.indexBuffer)],r.indexBuffer.type=qt.ELEMENT_ARRAY_BUFFER),r},t.merge=function(r){for(var e=new t,n=[],i=[],s=[],a,o=0;o<r.length;o++){a=r[o];for(var l=0;l<a.buffers.length;l++)i[l]=i[l]||0,i[l]+=a.buffers[l].data.length,s[l]=0}for(var o=0;o<a.buffers.length;o++)n[o]=new zv[nh(a.buffers[o].data)](i[o]),e.buffers[o]=new It(n[o]);for(var o=0;o<r.length;o++){a=r[o];for(var l=0;l<a.buffers.length;l++)n[l].set(a.buffers[l].data,s[l]),s[l]+=a.buffers[l].data.length}if(e.attributes=a.attributes,a.indexBuffer){e.indexBuffer=e.buffers[a.buffers.indexOf(a.indexBuffer)],e.indexBuffer.type=qt.ELEMENT_ARRAY_BUFFER;for(var u=0,h=0,f=0,c=0,o=0;o<a.buffers.length;o++)if(a.buffers[o]!==a.indexBuffer){c=o;break}for(var o in a.attributes){var d=a.attributes[o];(d.buffer|0)===c&&(h+=d.size*ll[d.type]/4)}for(var o=0;o<r.length;o++){for(var v=r[o].indexBuffer.data,l=0;l<v.length;l++)e.indexBuffer.data[l+f]+=u;u+=r[o].buffers[c].data.length/h,f+=v.length}}return e},t})(),Wv=(function(t){pt(r,t);function r(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return r})(br),dh=(function(t){pt(r,t);function r(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new It(e.vertices),e.uvBuffer=new It(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return r.prototype.map=function(e,n){var i=0,s=0;return this.uvs[0]=i,this.uvs[1]=s,this.uvs[2]=i+n.width/e.width,this.uvs[3]=s,this.uvs[4]=i+n.width/e.width,this.uvs[5]=s+n.height/e.height,this.uvs[6]=i,this.uvs[7]=s+n.height/e.height,i=n.x,s=n.y,this.vertices[0]=i,this.vertices[1]=s,this.vertices[2]=i+n.width,this.vertices[3]=s,this.vertices[4]=i+n.width,this.vertices[5]=s+n.height,this.vertices[6]=i,this.vertices[7]=s+n.height,this.invalidate(),this},r.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},r})(br),$v=0,Ce=(function(){function t(r,e,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=$v++,this.static=!!e,this.ubo=!!n,r instanceof It?(this.buffer=r,this.buffer.type=qt.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=r,this.ubo&&(this.buffer=new It(new Float32Array(1)),this.buffer.type=qt.UNIFORM_BUFFER,this.autoManage=!0))}return t.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},t.prototype.add=function(r,e,n){if(!this.ubo)this.uniforms[r]=new t(e,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},t.from=function(r,e,n){return new t(r,e,n)},t.uboFrom=function(r,e){return new t(r,e??!0,!0)},t})(),Yv=(function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=wt.NONE,this.sourceFrame=new ut,this.destinationFrame=new ut,this.bindingSourceFrame=new ut,this.bindingDestinationFrame=new ut,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t})(),Or=[new xt,new xt,new xt,new xt],Ri=new Tt,Kv=(function(){function t(r){this.renderer=r,this.defaultFilterStack=[{}],this.texturePool=new Hv,this.texturePool.setScreenSize(r.view),this.statePool=[],this.quad=new Wv,this.quadUv=new dh,this.tempRect=new ut,this.activeState={},this.globalUniforms=new Ce({outputFrame:new ut,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return t.prototype.push=function(r,e){for(var n=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new Yv,a=this.renderer.renderTexture,o=e[0].resolution,l=e[0].multisample,u=e[0].padding,h=e[0].autoFit,f=e[0].legacy,c=1;c<e.length;c++){var d=e[c];o=Math.min(o,d.resolution),l=Math.min(l,d.multisample),u=this.useMaxPadding?Math.max(u,d.padding):u+d.padding,h=h&&d.autoFit,f=f||d.legacy}if(i.length===1&&(this.defaultFilterStack[0].renderTexture=a.current),i.push(s),s.resolution=o,s.multisample=l,s.legacy=f,s.target=r,s.sourceFrame.copyFrom(r.filterArea||r.getBounds(!0)),s.sourceFrame.pad(u),h){var v=this.tempRect.copyFrom(a.sourceFrame);n.projection.transform&&this.transformAABB(Ri.copyFrom(n.projection.transform).invert(),v),s.sourceFrame.fit(v)}this.roundFrame(s.sourceFrame,a.current?a.current.resolution:n.resolution,a.sourceFrame,a.destinationFrame,n.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,o,l),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var _=this.tempRect;_.x=0,_.y=0,_.width=s.sourceFrame.width,_.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(a.sourceFrame),s.bindingDestinationFrame.copyFrom(a.destinationFrame),s.transform=n.projection.transform,n.projection.transform=null,a.bind(s.renderTexture,s.sourceFrame,_),n.framebuffer.clear(0,0,0,0)},t.prototype.pop=function(){var r=this.defaultFilterStack,e=r.pop(),n=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var s=i.inputSize,a=i.inputPixel,o=i.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],a[0]=Math.round(s[0]*e.resolution),a[1]=Math.round(s[1]*e.resolution),a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=e.sourceFrame.width*s[2]-.5*a[2],o[3]=e.sourceFrame.height*s[3]-.5*a[3],e.legacy){var l=i.filterArea;l[0]=e.destinationFrame.width,l[1]=e.destinationFrame.height,l[2]=e.sourceFrame.x,l[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();var u=r[r.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,e.renderTexture,u.renderTexture,oe.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var h=e.renderTexture,f=this.getOptimalFilterTexture(h.width,h.height,e.resolution);f.filterFrame=h.filterFrame;var c=0;for(c=0;c<n.length-1;++c){c===1&&e.multisample>1&&(f=this.getOptimalFilterTexture(h.width,h.height,e.resolution),f.filterFrame=h.filterFrame),n[c].apply(this,h,f,oe.CLEAR,e);var d=h;h=f,f=d}n[c].apply(this,h,u.renderTexture,oe.BLEND,e),c>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(h),this.returnFilterTexture(f)}e.clear(),this.statePool.push(e)},t.prototype.bindAndClear=function(r,e){e===void 0&&(e=oe.CLEAR);var n=this.renderer,i=n.renderTexture,s=n.state;if(r===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,r&&r.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=r.filterFrame.width,a.height=r.filterFrame.height,i.bind(r,r.filterFrame,a)}else r!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(r):this.renderer.renderTexture.bind(r,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var o=s.stateId&1||this.forceClear;(e===oe.CLEAR||e===oe.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)},t.prototype.applyFilter=function(r,e,n,i){var s=this.renderer;s.state.set(r.state),this.bindAndClear(n,i),r.uniforms.uSampler=e,r.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(r),r.legacy=!!r.program.attributeData.aTextureCoord,r.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Xt.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Xt.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(r,e){var n=this.activeState,i=n.sourceFrame,s=n.destinationFrame,a=e._texture.orig,o=r.set(s.width,0,0,s.height,i.x,i.y),l=e.worldTransform.copyTo(Tt.TEMP_MATRIX);return l.invert(),o.prepend(l),o.scale(1/a.width,1/a.height),o.translate(e.anchor.x,e.anchor.y),o},t.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(r,e,n,i){return n===void 0&&(n=1),i===void 0&&(i=wt.NONE),this.texturePool.getOptimalTexture(r,e,n,i)},t.prototype.getFilterTexture=function(r,e,n){if(typeof r=="number"){var i=r;r=e,e=i}r=r||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(r.width,r.height,e||r.resolution,n||wt.NONE);return s.filterFrame=r.filterFrame,s},t.prototype.returnFilterTexture=function(r){this.texturePool.returnTexture(r)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t.prototype.transformAABB=function(r,e){var n=Or[0],i=Or[1],s=Or[2],a=Or[3];n.set(e.left,e.top),i.set(e.left,e.bottom),s.set(e.right,e.top),a.set(e.right,e.bottom),r.apply(n,n),r.apply(i,i),r.apply(s,s),r.apply(a,a);var o=Math.min(n.x,i.x,s.x,a.x),l=Math.min(n.y,i.y,s.y,a.y),u=Math.max(n.x,i.x,s.x,a.x),h=Math.max(n.y,i.y,s.y,a.y);e.x=o,e.y=l,e.width=u-o,e.height=h-l},t.prototype.roundFrame=function(r,e,n,i,s){if(s){var a=s.a,o=s.b,l=s.c,u=s.d;if((Math.abs(o)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(u)>1e-4))return}s=s?Ri.copyFrom(s):Ri.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(s,r),r.ceil(e),this.transformAABB(s.invert(),r)},t})(),fn=(function(){function t(r){this.renderer=r}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(r){},t})(),Zv=(function(){function t(r){this.renderer=r,this.emptyRenderer=new fn(r),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(r){this.currentRenderer!==r&&(this.currentRenderer.stop(),this.currentRenderer=r,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(r,e){for(var n=this.renderer.texture.boundTextures,i=e-1;i>=0;--i)r[i]=n[i]||null,r[i]&&(r[i]._batchLocation=i)},t.prototype.boundArray=function(r,e,n,i){for(var s=r.elements,a=r.ids,o=r.count,l=0,u=0;u<o;u++){var h=s[u],f=h._batchLocation;if(f>=0&&f<i&&e[f]===h){a[u]=f;continue}for(;l<i;){var c=e[l];if(c&&c._batchEnabled===n&&c._batchLocation===l){l++;continue}a[u]=l,h._batchLocation=l,e[l]=h;break}}},t.prototype.destroy=function(){this.renderer=null},t})(),ul=0,Jv=(function(){function t(r){this.renderer=r,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),r.view.addEventListener("webglcontextlost",this.handleContextLost,!1),r.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(r){this.gl=r,this.renderer.gl=r,this.renderer.CONTEXT_UID=ul++,r.isContextLost()&&r.getExtension("WEBGL_lose_context")&&r.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(r){this.gl=r,this.validateContext(r),this.renderer.gl=r,this.renderer.CONTEXT_UID=ul++,this.renderer.runners.contextChange.emit(r)},t.prototype.initFromOptions=function(r){var e=this.createContext(this.renderer.view,r);this.initFromContext(e)},t.prototype.createContext=function(r,e){var n;if(et.PREFER_ENV>=ee.WEBGL2&&(n=r.getContext("webgl2",e)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=r.getContext("webgl",e)||r.getContext("experimental-webgl",e),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var r=this.gl,e={anisotropicFiltering:r.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:r.getExtension("OES_texture_float_linear"),s3tc:r.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:r.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:r.getExtension("WEBGL_compressed_texture_etc"),etc1:r.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:r.getExtension("WEBGL_compressed_texture_atc"),astc:r.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:r.getExtension("WEBGL_draw_buffers"),depthTexture:r.getExtension("WEBGL_depth_texture"),loseContext:r.getExtension("WEBGL_lose_context"),vertexArrayObject:r.getExtension("OES_vertex_array_object")||r.getExtension("MOZ_OES_vertex_array_object")||r.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:r.getExtension("OES_element_index_uint"),floatTexture:r.getExtension("OES_texture_float"),floatTextureLinear:r.getExtension("OES_texture_float_linear"),textureHalfFloat:r.getExtension("OES_texture_half_float"),textureHalfFloatLinear:r.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:r.getExtension("EXT_color_buffer_float")})},t.prototype.handleContextLost=function(r){r.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var r=this.renderer.view;this.renderer=null,r.removeEventListener("webglcontextlost",this.handleContextLost),r.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(r){var e=r.getContextAttributes(),n="WebGL2RenderingContext"in self&&r instanceof self.WebGL2RenderingContext;n&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var i=n||!!r.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t})(),Qv=(function(){function t(r){this.framebuffer=r,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=wt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return t})(),t_=new ut,e_=(function(){function t(r){this.renderer=r,this.managedFramebuffers=[],this.unknownFramebuffer=new _s(10,10),this.msaaSamples=null}return t.prototype.contextChange=function(){var r=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ut,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var e=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;et.PREFER_ENV===ee.WEBGL_LEGACY&&(e=null,n=null),e?r.drawBuffers=function(i){return e.drawBuffersWEBGL(i)}:(this.hasMRT=!1,r.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},t.prototype.bind=function(r,e,n){n===void 0&&(n=0);var i=this.gl;if(r){var s=r.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(r);this.current!==r&&(this.current=r,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==n&&(r.dirtyId++,r.dirtyFormat++,s.mipLevel=n),s.dirtyId!==r.dirtyId&&(s.dirtyId=r.dirtyId,s.dirtyFormat!==r.dirtyFormat?(s.dirtyFormat=r.dirtyFormat,s.dirtySize=r.dirtySize,this.updateFramebuffer(r,n)):s.dirtySize!==r.dirtySize&&(s.dirtySize=r.dirtySize,this.resizeFramebuffer(r)));for(var a=0;a<r.colorTextures.length;a++){var o=r.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}if(r.depthTexture&&this.renderer.texture.unbind(r.depthTexture),e){var l=e.width>>n,u=e.height>>n,h=l/e.width;this.setViewport(e.x*h,e.y*h,l,u)}else{var l=r.width>>n,u=r.height>>n;this.setViewport(0,0,l,u)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(r,e,n,i){var s=this.viewport;r=Math.round(r),e=Math.round(e),n=Math.round(n),i=Math.round(i),(s.width!==n||s.height!==i||s.x!==r||s.y!==e)&&(s.x=r,s.y=e,s.width=n,s.height=i,this.gl.viewport(r,e,n,i))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(r,e,n,i,s){s===void 0&&(s=Zr.COLOR|Zr.DEPTH);var a=this.gl;a.clearColor(r,e,n,i),a.clear(s)},t.prototype.initFramebuffer=function(r){var e=this.gl,n=new Qv(e.createFramebuffer());return n.multisample=this.detectSamples(r.multisample),r.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(r),r.disposeRunner.add(this),n},t.prototype.resizeFramebuffer=function(r){var e=this.gl,n=r.glFramebuffers[this.CONTEXT_UID];n.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,n.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,n.multisample,e.RGBA8,r.width,r.height)),n.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,n.stencil),n.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,n.multisample,e.DEPTH24_STENCIL8,r.width,r.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,r.width,r.height));var i=r.colorTextures,s=i.length;e.drawBuffers||(s=Math.min(s,1));for(var a=0;a<s;a++){var o=i[a],l=o.parentTextureArray||o;this.renderer.texture.bind(l,0)}r.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(r.depthTexture,0)},t.prototype.updateFramebuffer=function(r,e){var n=this.gl,i=r.glFramebuffers[this.CONTEXT_UID],s=r.colorTextures,a=s.length;n.drawBuffers||(a=Math.min(a,1)),i.multisample>1&&this.canMultisampleFramebuffer(r)?(i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.RGBA8,r.width,r.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));for(var o=[],l=0;l<a;l++){var u=s[l],h=u.parentTextureArray||u;this.renderer.texture.bind(h,0),!(l===0&&i.msaaBuffer)&&(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+l,u.target,h._glTextures[this.CONTEXT_UID].texture,e),o.push(n.COLOR_ATTACHMENT0+l))}if(o.length>1&&n.drawBuffers(o),r.depthTexture){var f=this.writeDepthTexture;if(f){var c=r.depthTexture;this.renderer.texture.bind(c,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,e)}}(r.stencil||r.depth)&&!(r.depthTexture&&this.writeDepthTexture)?(i.stencil=i.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.DEPTH24_STENCIL8,r.width,r.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,r.width,r.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,i.stencil)):i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)},t.prototype.canMultisampleFramebuffer=function(r){return this.renderer.context.webGLVersion!==1&&r.colorTextures.length<=1&&!r.depthTexture},t.prototype.detectSamples=function(r){var e=this.msaaSamples,n=wt.NONE;if(r<=1||e===null)return n;for(var i=0;i<e.length;i++)if(e[i]<=r){n=e[i];break}return n===1&&(n=wt.NONE),n},t.prototype.blit=function(r,e,n){var i=this,s=i.current,a=i.renderer,o=i.gl,l=i.CONTEXT_UID;if(a.context.webGLVersion===2&&s){var u=s.glFramebuffers[l];if(u){if(!r){if(!u.msaaBuffer)return;var h=s.colorTextures[0];if(!h)return;u.blitFramebuffer||(u.blitFramebuffer=new _s(s.width,s.height),u.blitFramebuffer.addColorTexture(0,h)),r=u.blitFramebuffer,r.colorTextures[0]!==h&&(r.colorTextures[0]=h,r.dirtyId++,r.dirtyFormat++),(r.width!==s.width||r.height!==s.height)&&(r.width=s.width,r.height=s.height,r.dirtyId++,r.dirtySize++)}e||(e=t_,e.width=s.width,e.height=s.height),n||(n=e);var f=e.width===n.width&&e.height===n.height;this.bind(r),o.bindFramebuffer(o.READ_FRAMEBUFFER,u.framebuffer),o.blitFramebuffer(e.x,e.y,e.width,e.height,n.x,n.y,n.width,n.height,o.COLOR_BUFFER_BIT,f?o.NEAREST:o.LINEAR)}}},t.prototype.disposeFramebuffer=function(r,e){var n=r.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(n){delete r.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(r);s>=0&&this.managedFramebuffers.splice(s,1),r.disposeRunner.remove(this),e||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&n.blitFramebuffer.dispose()}},t.prototype.disposeAll=function(r){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<e.length;n++)this.disposeFramebuffer(e[n],r)},t.prototype.forceStencil=function(){var r=this.current;if(r){var e=r.glFramebuffers[this.CONTEXT_UID];if(!(!e||e.stencil)){r.stencil=!0;var n=r.width,i=r.height,s=this.gl,a=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a),e.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,e.multisample,s.DEPTH24_STENCIL8,n,i):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,n,i),e.stencil=a,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new ut},t.prototype.destroy=function(){this.renderer=null},t})(),Ci={5126:4,5123:2,5121:1},r_=(function(){function t(r){this.renderer=r,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return t.prototype.contextChange=function(){this.disposeAll(!0);var r=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){var n=this.renderer.context.extensions.vertexArrayObject;et.PREFER_ENV===ee.WEBGL_LEGACY&&(n=null),n?(r.createVertexArray=function(){return n.createVertexArrayOES()},r.bindVertexArray=function(s){return n.bindVertexArrayOES(s)},r.deleteVertexArray=function(s){return n.deleteVertexArrayOES(s)}):(this.hasVao=!1,r.createVertexArray=function(){return null},r.bindVertexArray=function(){return null},r.deleteVertexArray=function(){return null})}if(e.webGLVersion!==2){var i=r.getExtension("ANGLE_instanced_arrays");i?(r.vertexAttribDivisor=function(s,a){return i.vertexAttribDivisorANGLE(s,a)},r.drawElementsInstanced=function(s,a,o,l,u){return i.drawElementsInstancedANGLE(s,a,o,l,u)},r.drawArraysInstanced=function(s,a,o,l){return i.drawArraysInstancedANGLE(s,a,o,l)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex},t.prototype.bind=function(r,e){e=e||this.renderer.shader.shader;var n=this.gl,i=r.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[r.id]=r,r.disposeRunner.add(this),r.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);var a=i[e.program.id]||this.initGeometryVao(r,e,s);this._activeGeometry=r,this._activeVao!==a&&(this._activeVao=a,this.hasVao?n.bindVertexArray(a):this.activateVao(r,e.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var r=this._activeGeometry,e=this.renderer.buffer,n=0;n<r.buffers.length;n++){var i=r.buffers[n];e.update(i)}},t.prototype.checkCompatibility=function(r,e){var n=r.attributes,i=e.attributeData;for(var s in i)if(!n[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},t.prototype.getSignature=function(r,e){var n=r.attributes,i=e.attributeData,s=["g",r.id];for(var a in n)i[a]&&s.push(a);return s.join("-")},t.prototype.initGeometryVao=function(r,e,n){n===void 0&&(n=!0);var i=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,o=e.program;o.glPrograms[s]||this.renderer.shader.generateProgram(e),this.checkCompatibility(r,o);var l=this.getSignature(r,o),u=r.glVertexArrayObjects[this.CONTEXT_UID],h=u[l];if(h)return u[o.id]=h,h;var f=r.buffers,c=r.attributes,d={},v={};for(var _ in f)d[_]=0,v[_]=0;for(var _ in c)!c[_].size&&o.attributeData[_]?c[_].size=o.attributeData[_].size:c[_].size||console.warn("PIXI Geometry attribute '"+_+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[_].buffer]+=c[_].size*Ci[c[_].type];for(var _ in c){var p=c[_],m=p.size;p.stride===void 0&&(d[p.buffer]===m*Ci[p.type]?p.stride=0:p.stride=d[p.buffer]),p.start===void 0&&(p.start=v[p.buffer],v[p.buffer]+=m*Ci[p.type])}h=i.createVertexArray(),i.bindVertexArray(h);for(var E=0;E<f.length;E++){var I=f[E];a.bind(I),n&&I._glBuffers[s].refCount++}return this.activateVao(r,o),this._activeVao=h,u[o.id]=h,u[l]=h,h},t.prototype.disposeGeometry=function(r,e){var n;if(this.managedGeometries[r.id]){delete this.managedGeometries[r.id];var i=r.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,a=r.buffers,o=(n=this.renderer)===null||n===void 0?void 0:n.buffer;if(r.disposeRunner.remove(this),!!i){if(o)for(var l=0;l<a.length;l++){var u=a[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!e&&o.dispose(a[l],e))}if(!e){for(var h in i)if(h[0]==="g"){var f=i[h];this._activeVao===f&&this.unbind(),s.deleteVertexArray(f)}}delete r.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(r){for(var e=Object.keys(this.managedGeometries),n=0;n<e.length;n++)this.disposeGeometry(this.managedGeometries[e[n]],r)},t.prototype.activateVao=function(r,e){var n=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,a=r.buffers,o=r.attributes;r.indexBuffer&&s.bind(r.indexBuffer);var l=null;for(var u in o){var h=o[u],f=a[h.buffer],c=f._glBuffers[i];if(e.attributeData[u]){l!==c&&(s.bind(f),l=c);var d=e.attributeData[u].location;if(n.enableVertexAttribArray(d),n.vertexAttribPointer(d,h.size,h.type||n.FLOAT,h.normalized,h.stride,h.start),h.instance)if(this.hasInstance)n.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},t.prototype.draw=function(r,e,n,i){var s=this.gl,a=this._activeGeometry;if(a.indexBuffer){var o=a.indexBuffer.data.BYTES_PER_ELEMENT,l=o===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;o===2||o===4&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(r,e||a.indexBuffer.data.length,l,(n||0)*o,i||1):s.drawElements(r,e||a.indexBuffer.data.length,l,(n||0)*o):console.warn("unsupported index buffer type: uint32")}else a.instanced?s.drawArraysInstanced(r,n,e||a.getSize(),i||1):s.drawArrays(r,n,e||a.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t.prototype.destroy=function(){this.renderer=null},t})(),n_=(function(){function t(r){r===void 0&&(r=null),this.type=Ct.NONE,this.autoDetect=!0,this.maskObject=r||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=et.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(t.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(r){r?this._filters?this._filters[0]=r:this._filters=[r]:this._filters=null},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Ct.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},t.prototype.copyCountersOrReset=function(r){r?(this._stencilCounter=r._stencilCounter,this._scissorCounter=r._scissorCounter,this._scissorRect=r._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t})();function hl(t,r,e){var n=t.createShader(r);return t.shaderSource(n,e),t.compileShader(n),n}function cl(t,r){var e=t.getShaderSource(r).split(`
`).map(function(u,h){return h+": "+u}),n=t.getShaderInfoLog(r),i=n.split(`
`),s={},a=i.map(function(u){return parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(u){return u&&!s[u]?(s[u]=!0,!0):!1}),o=[""];a.forEach(function(u){e[u-1]="%c"+e[u-1]+"%c",o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var l=e.join(`
`);o[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,o),console.groupEnd()}function i_(t,r,e,n){t.getProgramParameter(r,t.LINK_STATUS)||(t.getShaderParameter(e,t.COMPILE_STATUS)||cl(t,e),t.getShaderParameter(n,t.COMPILE_STATUS)||cl(t,n),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(r)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(r)))}function Ai(t){for(var r=new Array(t),e=0;e<r.length;e++)r[e]=!1;return r}function ph(t,r){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*r);case"vec3":return new Float32Array(3*r);case"vec4":return new Float32Array(4*r);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*r);case"ivec3":return new Int32Array(3*r);case"ivec4":return new Int32Array(4*r);case"uvec2":return new Uint32Array(2*r);case"uvec3":return new Uint32Array(3*r);case"uvec4":return new Uint32Array(4*r);case"bool":return!1;case"bvec2":return Ai(2*r);case"bvec3":return Ai(3*r);case"bvec4":return Ai(4*r);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var vh={},Je=vh;function s_(){if(Je===vh||Je&&Je.isContextLost()){var t=document.createElement("canvas"),r=void 0;et.PREFER_ENV>=ee.WEBGL2&&(r=t.getContext("webgl2",{})),r||(r=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),r?r.getExtension("WEBGL_draw_buffers"):r=null),Je=r}return Je}var Ur;function a_(){if(!Ur){Ur=Vt.MEDIUM;var t=s_();if(t&&t.getShaderPrecisionFormat){var r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);Ur=r.precision?Vt.HIGH:Vt.MEDIUM}}return Ur}function fl(t,r,e){if(t.substring(0,9)!=="precision"){var n=r;return r===Vt.HIGH&&e!==Vt.HIGH&&(n=Vt.MEDIUM),"precision "+n+` float;
`+t}else if(e!==Vt.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}var o_={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function _h(t){return o_[t]}var Lr=null,dl={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function mh(t,r){if(!Lr){var e=Object.keys(dl);Lr={};for(var n=0;n<e.length;++n){var i=e[n];Lr[t[i]]=dl[i]}}return Lr[r]}var qe=[{test:function(t){return t.type==="float"&&t.size===1},code:function(t){return`
            if(uv["`+t+'"] !== ud["'+t+`"].value)
            {
                ud["`+t+'"].value = uv["'+t+`"]
                gl.uniform1f(ud["`+t+'"].location, uv["'+t+`"])
            }
            `}},{test:function(t){return(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray},code:function(t){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+t+`"], t);

            if(ud["`+t+`"].value !== t)
            {
                ud["`+t+`"].value = t;
                gl.uniform1i(ud["`+t+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(t,r){return t.type==="mat3"&&t.size===1&&r.a!==void 0},code:function(t){return`
            gl.uniformMatrix3fv(ud["`+t+'"].location, false, uv["'+t+`"].toArray(true));
            `},codeUbo:function(t){return`
                var `+t+"_matrix = uv."+t+`.toArray(true);

                data[offset] = `+t+`_matrix[0];
                data[offset+1] = `+t+`_matrix[1];
                data[offset+2] = `+t+`_matrix[2];
        
                data[offset + 4] = `+t+`_matrix[3];
                data[offset + 5] = `+t+`_matrix[4];
                data[offset + 6] = `+t+`_matrix[5];
        
                data[offset + 8] = `+t+`_matrix[6];
                data[offset + 9] = `+t+`_matrix[7];
                data[offset + 10] = `+t+`_matrix[8];
            `}},{test:function(t,r){return t.type==="vec2"&&t.size===1&&r.x!==void 0},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+t+`"].location, v.x, v.y);
                }`},codeUbo:function(t){return`
                v = uv.`+t+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(t){return t.type==="vec2"&&t.size===1},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+t+`"].location, v[0], v[1]);
                }
            `}},{test:function(t,r){return t.type==="vec4"&&t.size===1&&r.width!==void 0},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+t+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(t){return`
                    v = uv.`+t+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(t){return t.type==="vec4"&&t.size===1},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+t+`"].location, v[0], v[1], v[2], v[3])
                }`}}],l_={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},u_={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function h_(t,r){var e,n=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var i in t.uniforms){var s=r[i];if(!s){!((e=t.uniforms[i])===null||e===void 0)&&e.group&&(t.uniforms[i].ubo?n.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):n.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var a=t.uniforms[i],o=!1,l=0;l<qe.length;l++)if(qe[l].test(s,a)){n.push(qe[l].code(i,a)),o=!0;break}if(!o){var u=s.size===1?l_:u_,h=u[s.type].replace("location",'ud["'+i+'"].location');n.push(`
            cu = ud["`+i+`"];
            cv = cu.value;
            v = uv["`+i+`"];
            `+h+";")}}return new Function("ud","uv","renderer","syncData",n.join(`
`))}var c_=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function f_(t){for(var r="",e=0;e<t;++e)e>0&&(r+=`
else `),e<t-1&&(r+="if(test == "+e+".0){}");return r}function d_(t,r){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var e=r.createShader(r.FRAGMENT_SHADER);;){var n=c_.replace(/%forloop%/gi,f_(t));if(r.shaderSource(e,n),r.compileShader(e),!r.getShaderParameter(e,r.COMPILE_STATUS))t=t/2|0;else break}return t}var Qe;function p_(){if(typeof Qe=="boolean")return Qe;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Qe=t({a:"b"},"a","b")===!0}catch{Qe=!1}return Qe}var v_=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,__=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,m_=0,Fr={},xr=(function(){function t(r,e,n){n===void 0&&(n="pixi-shader"),this.id=m_++,this.vertexSrc=r||t.defaultVertexSrc,this.fragmentSrc=e||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),Fr[n]?(Fr[n]++,n+="-"+Fr[n]):Fr[n]=1,this.vertexSrc="#define SHADER_NAME "+n+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+n+`
`+this.fragmentSrc,this.vertexSrc=fl(this.vertexSrc,et.PRECISION_VERTEX,Vt.HIGH),this.fragmentSrc=fl(this.fragmentSrc,et.PRECISION_FRAGMENT,a_())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(t,"defaultVertexSrc",{get:function(){return __},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return v_},enumerable:!1,configurable:!0}),t.from=function(r,e,n){var i=r+e,s=Bo[i];return s||(Bo[i]=s=new t(r,e,n)),s},t})(),he=(function(){function t(r,e){this.uniformBindCount=0,this.program=r,e?e instanceof Ce?this.uniformGroup=e:this.uniformGroup=new Ce(e):this.uniformGroup=new Ce({})}return t.prototype.checkUniformExists=function(r,e){if(e.uniforms[r])return!0;for(var n in e.uniforms){var i=e.uniforms[n];if(i.group&&this.checkUniformExists(r,i))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(r,e,n){var i=xr.from(r,e);return new t(i,n)},t})(),Si=0,Pi=1,Ni=2,Oi=3,Ui=4,Li=5,Ne=(function(){function t(){this.data=0,this.blendMode=rt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(this.data&1<<Si)},set:function(r){!!(this.data&1<<Si)!==r&&(this.data^=1<<Si)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(this.data&1<<Pi)},set:function(r){!!(this.data&1<<Pi)!==r&&(this.data^=1<<Pi)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(this.data&1<<Ni)},set:function(r){!!(this.data&1<<Ni)!==r&&(this.data^=1<<Ni)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(this.data&1<<Oi)},set:function(r){!!(this.data&1<<Oi)!==r&&(this.data^=1<<Oi)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(this.data&1<<Li)},set:function(r){!!(this.data&1<<Li)!==r&&(this.data^=1<<Li)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<Ui)},set:function(r){!!(this.data&1<<Ui)!==r&&(this.data^=1<<Ui)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(r){this.blend=r!==rt.NONE,this._blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(r){this.offsets=!!r,this._polygonOffset=r},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},t.for2d=function(){var r=new t;return r.depthTest=!1,r.blend=!0,r},t})(),g_=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,y_=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,de=(function(t){pt(r,t);function r(e,n,i){var s=this,a=xr.from(e||r.defaultVertexSrc,n||r.defaultFragmentSrc);return s=t.call(this,a,i)||this,s.padding=0,s.resolution=et.FILTER_RESOLUTION,s.multisample=et.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new Ne,s}return r.prototype.apply=function(e,n,i,s,a){e.applyFilter(this,n,i,s)},Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._resolution=e},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultVertexSrc",{get:function(){return g_},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return y_},enumerable:!1,configurable:!0}),r})(he),b_=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,x_=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,pl=new Tt,Ws=(function(){function t(r,e){this._texture=r,this.mapCoord=new Tt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(r){this._texture=r,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(r,e){e===void 0&&(e=r);for(var n=this.mapCoord,i=0;i<r.length;i+=2){var s=r[i],a=r[i+1];e[i]=s*n.a+a*n.c+n.tx,e[i+1]=s*n.b+a*n.d+n.ty}return e},t.prototype.update=function(r){var e=this._texture;if(!e||!e.valid||!r&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var n=e._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var i=e.orig,s=e.trim;s&&(pl.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(pl));var a=e.baseTexture,o=this.uClampFrame,l=this.clampMargin/a.resolution,u=this.clampOffset;return o[0]=(e._frame.x+l+u)/a.width,o[1]=(e._frame.y+l+u)/a.height,o[2]=(e._frame.x+e._frame.width-l+u)/a.width,o[3]=(e._frame.y+e._frame.height-l+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,this.isSimple=e._frame.width===a.width&&e._frame.height===a.height&&e.rotate===0,!0},t})(),T_=(function(t){pt(r,t);function r(e,n,i){var s=this,a=null;return typeof e!="string"&&n===void 0&&i===void 0&&(a=e,e=void 0,n=void 0,i=void 0),s=t.call(this,e||b_,n||x_,i)||this,s.maskSprite=a,s.maskMatrix=new Tt,s}return Object.defineProperty(r.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),r.prototype.apply=function(e,n,i,s){var a=this._maskSprite,o=a._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Ws(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,n,i,s))},r})(de),E_=(function(){function t(r){this.renderer=r,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t.prototype.setMaskStack=function(r){this.maskStack=r,this.renderer.scissor.setMaskStack(r),this.renderer.stencil.setMaskStack(r)},t.prototype.push=function(r,e){var n=e;if(!n.isMaskData){var i=this.maskDataPool.pop()||new n_;i.pooled=!0,i.maskObject=e,n=i}var s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(s),n.autoDetect&&this.detect(n),n._target=r,n.type!==Ct.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case Ct.SCISSOR:this.renderer.scissor.push(n);break;case Ct.STENCIL:this.renderer.stencil.push(n);break;case Ct.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break}n.type===Ct.SPRITE&&this.maskStack.push(n)},t.prototype.pop=function(r){var e=this.maskStack.pop();if(!(!e||e._target!==r)){if(e.enabled)switch(e.type){case Ct.SCISSOR:this.renderer.scissor.pop();break;case Ct.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case Ct.SPRITE:this.popSpriteMask(e);break}if(e.reset(),e.pooled&&this.maskDataPool.push(e),this.maskStack.length!==0){var n=this.maskStack[this.maskStack.length-1];n.type===Ct.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}},t.prototype.detect=function(r){var e=r.maskObject;e.isSprite?r.type=Ct.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(r)?r.type=Ct.SCISSOR:r.type=Ct.STENCIL},t.prototype.pushSpriteMask=function(r){var e,n,i=r.maskObject,s=r._target,a=r._filters;a||(a=this.alphaMaskPool[this.alphaMaskIndex],a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new T_]));var o=this.renderer,l=o.renderTexture,u,h;if(l.current){var f=l.current;u=r.resolution||f.resolution,h=(e=r.multisample)!==null&&e!==void 0?e:f.multisample}else u=r.resolution||o.resolution,h=(n=r.multisample)!==null&&n!==void 0?n:o.multisample;a[0].resolution=u,a[0].multisample=h,a[0].maskSprite=i;var c=s.filterArea;s.filterArea=i.getBounds(!0),o.filter.push(s,a),s.filterArea=c,r._filters||this.alphaMaskIndex++},t.prototype.popSpriteMask=function(r){this.renderer.filter.pop(),r._filters?r._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},t.prototype.destroy=function(){this.renderer=null},t})(),gh=(function(){function t(r){this.renderer=r,this.maskStack=[],this.glConst=0}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(r){var e=this.renderer.gl,n=this.getStackLength();this.maskStack=r;var i=this.getStackLength();i!==n&&(i===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){this.renderer=null,this.maskStack=null},t})(),vl=new Tt,w_=(function(t){pt(r,t);function r(e){var n=t.call(this,e)||this;return n.glConst=WebGLRenderingContext.SCISSOR_TEST,n}return r.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},r.prototype.calcScissorRect=function(e){if(!e._scissorRectLocal){var n=e._scissorRect,i=e.maskObject,s=this.renderer,a=s.renderTexture;i.renderable=!0;var o=i.getBounds();this.roundFrameToPixels(o,a.current?a.current.resolution:s.resolution,a.sourceFrame,a.destinationFrame,s.projection.transform),i.renderable=!1,n&&o.fit(n),e._scissorRectLocal=o}},r.isMatrixRotated=function(e){if(!e)return!1;var n=e.a,i=e.b,s=e.c,a=e.d;return(Math.abs(i)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(n)>1e-4||Math.abs(a)>1e-4)},r.prototype.testScissor=function(e){var n=e.maskObject;if(!n.isFastRect||!n.isFastRect()||r.isMatrixRotated(n.worldTransform)||r.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);var i=e._scissorRectLocal;return i.width>0&&i.height>0},r.prototype.roundFrameToPixels=function(e,n,i,s,a){r.isMatrixRotated(a)||(a=a?vl.copyFrom(a):vl.identity(),a.translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.renderer.filter.transformAABB(a,e),e.fit(s),e.x=Math.round(e.x*n),e.y=Math.round(e.y*n),e.width=Math.round(e.width*n),e.height=Math.round(e.height*n))},r.prototype.push=function(e){e._scissorRectLocal||this.calcScissorRect(e);var n=this.renderer.gl;e._scissorRect||n.enable(n.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()},r.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},r.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,n;this.renderer.renderTexture.current?n=e.y:n=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,n,e.width,e.height)},r})(gh),I_=(function(t){pt(r,t);function r(e){var n=t.call(this,e)||this;return n.glConst=WebGLRenderingContext.STENCIL_TEST,n}return r.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},r.prototype.push=function(e){var n=e.maskObject,i=this.renderer.gl,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),i.enable(i.STENCIL_TEST)),e._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,s,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,this._useCurrent()},r.prototype.pop=function(e){var n=this.renderer.gl;this.getStackLength()===0?(n.disable(n.STENCIL_TEST),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT)):(n.colorMask(!1,!1,!1,!1),n.stencilOp(n.KEEP,n.KEEP,n.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},r.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},r})(gh),R_=(function(){function t(r){this.renderer=r,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Tt,this.transform=null}return t.prototype.update=function(r,e,n,i){this.destinationFrame=r||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||r,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(r,e,n,i){var s=this.projectionMatrix,a=i?-1:1;s.identity(),s.a=1/e.width*2,s.d=a*(1/e.height*2),s.tx=-1-e.x*s.a,s.ty=-a-e.y*s.d},t.prototype.setTransform=function(r){},t.prototype.destroy=function(){this.renderer=null},t})(),ge=new ut,tr=new ut,C_=(function(){function t(r){this.renderer=r,this.clearColor=r._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new ut,this.destinationFrame=new ut,this.viewportFrame=new ut}return t.prototype.bind=function(r,e,n){r===void 0&&(r=null);var i=this.renderer;this.current=r;var s,a,o;r?(s=r.baseTexture,o=s.resolution,e||(ge.width=r.frame.width,ge.height=r.frame.height,e=ge),n||(tr.x=r.frame.x,tr.y=r.frame.y,tr.width=e.width,tr.height=e.height,n=tr),a=s.framebuffer):(o=i.resolution,e||(ge.width=i.screen.width,ge.height=i.screen.height,e=ge),n||(n=ge,n.width=e.width,n.height=e.height));var l=this.viewportFrame;l.x=n.x*o,l.y=n.y*o,l.width=n.width*o,l.height=n.height*o,r||(l.y=i.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(a,l),this.renderer.projection.update(n,e,o,!a),r?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(n)},t.prototype.clear=function(r,e){this.current?r=r||this.current.baseTexture.clearColor:r=r||this.clearColor;var n=this.destinationFrame,i=this.current?this.current.baseTexture:this.renderer.screen,s=n.width!==i.width||n.height!==i.height;if(s){var a=this.viewportFrame,o=a.x,l=a.y,u=a.width,h=a.height;o=Math.round(o),l=Math.round(l),u=Math.round(u),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,l,u,h)}this.renderer.framebuffer.clear(r[0],r[1],r[2],r[3],e),s&&this.renderer.scissor.pop()},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t.prototype.destroy=function(){this.renderer=null},t})();function A_(t,r,e,n,i){e.buffer.update(i)}var S_={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},yh={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function P_(t){for(var r=t.map(function(l){return{data:l,offset:0,dataLen:0,dirty:0}}),e=0,n=0,i=0,s=0;s<r.length;s++){var a=r[s];if(e=yh[a.data.type],a.data.size>1&&(e=Math.max(e,16)*a.data.size),a.dataLen=e,n%e!==0&&n<16){var o=n%e%16;n+=o,i+=o}n+e>16?(i=Math.ceil(i/16)*16,a.offset=i,i+=e,n=e):(a.offset=i,n+=e,i+=e)}return i=Math.ceil(i/16)*16,{uboElements:r,size:i}}function N_(t,r){var e=[];for(var n in t)r[n]&&e.push(r[n]);return e.sort(function(i,s){return i.index-s.index}),e}function O_(t,r){if(!t.autoManage)return{size:0,syncFunc:A_};for(var e=N_(t.uniforms,r),n=P_(e),i=n.uboElements,s=n.size,a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],o=0;o<i.length;o++){for(var l=i[o],u=t.uniforms[l.data.name],h=l.data.name,f=!1,c=0;c<qe.length;c++){var d=qe[c];if(d.codeUbo&&d.test(l.data,u)){a.push("offset = "+l.offset/4+";",qe[c].codeUbo(l.data.name,u)),f=!0;break}}if(!f)if(l.data.size>1){var v=_h(l.data.type),_=Math.max(yh[l.data.type]/16,1),p=v/_,m=(4-p%4)%4;a.push(`
                cv = ud.`+h+`.value;
                v = uv.`+h+`;
                offset = `+l.offset/4+`;

                t = 0;

                for(var i=0; i < `+l.data.size*_+`; i++)
                {
                    for(var j = 0; j < `+p+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+m+`;
                }

                `)}else{var E=S_[l.data.type];a.push(`
                cv = ud.`+h+`.value;
                v = uv.`+h+`;
                offset = `+l.offset/4+`;
                `+E+`;
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}var U_=(function(){function t(r,e){this.program=r,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},t})();function L_(t,r){for(var e={},n=r.getProgramParameter(t,r.ACTIVE_ATTRIBUTES),i=0;i<n;i++){var s=r.getActiveAttrib(t,i);if(s.name.indexOf("gl_")!==0){var a=mh(r,s.type),o={type:a,name:s.name,size:_h(a),location:r.getAttribLocation(t,s.name)};e[s.name]=o}}return e}function F_(t,r){for(var e={},n=r.getProgramParameter(t,r.ACTIVE_UNIFORMS),i=0;i<n;i++){var s=r.getActiveUniform(t,i),a=s.name.replace(/\[.*?\]$/,""),o=!!s.name.match(/\[.*?\]$/),l=mh(r,s.type);e[a]={name:a,index:i,type:l,size:s.size,isArray:o,value:ph(l,s.size)}}return e}function M_(t,r){var e=hl(t,t.VERTEX_SHADER,r.vertexSrc),n=hl(t,t.FRAGMENT_SHADER,r.fragmentSrc),i=t.createProgram();if(t.attachShader(i,e),t.attachShader(i,n),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||i_(t,i,e,n),r.attributeData=L_(i,t),r.uniformData=F_(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(r.vertexSrc)){var s=Object.keys(r.attributeData);s.sort(function(h,f){return h>f?1:-1});for(var a=0;a<s.length;a++)r.attributeData[s[a]].location=a,t.bindAttribLocation(i,a,s[a]);t.linkProgram(i)}t.deleteShader(e),t.deleteShader(n);var o={};for(var a in r.uniformData){var l=r.uniformData[a];o[a]={location:t.getUniformLocation(i,a),value:ph(l.type,l.size)}}var u=new U_(i,o);return u}var B_=0,Mr={textureCount:0,uboCount:0},G_=(function(){function t(r){this.destroyed=!1,this.renderer=r,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=B_++}return t.prototype.systemCheck=function(){if(!p_())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(r){this.gl=r,this.reset()},t.prototype.bind=function(r,e){r.uniforms.globals=this.renderer.globalUniforms;var n=r.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(r);return this.shader=r,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),e||(Mr.textureCount=0,Mr.uboCount=0,this.syncUniformGroup(r.uniformGroup,Mr)),i},t.prototype.setUniforms=function(r){var e=this.shader.program,n=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(n.uniformData,r,this.renderer)},t.prototype.syncUniformGroup=function(r,e){var n=this.getGlProgram();(!r.static||r.dirtyId!==n.uniformDirtyGroups[r.id])&&(n.uniformDirtyGroups[r.id]=r.dirtyId,this.syncUniforms(r,n,e))},t.prototype.syncUniforms=function(r,e,n){var i=r.syncUniforms[this.shader.program.id]||this.createSyncGroups(r);i(e.uniformData,r.uniforms,this.renderer,n)},t.prototype.createSyncGroups=function(r){var e=this.getSignature(r,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=h_(r,this.shader.program.uniformData)),r.syncUniforms[this.shader.program.id]=this.cache[e],r.syncUniforms[this.shader.program.id]},t.prototype.syncUniformBufferGroup=function(r,e){var n=this.getGlProgram();if(!r.static||r.dirtyId!==0||!n.uniformGroups[r.id]){r.dirtyId=0;var i=n.uniformGroups[r.id]||this.createSyncBufferGroup(r,n,e);r.buffer.update(),i(n.uniformData,r.uniforms,this.renderer,Mr,r.buffer)}this.renderer.buffer.bindBufferBase(r.buffer,n.uniformBufferBindings[e])},t.prototype.createSyncBufferGroup=function(r,e,n){var i=this.renderer.gl;this.renderer.buffer.bind(r.buffer);var s=this.gl.getUniformBlockIndex(e.program,n);e.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(e.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(r,this.shader.program.uniformData,"ubo"),o=this._uboCache[a];if(o||(o=this._uboCache[a]=O_(r,this.shader.program.uniformData)),r.autoManage){var l=new Float32Array(o.size/4);r.buffer.update(l)}return e.uniformGroups[r.id]=o.syncFunc,e.uniformGroups[r.id]},t.prototype.getSignature=function(r,e,n){var i=r.uniforms,s=[n+"-"];for(var a in i)s.push(a),e[a]&&s.push(e[a].type);return s.join("-")},t.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateProgram=function(r){var e=this.gl,n=r.program,i=M_(e,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},t})();function D_(t,r){return r===void 0&&(r=[]),r[rt.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[rt.ADD]=[t.ONE,t.ONE],r[rt.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],r[rt.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],r[rt.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[rt.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[rt.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[rt.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[rt.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[rt.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[rt.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[rt.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[rt.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[rt.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[rt.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[rt.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[rt.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[rt.NONE]=[0,0],r[rt.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],r[rt.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],r[rt.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],r[rt.SRC_IN]=[t.DST_ALPHA,t.ZERO],r[rt.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],r[rt.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],r[rt.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],r[rt.DST_IN]=[t.ZERO,t.SRC_ALPHA],r[rt.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],r[rt.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],r[rt.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],r[rt.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],r}var k_=0,H_=1,X_=2,j_=3,V_=4,q_=5,z_=(function(){function t(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=rt.NONE,this._blendEq=!1,this.map=[],this.map[k_]=this.setBlend,this.map[H_]=this.setOffset,this.map[X_]=this.setCullFace,this.map[j_]=this.setDepthTest,this.map[V_]=this.setFrontFace,this.map[q_]=this.setDepthMask,this.checks=[],this.defaultState=new Ne,this.defaultState.blend=!0}return t.prototype.contextChange=function(r){this.gl=r,this.blendModes=D_(r),this.set(this.defaultState),this.reset()},t.prototype.set=function(r){if(r=r||this.defaultState,this.stateId!==r.data){for(var e=this.stateId^r.data,n=0;e;)e&1&&this.map[n].call(this,!!(r.data&1<<n)),e=e>>1,n++;this.stateId=r.data}for(var n=0;n<this.checks.length;n++)this.checks[n](this,r)},t.prototype.forceState=function(r){r=r||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(r.data&1<<e));for(var e=0;e<this.checks.length;e++)this.checks[e](this,r);this.stateId=r.data},t.prototype.setBlend=function(r){this.updateCheck(t.checkBlendMode,r),this.gl[r?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(r){this.updateCheck(t.checkPolygonOffset,r),this.gl[r?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(r){this.gl[r?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setDepthMask=function(r){this.gl.depthMask(r)},t.prototype.setCullFace=function(r){this.gl[r?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(r){this.gl.frontFace(this.gl[r?"CW":"CCW"])},t.prototype.setBlendMode=function(r){if(r!==this.blendMode){this.blendMode=r;var e=this.blendModes[r],n=this.gl;e.length===2?n.blendFunc(e[0],e[1]):n.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,n.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},t.prototype.setPolygonOffset=function(r,e){this.gl.polygonOffset(r,e)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(r,e){var n=this.checks.indexOf(r);e&&n===-1?this.checks.push(r):!e&&n!==-1&&this.checks.splice(n,1)},t.checkBlendMode=function(r,e){r.setBlendMode(e.blendMode)},t.checkPolygonOffset=function(r,e){r.setPolygonOffset(1,e.polygonOffset)},t.prototype.destroy=function(){this.gl=null},t})(),W_=(function(){function t(r){this.renderer=r,this.count=0,this.checkCount=0,this.maxIdle=et.GC_MAX_IDLE,this.checkCountMax=et.GC_MAX_CHECK_COUNT,this.mode=et.GC_MODE}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==ls.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var r=this.renderer.texture,e=r.managedTextures,n=!1,i=0;i<e.length;i++){var s=e[i];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(r.destroyTexture(s,!0),e[i]=null,n=!0)}if(n){for(var a=0,i=0;i<e.length;i++)e[i]!==null&&(e[a++]=e[i]);e.length=a}},t.prototype.unload=function(r){var e=this.renderer.texture,n=r._texture;n&&!n.framebuffer&&e.destroyTexture(n);for(var i=r.children.length-1;i>=0;i--)this.unload(r.children[i])},t.prototype.destroy=function(){this.renderer=null},t})();function $_(t){var r,e,n,i,s,a,o,l,u,h,f,c,d,v,_,p,m,E,I,C,y,w,T;return"WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext?T=(r={},r[it.UNSIGNED_BYTE]=(e={},e[z.RGBA]=t.RGBA8,e[z.RGB]=t.RGB8,e[z.RG]=t.RG8,e[z.RED]=t.R8,e[z.RGBA_INTEGER]=t.RGBA8UI,e[z.RGB_INTEGER]=t.RGB8UI,e[z.RG_INTEGER]=t.RG8UI,e[z.RED_INTEGER]=t.R8UI,e[z.ALPHA]=t.ALPHA,e[z.LUMINANCE]=t.LUMINANCE,e[z.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,e),r[it.BYTE]=(n={},n[z.RGBA]=t.RGBA8_SNORM,n[z.RGB]=t.RGB8_SNORM,n[z.RG]=t.RG8_SNORM,n[z.RED]=t.R8_SNORM,n[z.RGBA_INTEGER]=t.RGBA8I,n[z.RGB_INTEGER]=t.RGB8I,n[z.RG_INTEGER]=t.RG8I,n[z.RED_INTEGER]=t.R8I,n),r[it.UNSIGNED_SHORT]=(i={},i[z.RGBA_INTEGER]=t.RGBA16UI,i[z.RGB_INTEGER]=t.RGB16UI,i[z.RG_INTEGER]=t.RG16UI,i[z.RED_INTEGER]=t.R16UI,i[z.DEPTH_COMPONENT]=t.DEPTH_COMPONENT16,i),r[it.SHORT]=(s={},s[z.RGBA_INTEGER]=t.RGBA16I,s[z.RGB_INTEGER]=t.RGB16I,s[z.RG_INTEGER]=t.RG16I,s[z.RED_INTEGER]=t.R16I,s),r[it.UNSIGNED_INT]=(a={},a[z.RGBA_INTEGER]=t.RGBA32UI,a[z.RGB_INTEGER]=t.RGB32UI,a[z.RG_INTEGER]=t.RG32UI,a[z.RED_INTEGER]=t.R32UI,a[z.DEPTH_COMPONENT]=t.DEPTH_COMPONENT24,a),r[it.INT]=(o={},o[z.RGBA_INTEGER]=t.RGBA32I,o[z.RGB_INTEGER]=t.RGB32I,o[z.RG_INTEGER]=t.RG32I,o[z.RED_INTEGER]=t.R32I,o),r[it.FLOAT]=(l={},l[z.RGBA]=t.RGBA32F,l[z.RGB]=t.RGB32F,l[z.RG]=t.RG32F,l[z.RED]=t.R32F,l[z.DEPTH_COMPONENT]=t.DEPTH_COMPONENT32F,l),r[it.HALF_FLOAT]=(u={},u[z.RGBA]=t.RGBA16F,u[z.RGB]=t.RGB16F,u[z.RG]=t.RG16F,u[z.RED]=t.R16F,u),r[it.UNSIGNED_SHORT_5_6_5]=(h={},h[z.RGB]=t.RGB565,h),r[it.UNSIGNED_SHORT_4_4_4_4]=(f={},f[z.RGBA]=t.RGBA4,f),r[it.UNSIGNED_SHORT_5_5_5_1]=(c={},c[z.RGBA]=t.RGB5_A1,c),r[it.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[z.RGBA]=t.RGB10_A2,d[z.RGBA_INTEGER]=t.RGB10_A2UI,d),r[it.UNSIGNED_INT_10F_11F_11F_REV]=(v={},v[z.RGB]=t.R11F_G11F_B10F,v),r[it.UNSIGNED_INT_5_9_9_9_REV]=(_={},_[z.RGB]=t.RGB9_E5,_),r[it.UNSIGNED_INT_24_8]=(p={},p[z.DEPTH_STENCIL]=t.DEPTH24_STENCIL8,p),r[it.FLOAT_32_UNSIGNED_INT_24_8_REV]=(m={},m[z.DEPTH_STENCIL]=t.DEPTH32F_STENCIL8,m),r):T=(E={},E[it.UNSIGNED_BYTE]=(I={},I[z.RGBA]=t.RGBA,I[z.RGB]=t.RGB,I[z.ALPHA]=t.ALPHA,I[z.LUMINANCE]=t.LUMINANCE,I[z.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,I),E[it.UNSIGNED_SHORT_5_6_5]=(C={},C[z.RGB]=t.RGB,C),E[it.UNSIGNED_SHORT_4_4_4_4]=(y={},y[z.RGBA]=t.RGBA,y),E[it.UNSIGNED_SHORT_5_5_5_1]=(w={},w[z.RGBA]=t.RGBA,w),E),T}var Fi=(function(){function t(r){this.texture=r,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=it.UNSIGNED_BYTE,this.internalFormat=z.RGBA,this.samplerType=0}return t})(),Y_=(function(){function t(r){this.renderer=r,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new lt,this.hasIntegerTextures=!1}return t.prototype.contextChange=function(){var r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=$_(r);var e=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var n=0;n<e;n++)this.boundTextures[n]=null;this.emptyTextures={};var i=new Fi(r.createTexture());r.bindTexture(r.TEXTURE_2D,i.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[r.TEXTURE_2D]=i,this.emptyTextures[r.TEXTURE_CUBE_MAP]=new Fi(r.createTexture()),r.bindTexture(r.TEXTURE_CUBE_MAP,this.emptyTextures[r.TEXTURE_CUBE_MAP].texture);for(var n=0;n<6;n++)r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,null);r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MIN_FILTER,r.LINEAR);for(var n=0;n<this.boundTextures.length;n++)this.bind(null,n)},t.prototype.bind=function(r,e){e===void 0&&(e=0);var n=this.gl;if(r=r?.castToBaseTexture(),r&&r.valid&&!r.parentTextureArray){r.touched=this.renderer.textureGC.count;var i=r._glTextures[this.CONTEXT_UID]||this.initTexture(r);this.boundTextures[e]!==r&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(r.target,i.texture)),i.dirtyId!==r.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),this.updateTexture(r)),this.boundTextures[e]=r}else this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[e]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]=this.unknownTexture},t.prototype.unbind=function(r){var e=this,n=e.gl,i=e.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<i.length;s++)i[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<i.length;s++)i[s]===r&&(this.currentLocation!==s&&(n.activeTexture(n.TEXTURE0+s),this.currentLocation=s),n.bindTexture(r.target,this.emptyTextures[r.target].texture),i[s]=null)},t.prototype.ensureSamplerType=function(r){var e=this,n=e.boundTextures,i=e.hasIntegerTextures,s=e.CONTEXT_UID;if(i)for(var a=r-1;a>=0;--a){var o=n[a];if(o){var l=o._glTextures[s];l.samplerType!==Jr.FLOAT&&this.renderer.texture.unbind(o)}}},t.prototype.initTexture=function(r){var e=new Fi(this.gl.createTexture());return e.dirtyId=-1,r._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(r),r.on("dispose",this.destroyTexture,this),e},t.prototype.initTextureType=function(r,e){var n,i;e.internalFormat=(i=(n=this.internalFormats[r.type])===null||n===void 0?void 0:n[r.format])!==null&&i!==void 0?i:r.format,this.webGLVersion===2&&r.type===it.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=r.type},t.prototype.updateTexture=function(r){var e=r._glTextures[this.CONTEXT_UID];if(e){var n=this.renderer;if(this.initTextureType(r,e),r.resource&&r.resource.upload(n,r,e))e.samplerType!==Jr.FLOAT&&(this.hasIntegerTextures=!0);else{var i=r.realWidth,s=r.realHeight,a=n.gl;(e.width!==i||e.height!==s||e.dirtyId<0)&&(e.width=i,e.height=s,a.texImage2D(r.target,0,e.internalFormat,i,s,0,r.format,e.type,null))}r.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(r),e.dirtyId=r.dirtyId}},t.prototype.destroyTexture=function(r,e){var n=this.gl;if(r=r.castToBaseTexture(),r._glTextures[this.CONTEXT_UID]&&(this.unbind(r),n.deleteTexture(r._glTextures[this.CONTEXT_UID].texture),r.off("dispose",this.destroyTexture,this),delete r._glTextures[this.CONTEXT_UID],!e)){var i=this.managedTextures.indexOf(r);i!==-1&&Ve(this.managedTextures,i,1)}},t.prototype.updateTextureStyle=function(r){var e=r._glTextures[this.CONTEXT_UID];e&&((r.mipmap===ce.POW2||this.webGLVersion!==2)&&!r.isPowerOfTwo?e.mipmap=!1:e.mipmap=r.mipmap>=1,this.webGLVersion!==2&&!r.isPowerOfTwo?e.wrapMode=Ut.CLAMP:e.wrapMode=r.wrapMode,r.resource&&r.resource.style(this.renderer,r,e)||this.setStyle(r,e),e.dirtyStyleId=r.dirtyStyleId)},t.prototype.setStyle=function(r,e){var n=this.gl;if(e.mipmap&&r.mipmap!==ce.ON_MANUAL&&n.generateMipmap(r.target),n.texParameteri(r.target,n.TEXTURE_WRAP_S,e.wrapMode),n.texParameteri(r.target,n.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){n.texParameteri(r.target,n.TEXTURE_MIN_FILTER,r.scaleMode===Ot.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var i=this.renderer.context.extensions.anisotropicFiltering;if(i&&r.anisotropicLevel>0&&r.scaleMode===Ot.LINEAR){var s=Math.min(r.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(r.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(r.target,n.TEXTURE_MIN_FILTER,r.scaleMode===Ot.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(r.target,n.TEXTURE_MAG_FILTER,r.scaleMode===Ot.LINEAR?n.LINEAR:n.NEAREST)},t.prototype.destroy=function(){this.renderer=null},t})(),Mi=new Tt,K_=(function(t){pt(r,t);function r(e,n){e===void 0&&(e=cr.UNKNOWN);var i=t.call(this)||this;return n=Object.assign({},et.RENDER_OPTIONS,n),i.options=n,i.type=e,i.screen=new ut(0,0,n.width,n.height),i.view=n.view||document.createElement("canvas"),i.resolution=n.resolution||et.RESOLUTION,i.useContextAlpha=n.useContextAlpha,i.autoDensity=!!n.autoDensity,i.preserveDrawingBuffer=n.preserveDrawingBuffer,i.clearBeforeRender=n.clearBeforeRender,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,1],i._backgroundColorString="#000000",i.backgroundColor=n.backgroundColor||i._backgroundColor,i.backgroundAlpha=n.backgroundAlpha,n.transparent!==void 0&&(fr("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),i.useContextAlpha=n.transparent,i.backgroundAlpha=n.transparent?0:1),i._lastObjectRendered=null,i.plugins={},i}return r.prototype.initPlugins=function(e){for(var n in e)this.plugins[n]=new e[n](this)},Object.defineProperty(r.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),r.prototype.resize=function(e,n){this.view.width=Math.round(e*this.resolution),this.view.height=Math.round(n*this.resolution);var i=this.view.width/this.resolution,s=this.view.height/this.resolution;this.screen.width=i,this.screen.height=s,this.autoDensity&&(this.view.style.width=i+"px",this.view.style.height=s+"px"),this.emit("resize",i,s)},r.prototype.generateTexture=function(e,n,i,s){n===void 0&&(n={}),typeof n=="number"&&(fr("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),n={scaleMode:n,resolution:i,region:s});var a=n.region,o=Ov(n,["region"]);s=a||e.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var l=Pe.create(vs({width:s.width,height:s.height},o));return Mi.tx=-s.x,Mi.ty=-s.y,this.render(e,{renderTexture:l,clear:!1,transform:Mi,skipUpdateTransform:!!e.parent}),l},r.prototype.destroy=function(e){for(var n in this.plugins)this.plugins[n].destroy(),this.plugins[n]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var i=this;i.plugins=null,i.type=cr.UNKNOWN,i.view=null,i.screen=null,i._tempDisplayObjectParent=null,i.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(r.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=Qu(e),ze(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(e){this._backgroundColorRgba[3]=e},enumerable:!1,configurable:!0}),r})(yr),Z_=(function(){function t(r){this.buffer=r||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return t})(),J_=(function(){function t(r){this.renderer=r,this.managedBuffers={},this.boundBufferBases={}}return t.prototype.destroy=function(){this.renderer=null},t.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},t.prototype.bind=function(r){var e=this,n=e.gl,i=e.CONTEXT_UID,s=r._glBuffers[i]||this.createGLBuffer(r);n.bindBuffer(r.type,s.buffer)},t.prototype.bindBufferBase=function(r,e){var n=this,i=n.gl,s=n.CONTEXT_UID;if(this.boundBufferBases[e]!==r){var a=r._glBuffers[s]||this.createGLBuffer(r);this.boundBufferBases[e]=r,i.bindBufferBase(i.UNIFORM_BUFFER,e,a.buffer)}},t.prototype.bindBufferRange=function(r,e,n){var i=this,s=i.gl,a=i.CONTEXT_UID;n=n||0;var o=r._glBuffers[a]||this.createGLBuffer(r);s.bindBufferRange(s.UNIFORM_BUFFER,e||0,o.buffer,n*256,256)},t.prototype.update=function(r){var e=this,n=e.gl,i=e.CONTEXT_UID,s=r._glBuffers[i];if(r._updateID!==s.updateID)if(s.updateID=r._updateID,n.bindBuffer(r.type,s.buffer),s.byteLength>=r.data.byteLength)n.bufferSubData(r.type,0,r.data);else{var a=r.static?n.STATIC_DRAW:n.DYNAMIC_DRAW;s.byteLength=r.data.byteLength,n.bufferData(r.type,r.data,a)}},t.prototype.dispose=function(r,e){if(this.managedBuffers[r.id]){delete this.managedBuffers[r.id];var n=r._glBuffers[this.CONTEXT_UID],i=this.gl;r.disposeRunner.remove(this),n&&(e||i.deleteBuffer(n.buffer),delete r._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeAll=function(r){for(var e=Object.keys(this.managedBuffers),n=0;n<e.length;n++)this.dispose(this.managedBuffers[e[n]],r)},t.prototype.createGLBuffer=function(r){var e=this,n=e.CONTEXT_UID,i=e.gl;return r._glBuffers[n]=new Z_(i.createBuffer()),this.managedBuffers[r.id]=r,r.disposeRunner.add(this),r._glBuffers[n]},t})(),pe=(function(t){pt(r,t);function r(e){var n=t.call(this,cr.WEBGL,e)||this;return e=n.options,n.gl=null,n.CONTEXT_UID=0,n.runners={destroy:new At("destroy"),contextChange:new At("contextChange"),reset:new At("reset"),update:new At("update"),postrender:new At("postrender"),prerender:new At("prerender"),resize:new At("resize")},n.runners.contextChange.add(n),n.globalUniforms=new Ce({projectionMatrix:new Tt},!0),n.addSystem(E_,"mask").addSystem(Jv,"context").addSystem(z_,"state").addSystem(G_,"shader").addSystem(Y_,"texture").addSystem(J_,"buffer").addSystem(r_,"geometry").addSystem(e_,"framebuffer").addSystem(w_,"scissor").addSystem(I_,"stencil").addSystem(R_,"projection").addSystem(W_,"textureGC").addSystem(Kv,"filter").addSystem(C_,"renderTexture").addSystem(Zv,"batch"),n.initPlugins(r.__plugins),n.multisample=void 0,e.context?n.context.initFromContext(e.context):n.context.initFromOptions({alpha:!!n.useContextAlpha,antialias:e.antialias,premultipliedAlpha:n.useContextAlpha&&n.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:n.options.powerPreference}),n.renderingToScreen=!0,_f(n.context.webGLVersion===2?"WebGL 2":"WebGL 1"),n.resize(n.options.width,n.options.height),n}return r.create=function(e){if(mf())return new r(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},r.prototype.contextChange=function(){var e=this.gl,n;if(this.context.webGLVersion===1){var i=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,i)}else{var i=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,i)}n>=wt.HIGH?this.multisample=wt.HIGH:n>=wt.MEDIUM?this.multisample=wt.MEDIUM:n>=wt.LOW?this.multisample=wt.LOW:this.multisample=wt.NONE},r.prototype.addSystem=function(e,n){var i=new e(this);if(this[n])throw new Error('Whoops! The name "'+n+'" is already in use');this[n]=i;for(var s in this.runners)this.runners[s].add(i);return this},r.prototype.render=function(e,n){var i,s,a,o;if(n&&(n instanceof Pe?(fr("6.0.0","Renderer#render arguments changed, use options instead."),i=n,s=arguments[2],a=arguments[3],o=arguments[4]):(i=n.renderTexture,s=n.clear,a=n.transform,o=n.skipUpdateTransform)),this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=a,!this.context.isLost){if(i||(this._lastObjectRendered=e),!o){var l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}this.renderTexture.bind(i),this.batch.currentRenderer.start(),(s!==void 0?s:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},r.prototype.generateTexture=function(e,n,i,s){n===void 0&&(n={});var a=t.prototype.generateTexture.call(this,e,n,i,s);return this.framebuffer.blit(),a},r.prototype.resize=function(e,n){t.prototype.resize.call(this,e,n),this.runners.resize.emit(this.screen.height,this.screen.width)},r.prototype.reset=function(){return this.runners.reset.emit(),this},r.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},r.prototype.destroy=function(e){this.runners.destroy.emit();for(var n in this.runners)this.runners[n].destroy();t.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(r.prototype,"extract",{get:function(){return fr("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),r.registerPlugin=function(e,n){r.__plugins=r.__plugins||{},r.__plugins[e]=n},r})(K_);function Q_(t){return pe.create(t)}var tm=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,em=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,rm=tm,bh=em,ms=(function(){function t(){this.texArray=null,this.blend=0,this.type=Xt.TRIANGLES,this.start=0,this.size=0,this.data=null}return t})(),gs=(function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var r=0;r<this.count;r++)this.elements[r]=null;this.count=0},t})(),ys=(function(){function t(r){typeof r=="number"?this.rawBinaryData=new ArrayBuffer(r):r instanceof Uint8Array?this.rawBinaryData=r.buffer:this.rawBinaryData=r,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(r){return this[r+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(r){switch(r){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(r+" isn't a valid view type")}},t})(),nm=(function(t){pt(r,t);function r(e){var n=t.call(this,e)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=Ne.for2d(),n.size=et.SPRITE_BATCH_SIZE*4,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),e.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return r.prototype.contextChange=function(){var e=this.renderer.gl;et.PREFER_ENV===ee.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),et.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=d_(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var n=0;n<this._packedGeometryPoolSize;n++)this._packedGeometries[n]=new this.geometryClass;this.initFlushBuffers()},r.prototype.initFlushBuffers=function(){for(var e=r._drawCallPool,n=r._textureArrayPool,i=this.size/4,s=Math.floor(i/this.MAX_TEXTURES)+1;e.length<i;)e.push(new ms);for(;n.length<s;)n.push(new gs);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},r.prototype.onPrerender=function(){this._flushId=0},r.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},r.prototype.buildTexturesAndDrawCalls=function(){var e=this,n=e._bufferedTextures,i=e.MAX_TEXTURES,s=r._textureArrayPool,a=this.renderer.batch,o=this._tempBoundTextures,l=this.renderer.textureGC.count,u=++lt._globalBatch,h=0,f=s[0],c=0;a.copyBoundTextures(o,i);for(var d=0;d<this._bufferSize;++d){var v=n[d];n[d]=null,v._batchEnabled!==u&&(f.count>=i&&(a.boundArray(f,o,u,i),this.buildDrawCalls(f,c,d),c=d,f=s[++h],++u),v._batchEnabled=u,v.touched=l,f.elements[f.count++]=v)}f.count>0&&(a.boundArray(f,o,u,i),this.buildDrawCalls(f,c,this._bufferSize),++h,++u);for(var d=0;d<o.length;d++)o[d]=null;lt._globalBatch=u},r.prototype.buildDrawCalls=function(e,n,i){var s=this,a=s._bufferedElements,o=s._attributeBuffer,l=s._indexBuffer,u=s.vertexSize,h=r._drawCallPool,f=this._dcIndex,c=this._aIndex,d=this._iIndex,v=h[f];v.start=this._iIndex,v.texArray=e;for(var _=n;_<i;++_){var p=a[_],m=p._texture.baseTexture,E=th[m.alphaMode?1:0][p.blendMode];a[_]=null,n<_&&v.blend!==E&&(v.size=d-v.start,n=_,v=h[++f],v.texArray=e,v.start=d),this.packInterleavedGeometry(p,o,l,c,d),c+=p.vertexData.length/2*u,d+=p.indices.length,v.blend=E}n<i&&(v.size=d-v.start,++f),this._dcIndex=f,this._aIndex=c,this._iIndex=d},r.prototype.bindAndClearTexArray=function(e){for(var n=this.renderer.texture,i=0;i<e.count;i++)n.bind(e.elements[i],e.ids[i]),e.elements[i]=null;e.count=0},r.prototype.updateGeometry=function(){var e=this,n=e._packedGeometries,i=e._attributeBuffer,s=e._indexBuffer;et.CAN_UPLOAD_SAME_BUFFER?(n[this._flushId]._buffer.update(i.rawBinaryData),n[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,n[this._flushId]=new this.geometryClass),n[this._flushId]._buffer.update(i.rawBinaryData),n[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(n[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},r.prototype.drawBatches=function(){for(var e=this._dcIndex,n=this.renderer,i=n.gl,s=n.state,a=r._drawCallPool,o=null,l=0;l<e;l++){var u=a[l],h=u.texArray,f=u.type,c=u.size,d=u.start,v=u.blend;o!==h&&(o=h,this.bindAndClearTexArray(h)),this.state.blendMode=v,s.set(this.state),i.drawElements(f,c,i.UNSIGNED_SHORT,d*2)}},r.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},r.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),et.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},r.prototype.stop=function(){this.flush()},r.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},r.prototype.getAttributeBuffer=function(e){var n=tn(Math.ceil(e/8)),i=Fo(n),s=n*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var a=this._aBuffers[s];return a||(this._aBuffers[s]=a=new ys(s*this.vertexSize*4)),a},r.prototype.getIndexBuffer=function(e){var n=tn(Math.ceil(e/12)),i=Fo(n),s=n*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var a=this._iBuffers[i];return a||(this._iBuffers[i]=a=new Uint16Array(s)),a},r.prototype.packInterleavedGeometry=function(e,n,i,s,a){for(var o=n.uint32View,l=n.float32View,u=s/this.vertexSize,h=e.uvs,f=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,v=Math.min(e.worldAlpha,1),_=v<1&&e._texture.baseTexture.alphaMode?qs(e._tintRGB,v):e._tintRGB+(v*255<<24),p=0;p<c.length;p+=2)l[s++]=c[p],l[s++]=c[p+1],l[s++]=h[p],l[s++]=h[p+1],o[s++]=_,l[s++]=d;for(var p=0;p<f.length;p++)i[a++]=u+f[p]},r._drawCallPool=[],r._textureArrayPool=[],r})(fn),im=(function(){function t(r,e){if(this.vertexSrc=r,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(r){if(!this.programCache[r]){for(var e=new Int32Array(r),n=0;n<r;n++)e[n]=n;this.defaultGroupCache[r]=Ce.from({uSamplers:e},!0);var i=this.fragTemplate;i=i.replace(/%count%/gi,""+r),i=i.replace(/%forloop%/gi,this.generateSampleSrc(r)),this.programCache[r]=new xr(this.vertexSrc,i)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new Tt,default:this.defaultGroupCache[r]};return new he(this.programCache[r],s)},t.prototype.generateSampleSrc=function(r){var e="";e+=`
`,e+=`
`;for(var n=0;n<r;n++)n>0&&(e+=`
else `),n<r-1&&(e+="if(vTextureId < "+n+".5)"),e+=`
{`,e+=`
	color = texture2D(uSamplers[`+n+"], vTextureCoord);",e+=`
}`;return e+=`
`,e+=`
`,e},t})(),xh=(function(t){pt(r,t);function r(e){e===void 0&&(e=!1);var n=t.call(this)||this;return n._buffer=new It(null,e,!1),n._indexBuffer=new It(null,e,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,it.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,it.FLOAT).addAttribute("aColor",n._buffer,4,!0,it.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,it.FLOAT).addIndex(n._indexBuffer),n}return r})(br),_l=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,ml=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,sm=(function(){function t(){}return t.create=function(r){var e=Object.assign({vertex:_l,fragment:ml,geometryClass:xh,vertexSize:6},r),n=e.vertex,i=e.fragment,s=e.vertexSize,a=e.geometryClass;return(function(o){pt(l,o);function l(u){var h=o.call(this,u)||this;return h.shaderGenerator=new im(n,i),h.geometryClass=a,h.vertexSize=s,h}return l})(nm)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return _l},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return ml},enumerable:!1,configurable:!0}),t})(),am=sm.create();var dn=(function(){function t(r){var e=this;this.stage=new Lt,r=Object.assign({forceCanvas:!1},r),this.renderer=Q_(r),t._plugins.forEach(function(n){n.init.call(e,r)})}return t.registerPlugin=function(r){t._plugins.push(r)},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(r,e){var n=this,i=t._plugins.slice(0);i.reverse(),i.forEach(function(s){s.destroy.call(n)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(r),this.renderer=null},t._plugins=[],t})(),om=(function(){function t(){}return t.init=function(r){var e=this;Object.defineProperty(this,"resizeTo",{set:function(n){self.removeEventListener("resize",this.queueResize),this._resizeTo=n,n&&(self.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame(function(){return e.resize()}))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){e.cancelResize();var n,i;if(e._resizeTo===self)n=self.innerWidth,i=self.innerHeight;else{var s=e._resizeTo,a=s.clientWidth,o=s.clientHeight;n=a,i=o}e.renderer.resize(n,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=r.resizeTo||null},t.destroy=function(){self.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t})();dn.registerPlugin(om);var gl=new ut,yl=4,lm=(function(){function t(r){this.renderer=r}return t.prototype.image=function(r,e,n){var i=new Image;return i.src=this.base64(r,e,n),i},t.prototype.base64=function(r,e,n){return this.canvas(r).toDataURL(e,n)},t.prototype.canvas=function(r){var e=this.renderer,n,i,s=!1,a,o=!1;r&&(r instanceof Pe?a=r:(a=this.renderer.generateTexture(r),o=!0)),a?(n=a.baseTexture.resolution,i=a.frame,s=!1,e.renderTexture.bind(a)):(n=this.renderer.resolution,s=!0,i=gl,i.width=this.renderer.width,i.height=this.renderer.height,e.renderTexture.bind(null));var l=Math.floor(i.width*n+1e-4),u=Math.floor(i.height*n+1e-4),h=new Go(l,u,1),f=new Uint8Array(yl*l*u),c=e.gl;c.readPixels(i.x*n,i.y*n,l,u,c.RGBA,c.UNSIGNED_BYTE,f);var d=h.context.getImageData(0,0,l,u);if(t.arrayPostDivide(f,d.data),h.context.putImageData(d,0,0),s){var v=new Go(h.width,h.height,1);v.context.scale(1,-1),v.context.drawImage(h.canvas,0,-u),h.destroy(),h=v}return o&&a.destroy(!0),h.canvas},t.prototype.pixels=function(r){var e=this.renderer,n,i,s,a=!1;r&&(r instanceof Pe?s=r:(s=this.renderer.generateTexture(r),a=!0)),s?(n=s.baseTexture.resolution,i=s.frame,e.renderTexture.bind(s)):(n=e.resolution,i=gl,i.width=e.width,i.height=e.height,e.renderTexture.bind(null));var o=i.width*n,l=i.height*n,u=new Uint8Array(yl*o*l),h=e.gl;return h.readPixels(i.x*n,i.y*n,o,l,h.RGBA,h.UNSIGNED_BYTE,u),a&&s.destroy(!0),t.arrayPostDivide(u,u),u},t.prototype.destroy=function(){this.renderer=null},t.arrayPostDivide=function(r,e){for(var n=0;n<r.length;n+=4){var i=e[n+3]=r[n+3];i!==0?(e[n]=Math.round(Math.min(r[n]*255/i,255)),e[n+1]=Math.round(Math.min(r[n+1]*255/i,255)),e[n+2]=Math.round(Math.min(r[n+2]*255/i,255))):(e[n]=r[n],e[n+1]=r[n+1],e[n+2]=r[n+2])}},t})();var Br=(function(){function t(r,e,n){e===void 0&&(e=!1),this._fn=r,this._once=e,this._thisArg=n,this._next=this._prev=this._owner=null}return t.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},t})();function bl(t,r){return t._head?(t._tail._next=r,r._prev=t._tail,t._tail=r):(t._head=r,t._tail=r),r._owner=t,r}var Qt=(function(){function t(){this._head=this._tail=void 0}return t.prototype.handlers=function(r){r===void 0&&(r=!1);var e=this._head;if(r)return!!e;for(var n=[];e;)n.push(e),e=e._next;return n},t.prototype.has=function(r){if(!(r instanceof Br))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return r._owner===this},t.prototype.dispatch=function(){for(var r=arguments,e=[],n=0;n<arguments.length;n++)e[n]=r[n];var i=this._head;if(!i)return!1;for(;i;)i._once&&this.detach(i),i._fn.apply(i._thisArg,e),i=i._next;return!0},t.prototype.add=function(r,e){if(e===void 0&&(e=null),typeof r!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return bl(this,new Br(r,!1,e))},t.prototype.once=function(r,e){if(e===void 0&&(e=null),typeof r!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return bl(this,new Br(r,!0,e))},t.prototype.detach=function(r){if(!(r instanceof Br))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return r._owner!==this?this:(r._prev&&(r._prev._next=r._next),r._next&&(r._next._prev=r._prev),r===this._head?(this._head=r._next,r._next===null&&(this._tail=null)):r===this._tail&&(this._tail=r._prev,this._tail._next=null),r._owner=null,this)},t.prototype.detachAll=function(){var r=this._head;if(!r)return this;for(this._head=this._tail=null;r;)r._owner=null,r=r._next;return this},t})();function Th(t,r){r=r||{};for(var e={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=e.parser[r.strictMode?"strict":"loose"].exec(t),i={},s=14;s--;)i[e.key[s]]=n[s]||"";return i[e.q.name]={},i[e.key[12]].replace(e.q.parser,function(a,o,l){o&&(i[e.q.name][o]=l)}),i}var um=!!(self.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)),Gr=null,hm=0,xl=200,cm=204,fm=1223,dm=2;function Tl(){}function El(t,r,e){r&&r.indexOf(".")===0&&(r=r.substring(1)),r&&(t[r]=e)}function Bi(t){return t.toString().replace("object ","")}var gt=(function(){function t(r,e,n){if(this._dequeue=Tl,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof r!="string"||typeof e!="string")throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,e.indexOf("data:")===0),this.name=r,this.url=e,this.extension=this._getExtension(),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Tl,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Qt,this.onProgress=new Qt,this.onComplete=new Qt,this.onAfterMiddleware=new Qt}return t.setExtensionLoadType=function(r,e){El(t._loadTypeMap,r,e)},t.setExtensionXhrType=function(r,e){El(t._xhrTypeMap,r,e)},Object.defineProperty(t.prototype,"isDataUrl",{get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(r){if(!this.error){if(this.error=new Error(r),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(r){var e=this;if(!this.isLoading){if(this.isComplete){r&&setTimeout(function(){return r(e)},1);return}else r&&this.onComplete.once(r);switch(this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:um&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},t.prototype._hasFlag=function(r){return(this._flags&r)!==0},t.prototype._setFlag=function(r,e){this._flags=e?this._flags|r:this._flags&~r},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(r){this.metadata.loadElement?this.data=this.metadata.loadElement:r==="image"&&typeof self.Image<"u"?this.data=new Image:this.data=document.createElement(r),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(r){if(this.metadata.loadElement?this.data=this.metadata.loadElement:r==="audio"&&typeof self.Audio<"u"?this.data=new Audio:this.data=document.createElement(r),this.data===null){this.abort("Unsupported element: "+r);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(r,this.url[n],Array.isArray(e)?e[n]:e));else{var e=this.metadata.mimeType;this.data.appendChild(this._createSource(r,this.url,Array.isArray(e)?e[0]:e))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var r=this.xhr=new XMLHttpRequest;r.open("GET",this.url,!0),r.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?r.responseType=t.XHR_RESPONSE_TYPE.TEXT:r.responseType=this.xhrType,r.addEventListener("error",this._boundXhrOnError,!1),r.addEventListener("timeout",this._boundXhrOnTimeout,!1),r.addEventListener("abort",this._boundXhrOnAbort,!1),r.addEventListener("progress",this._boundOnProgress,!1),r.addEventListener("load",this._boundXhrOnLoad,!1),r.send()},t.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var r=this.xhr=new self.XDomainRequest;r.timeout=this.timeout||5e3,r.onerror=this._boundXhrOnError,r.ontimeout=this._boundXhrOnTimeout,r.onprogress=this._boundOnProgress,r.onload=this._boundXhrOnLoad,r.open("GET",this.url,!0),setTimeout(function(){return r.send()},1)},t.prototype._createSource=function(r,e,n){n||(n=r+"/"+this._getExtension(e));var i=document.createElement("source");return i.src=e,i.type=n,i},t.prototype._onError=function(r){this.abort("Failed to load element using: "+r.target.nodeName)},t.prototype._onProgress=function(r){r&&r.lengthComputable&&this.onProgress.dispatch(this,r.loaded/r.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var r=this.xhr;this.abort(Bi(r)+" Request failed. Status: "+r.status+', text: "'+r.statusText+'"')},t.prototype._xhrOnTimeout=function(){var r=this.xhr;this.abort(Bi(r)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var r=this.xhr;this.abort(Bi(r)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var r=this.xhr,e="",n=typeof r.status>"u"?xl:r.status;(r.responseType===""||r.responseType==="text"||typeof r.responseType>"u")&&(e=r.responseText),n===hm&&(e.length>0||r.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?n=xl:n===fm&&(n=cm);var i=n/100|0;if(i===dm)if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=e,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(e),this.type=t.TYPE.JSON}catch(o){this.abort("Error trying to parse loaded json: "+o);return}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(self.DOMParser){var s=new DOMParser;this.data=s.parseFromString(e,"text/xml")}else{var a=document.createElement("div");a.innerHTML=e,this.data=a}this.type=t.TYPE.XML}catch(o){this.abort("Error trying to parse loaded xml: "+o);return}else this.data=r.response||e;else{this.abort("["+r.status+"] "+r.statusText+": "+r.responseURL);return}this.complete()},t.prototype._determineCrossOrigin=function(r,e){if(r.indexOf("data:")===0)return"";if(self.origin!==self.location.origin)return"anonymous";e=e||self.location,Gr||(Gr=document.createElement("a")),Gr.href=r;var n=Th(Gr.href,{strictMode:!0}),i=!n.port&&e.port===""||n.port===e.port,s=n.protocol?n.protocol+":":"";return n.host!==e.hostname||!i||s!==e.protocol?"anonymous":""},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(r){r===void 0&&(r=this.url);var e="";if(this.isDataUrl){var n=r.indexOf("/");e=r.substring(n+1,r.indexOf(";",n))}else{var i=r.indexOf("?"),s=r.indexOf("#"),a=Math.min(i>-1?i:r.length,s>-1?s:r.length);r=r.substring(0,a),e=r.substring(r.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(r){switch(r){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},t})();(function(t){(function(r){r[r.NONE=0]="NONE",r[r.DATA_URL=1]="DATA_URL",r[r.COMPLETE=2]="COMPLETE",r[r.LOADING=4]="LOADING"})(t.STATUS_FLAGS||(t.STATUS_FLAGS={})),(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.JSON=1]="JSON",r[r.XML=2]="XML",r[r.IMAGE=3]="IMAGE",r[r.AUDIO=4]="AUDIO",r[r.VIDEO=5]="VIDEO",r[r.TEXT=6]="TEXT"})(t.TYPE||(t.TYPE={})),(function(r){r[r.XHR=1]="XHR",r[r.IMAGE=2]="IMAGE",r[r.AUDIO=3]="AUDIO",r[r.VIDEO=4]="VIDEO"})(t.LOAD_TYPE||(t.LOAD_TYPE={})),(function(r){r.DEFAULT="text",r.BUFFER="arraybuffer",r.BLOB="blob",r.DOCUMENT="document",r.JSON="json",r.TEXT="text"})(t.XHR_RESPONSE_TYPE||(t.XHR_RESPONSE_TYPE={})),t._loadTypeMap={gif:t.LOAD_TYPE.IMAGE,png:t.LOAD_TYPE.IMAGE,bmp:t.LOAD_TYPE.IMAGE,jpg:t.LOAD_TYPE.IMAGE,jpeg:t.LOAD_TYPE.IMAGE,tif:t.LOAD_TYPE.IMAGE,tiff:t.LOAD_TYPE.IMAGE,webp:t.LOAD_TYPE.IMAGE,tga:t.LOAD_TYPE.IMAGE,svg:t.LOAD_TYPE.IMAGE,"svg+xml":t.LOAD_TYPE.IMAGE,mp3:t.LOAD_TYPE.AUDIO,ogg:t.LOAD_TYPE.AUDIO,wav:t.LOAD_TYPE.AUDIO,mp4:t.LOAD_TYPE.VIDEO,webm:t.LOAD_TYPE.VIDEO},t._xhrTypeMap={xhtml:t.XHR_RESPONSE_TYPE.DOCUMENT,html:t.XHR_RESPONSE_TYPE.DOCUMENT,htm:t.XHR_RESPONSE_TYPE.DOCUMENT,xml:t.XHR_RESPONSE_TYPE.DOCUMENT,tmx:t.XHR_RESPONSE_TYPE.DOCUMENT,svg:t.XHR_RESPONSE_TYPE.DOCUMENT,tsx:t.XHR_RESPONSE_TYPE.DOCUMENT,gif:t.XHR_RESPONSE_TYPE.BLOB,png:t.XHR_RESPONSE_TYPE.BLOB,bmp:t.XHR_RESPONSE_TYPE.BLOB,jpg:t.XHR_RESPONSE_TYPE.BLOB,jpeg:t.XHR_RESPONSE_TYPE.BLOB,tif:t.XHR_RESPONSE_TYPE.BLOB,tiff:t.XHR_RESPONSE_TYPE.BLOB,webp:t.XHR_RESPONSE_TYPE.BLOB,tga:t.XHR_RESPONSE_TYPE.BLOB,json:t.XHR_RESPONSE_TYPE.JSON,text:t.XHR_RESPONSE_TYPE.TEXT,txt:t.XHR_RESPONSE_TYPE.TEXT,ttf:t.XHR_RESPONSE_TYPE.BUFFER,otf:t.XHR_RESPONSE_TYPE.BUFFER},t.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(gt||(gt={}));function ye(){}function pm(t){return function(){for(var e=arguments,n=[],i=0;i<arguments.length;i++)n[i]=e[i];if(t===null)throw new Error("Callback was already called.");var s=t;t=null,s.apply(this,n)}}var vm=(function(){function t(r,e){this.data=r,this.callback=e}return t})(),Gi=(function(){function t(r,e){var n=this;if(e===void 0&&(e=1),this.workers=0,this.saturated=ye,this.unsaturated=ye,this.empty=ye,this.drain=ye,this.error=ye,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(i,s,a){if(a&&typeof a!="function")throw new Error("task callback must be a function");if(n.started=!0,i==null&&n.idle()){setTimeout(function(){return n.drain()},1);return}var o=new vm(i,typeof a=="function"?a:ye);s?n._tasks.unshift(o):n._tasks.push(o),setTimeout(n.process,1)},this.process=function(){for(;!n.paused&&n.workers<n.concurrency&&n._tasks.length;){var i=n._tasks.shift();n._tasks.length===0&&n.empty(),n.workers+=1,n.workers===n.concurrency&&n.saturated(),n._worker(i.data,pm(n._next(i)))}},this._worker=r,e===0)throw new Error("Concurrency must not be zero");this.concurrency=e,this.buffer=e/4}return t.prototype._next=function(r){var e=this;return function(){for(var n=arguments,i=[],s=0;s<arguments.length;s++)i[s]=n[s];e.workers-=1,r.callback.apply(r,i),i[0]!=null&&e.error(i[0],r.data),e.workers<=e.concurrency-e.buffer&&e.unsaturated(),e.idle()&&e.drain(),e.process()}},t.prototype.push=function(r,e){this._insert(r,!1,e)},t.prototype.kill=function(){this.workers=0,this.drain=ye,this.started=!1,this._tasks=[]},t.prototype.unshift=function(r,e){this._insert(r,!0,e)},t.prototype.length=function(){return this._tasks.length},t.prototype.running=function(){return this.workers},t.prototype.idle=function(){return this._tasks.length+this.workers===0},t.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},t.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var r=1;r<=this.concurrency;r++)this.process()}},t.eachSeries=function(r,e,n,i){var s=0,a=r.length;function o(l){if(l||s===a){n&&n(l);return}i?setTimeout(function(){e(r[s++],o)},1):e(r[s++],o)}o()},t.queue=function(r,e){return new t(r,e)},t})(),Di=100,_m=/(#[\w-]+)?$/,Wt=(function(){function t(r,e){var n=this;r===void 0&&(r=""),e===void 0&&(e=10),this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(l,u){return n._loadResource(l,u)},this.resources={},this.baseUrl=r,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(l,u){return n._loadResource(l,u)},this._queue=Gi.queue(this._boundLoadResource,e),this._queue.pause(),this.resources={},this.onProgress=new Qt,this.onError=new Qt,this.onLoad=new Qt,this.onStart=new Qt,this.onComplete=new Qt;for(var i=0;i<t._plugins.length;++i){var s=t._plugins[i],a=s.pre,o=s.use;a&&this.pre(a),o&&this.use(o)}this._protected=!1}return t.prototype._add=function(r,e,n,i){if(this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[r])throw new Error('Resource named "'+r+'" already exists.');if(e=this._prepareUrl(e),this.resources[r]=new gt(r,e,n),typeof i=="function"&&this.resources[r].onAfterMiddleware.once(i),this.loading){for(var s=n.parentResource,a=[],o=0;o<s.children.length;++o)s.children[o].isComplete||a.push(s.children[o]);var l=s.progressChunk*(a.length+1),u=l/(a.length+2);s.children.push(this.resources[r]),s.progressChunk=u;for(var o=0;o<a.length;++o)a[o].progressChunk=u;this.resources[r].progressChunk=u}return this._queue.push(this.resources[r]),this},t.prototype.pre=function(r){return this._beforeMiddleware.push(r),this},t.prototype.use=function(r){return this._afterMiddleware.push(r),this},t.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var r in this.resources){var e=this.resources[r];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort("loader reset")}return this.resources={},this},t.prototype.load=function(r){if(typeof r=="function"&&this.onComplete.once(r),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=this._queue._tasks.length,n=Di/e,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=n;this._onStart(),this._queue.resume()}return this},Object.defineProperty(t.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(r){this._queue.concurrency=r},enumerable:!1,configurable:!0}),t.prototype._prepareUrl=function(r){var e=Th(r,{strictMode:!0}),n;if(e.protocol||!e.path||r.indexOf("//")===0?n=r:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&r.charAt(0)!=="/"?n=this.baseUrl+"/"+r:n=this.baseUrl+r,this.defaultQueryString){var i=_m.exec(n)[0];n=n.substr(0,n.length-i.length),n.indexOf("?")!==-1?n+="&"+this.defaultQueryString:n+="?"+this.defaultQueryString,n+=i}return n},t.prototype._loadResource=function(r,e){var n=this;r._dequeue=e,Gi.eachSeries(this._beforeMiddleware,function(i,s){i.call(n,r,function(){s(r.isComplete?{}:null)})},function(){r.isComplete?n._onLoad(r):(r._onLoadBinding=r.onComplete.once(n._onLoad,n),r.load())},!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=Di,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(r){var e=this;r._onLoadBinding=null,this._resourcesParsing.push(r),r._dequeue(),Gi.eachSeries(this._afterMiddleware,function(n,i){n.call(e,r,i)},function(){r.onAfterMiddleware.dispatch(r),e.progress=Math.min(Di,e.progress+r.progressChunk),e.onProgress.dispatch(e,r),r.error?e.onError.dispatch(r.error,e,r):e.onLoad.dispatch(e,r),e._resourcesParsing.splice(e._resourcesParsing.indexOf(r),1),e._queue.idle()&&e._resourcesParsing.length===0&&e._onComplete()},!0)},t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var r=t._shared;return r||(r=new t,r._protected=!0,t._shared=r),r},enumerable:!1,configurable:!0}),t.registerPlugin=function(r){return t._plugins.push(r),r.add&&r.add(),t},t._plugins=[],t})();Wt.prototype.add=function(r,e,n,i){if(Array.isArray(r)){for(var s=0;s<r.length;++s)this.add(r[s]);return this}if(typeof r=="object"&&(n=r,i=e||n.callback||n.onComplete,e=n.url,r=n.name||n.key||n.url),typeof e!="string"&&(i=n,n=e,e=r),typeof e!="string")throw new Error("No url passed to add resource to loader.");return typeof n=="function"&&(i=n,n=null),this._add(r,e,n,i)};var mm=(function(){function t(){}return t.init=function(r){r=Object.assign({sharedLoader:!1},r),this.loader=r.sharedLoader?Wt.shared:new Wt},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t})(),gm=(function(){function t(){}return t.add=function(){gt.setExtensionLoadType("svg",gt.LOAD_TYPE.XHR),gt.setExtensionXhrType("svg",gt.XHR_RESPONSE_TYPE.TEXT)},t.use=function(r,e){if(r.data&&(r.type===gt.TYPE.IMAGE||r.extension==="svg")){var n=r.data,i=r.url,s=r.name,a=r.metadata;nt.fromLoader(n,i,s,a).then(function(o){r.texture=o,e()}).catch(e)}else e()},t})(),ym="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function bm(t){for(var r="",e=0;e<t.length;){for(var n=[0,0,0],i=[0,0,0,0],s=0;s<n.length;++s)e<t.length?n[s]=t.charCodeAt(e++)&255:n[s]=0;i[0]=n[0]>>2,i[1]=(n[0]&3)<<4|n[1]>>4,i[2]=(n[1]&15)<<2|n[2]>>6,i[3]=n[2]&63;var a=e-(t.length-1);switch(a){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64;break}for(var s=0;s<i.length;++s)r+=ym.charAt(i[s])}return r}var wl=self.URL||self.webkitURL;function xm(t,r){if(!t.data){r();return}if(t.xhr&&t.xhrType===gt.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof t.data=="string"){var e=t.xhr.getResponseHeader("content-type");if(e&&e.indexOf("image")===0){t.data=new Image,t.data.src="data:"+e+";base64,"+bm(t.xhr.responseText),t.type=gt.TYPE.IMAGE,t.data.onload=function(){t.data.onload=null,r()};return}}else if(t.data.type.indexOf("image")===0){var n=wl.createObjectURL(t.data);t.blob=t.data,t.data=new Image,t.data.src=n,t.type=gt.TYPE.IMAGE,t.data.onload=function(){wl.revokeObjectURL(n),t.data.onload=null,r()};return}}r()}Wt.registerPlugin({use:xm});Wt.registerPlugin(gm);var ft,at;(function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"})(at||(at={}));var sn=(ft={},ft[at.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,ft[at.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,ft[at.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,ft[at.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,ft[at.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,ft[at.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,ft[at.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,ft[at.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,ft[at.COMPRESSED_R11_EAC]=.5,ft[at.COMPRESSED_SIGNED_R11_EAC]=.5,ft[at.COMPRESSED_RG11_EAC]=1,ft[at.COMPRESSED_SIGNED_RG11_EAC]=1,ft[at.COMPRESSED_RGB8_ETC2]=.5,ft[at.COMPRESSED_RGBA8_ETC2_EAC]=1,ft[at.COMPRESSED_SRGB8_ETC2]=.5,ft[at.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,ft[at.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,ft[at.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,ft[at.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,ft[at.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,ft[at.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,ft[at.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,ft[at.COMPRESSED_RGB_ETC1_WEBGL]=.5,ft[at.COMPRESSED_RGB_ATC_WEBGL]=.5,ft[at.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,ft[at.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,ft);var bs=function(t,r){return bs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},bs(t,r)};function Eh(t,r){bs(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}function Tm(t,r,e,n){return new(e||(e=Promise))(function(i,s){function a(u){try{l(n.next(u))}catch(h){s(h)}}function o(u){try{l(n.throw(u))}catch(h){s(h)}}function l(u){u.done?i(u.value):new e(function(h){h(u.value)}).then(a,o)}l((n=n.apply(t,[])).next())})}function Em(t,r){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(u){return function(h){return l([u,h])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){e.label=u[1];break}if(u[0]===6&&e.label<s[1]){e.label=s[1],s=u;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(u);break}s[2]&&e.ops.pop(),e.trys.pop();continue}u=r.call(t,e)}catch(h){u=[6,h],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var wm=(function(t){Eh(r,t);function r(e,n){n===void 0&&(n={width:1,height:1,autoLoad:!0});var i=this,s,a;return typeof e=="string"?(s=e,a=new Uint8Array):(s=null,a=e),i=t.call(this,a,n)||this,i.origin=s,i.buffer=a?new ys(a):null,i.origin&&n.autoLoad!==!1&&i.load(),a&&a.length&&(i.loaded=!0,i.onBlobLoaded(i.buffer.rawBinaryData)),i}return r.prototype.onBlobLoaded=function(e){},r.prototype.load=function(){return Tm(this,void 0,Promise,function(){var e,n,i;return Em(this,function(s){switch(s.label){case 0:return[4,fetch(this.origin)];case 1:return e=s.sent(),[4,e.blob()];case 2:return n=s.sent(),[4,n.arrayBuffer()];case 3:return i=s.sent(),this.data=new Uint32Array(i),this.buffer=new ys(i),this.loaded=!0,this.onBlobLoaded(i),this.update(),[2,this]}})})},r})(hn),xs=(function(t){Eh(r,t);function r(e,n){var i=t.call(this,e,n)||this;return i.format=n.format,i.levels=n.levels||1,i._width=n.width,i._height=n.height,i._extension=r._formatToExtension(i.format),(n.levelBuffers||i.buffer)&&(i._levelBuffers=n.levelBuffers||r._createLevelBuffers(e instanceof Uint8Array?e:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}return r.prototype.upload=function(e,n,i){var s=e.gl,a=e.context.extensions[this._extension];if(!a)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var o=0,l=this.levels;o<l;o++){var u=this._levelBuffers[o],h=u.levelID,f=u.levelWidth,c=u.levelHeight,d=u.levelBuffer;s.compressedTexImage2D(s.TEXTURE_2D,h,this.format,f,c,0,d)}return!0},r.prototype.onBlobLoaded=function(){this._levelBuffers=r._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},r._formatToExtension=function(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},r._createLevelBuffers=function(e,n,i,s,a,o,l){for(var u=new Array(i),h=e.byteOffset,f=o,c=l,d=f+s-1&~(s-1),v=c+a-1&~(a-1),_=d*v*sn[n],p=0;p<i;p++)u[p]={levelID:p,levelWidth:i>1?f:d,levelHeight:i>1?c:v,levelBuffer:new Uint8Array(e.buffer,h,_)},h+=_,f=f>>1||1,c=c>>1||1,d=f+s-1&~(s-1),v=c+a-1&~(a-1),_=d*v*sn[n];return u},r})(wm),Im=(function(){function t(){}return t.use=function(r,e){var n=r.data,i=this;if(r.type===gt.TYPE.JSON&&n&&n.cacheID&&n.textures){for(var s=n.textures,a=void 0,o=void 0,l=0,u=s.length;l<u;l++){var h=s[l],f=h.src,c=h.format;if(c||(o=f),t.textureFormats[c]){a=f;break}}if(a=a||o,!a){e(new Error("Cannot load compressed-textures in "+r.url+", make sure you provide a fallback"));return}if(a===r.url){e(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var d={crossOrigin:r.crossOrigin,metadata:r.metadata.imageMetadata,parentResource:r},v=He.resolve(r.url.replace(i.baseUrl,""),a),_=n.cacheID;i.add(_,v,d,function(p){if(p.error){e(p.error);return}var m=p.texture,E=m===void 0?null:m,I=p.textures,C=I===void 0?{}:I;Object.assign(r,{texture:E,textures:C}),e()})}else e()},t.add=function(){var r=document.createElement("canvas"),e=r.getContext("webgl");if(!e){console.warn("WebGL not available for compressed textures. Silently failing.");return}var n={s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};t.textureExtensions=n,t.textureFormats={};for(var i in n){var s=n[i];s&&Object.assign(t.textureFormats,Object.getPrototypeOf(s))}},t})();function wh(t,r,e){var n={textures:{},texture:null};if(!r)return n;var i=r.map(function(s){return new nt(new lt(s,Object.assign({mipmap:ce.OFF,alphaMode:zt.NO_PREMULTIPLIED_ALPHA},e)))});return i.forEach(function(s,a){var o=s.baseTexture,l=t+"-"+(a+1);lt.addToCache(o,l),nt.addToCache(s,l),a===0&&(lt.addToCache(o,t),nt.addToCache(s,t),n.texture=s),n.textures[l]=s}),n}var er,Dt;gt.setExtensionXhrType("dds",gt.XHR_RESPONSE_TYPE.BUFFER);var ki=4,Dr=124,Rm=32,Il=20,Cm=542327876,kr={HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},Am={FOURCC:2},Hr={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3},Ht;(function(t){t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(Ht||(Ht={}));var Ts;(function(t){t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(Ts||(Ts={}));var Sm=1,Pm=2,Nm=4,Om=64,Um=512,Lm=131072,Fm=827611204,Mm=861165636,Bm=894720068,Gm=808540228,Dm=4,km=(er={},er[Fm]=at.COMPRESSED_RGBA_S3TC_DXT1_EXT,er[Mm]=at.COMPRESSED_RGBA_S3TC_DXT3_EXT,er[Bm]=at.COMPRESSED_RGBA_S3TC_DXT5_EXT,er),Hm=(Dt={},Dt[Ht.DXGI_FORMAT_BC1_TYPELESS]=at.COMPRESSED_RGBA_S3TC_DXT1_EXT,Dt[Ht.DXGI_FORMAT_BC1_UNORM]=at.COMPRESSED_RGBA_S3TC_DXT1_EXT,Dt[Ht.DXGI_FORMAT_BC2_TYPELESS]=at.COMPRESSED_RGBA_S3TC_DXT3_EXT,Dt[Ht.DXGI_FORMAT_BC2_UNORM]=at.COMPRESSED_RGBA_S3TC_DXT3_EXT,Dt[Ht.DXGI_FORMAT_BC3_TYPELESS]=at.COMPRESSED_RGBA_S3TC_DXT5_EXT,Dt[Ht.DXGI_FORMAT_BC3_UNORM]=at.COMPRESSED_RGBA_S3TC_DXT5_EXT,Dt[Ht.DXGI_FORMAT_BC1_UNORM_SRGB]=at.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,Dt[Ht.DXGI_FORMAT_BC2_UNORM_SRGB]=at.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,Dt[Ht.DXGI_FORMAT_BC3_UNORM_SRGB]=at.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,Dt),Xm=(function(){function t(){}return t.use=function(r,e){if(r.extension==="dds"&&r.data)try{Object.assign(r,wh(r.name||r.url,t.parse(r.data),r.metadata))}catch(n){e(n);return}e()},t.parse=function(r){var e=new Uint32Array(r),n=e[0];if(n!==Cm)throw new Error("Invalid DDS file magic word");var i=new Uint32Array(r,0,Dr/Uint32Array.BYTES_PER_ELEMENT),s=i[kr.HEIGHT],a=i[kr.WIDTH],o=i[kr.MIPMAP_COUNT],l=new Uint32Array(r,kr.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,Rm/Uint32Array.BYTES_PER_ELEMENT),u=l[Sm];if(u&Nm){var h=l[Am.FOURCC];if(h!==Gm){var f=km[h],c=ki+Dr,d=new Uint8Array(r,c),v=new xs(d,{format:f,width:a,height:s,levels:o});return[v]}var _=ki+Dr,p=new Uint32Array(e.buffer,_,Il/Uint32Array.BYTES_PER_ELEMENT),m=p[Hr.DXGI_FORMAT],E=p[Hr.RESOURCE_DIMENSION],I=p[Hr.MISC_FLAG],C=p[Hr.ARRAY_SIZE],y=Hm[m];if(y===void 0)throw new Error("DDSLoader cannot parse texture data with DXGI format "+m);if(I===Dm)throw new Error("DDSLoader does not support cubemap textures");if(E===Ts.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var w=new Array,T=ki+Dr+Il;if(C===1)w.push(new Uint8Array(r,T));else{for(var B=sn[y],U=0,F=a,k=s,O=0;O<o;O++){var q=Math.max(1,F+3&-4),W=Math.max(1,k+3&-4),G=q*W*B;U+=G,F=F>>>1,k=k>>>1}for(var g=T,O=0;O<C;O++)w.push(new Uint8Array(r,g,U)),g+=U}return w.map(function(b){return new xs(b,{format:y,width:a,height:s,levels:o})})}throw u&Om?new Error("DDSLoader does not support uncompressed texture data."):u&Um?new Error("DDSLoader does not supported YUV uncompressed texture data."):u&Lm?new Error("DDSLoader does not support single-channel (lumninance) texture data!"):u&Pm?new Error("DDSLoader does not support single-channel (alpha) texture data!"):new Error("DDSLoader failed to load a texture file due to an unknown reason!")},t})(),Me,be,rr;gt.setExtensionXhrType("ktx",gt.XHR_RESPONSE_TYPE.BUFFER);var Rl=[171,75,84,88,32,49,49,187,13,10,26,10],jm=67305985,kt={ENDIANNESS:12,GL_TYPE:16,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Vm=64,Cl=(Me={},Me[it.UNSIGNED_BYTE]=1,Me[it.UNSIGNED_SHORT]=2,Me[it.FLOAT]=4,Me[it.HALF_FLOAT]=8,Me),qm=(be={},be[z.RGBA]=4,be[z.RGB]=3,be[z.LUMINANCE]=1,be[z.LUMINANCE_ALPHA]=2,be[z.ALPHA]=1,be),zm=(rr={},rr[it.UNSIGNED_SHORT_4_4_4_4]=2,rr[it.UNSIGNED_SHORT_5_5_5_1]=2,rr[it.UNSIGNED_SHORT_5_6_5]=2,rr),Wm=(function(){function t(){}return t.use=function(r,e){if(r.extension==="ktx"&&r.data)try{var n=r.name||r.url;Object.assign(r,wh(n,t.parse(n,r.data),r.metadata))}catch(i){e(i);return}e()},t.parse=function(r,e){var n=new DataView(e);if(!t.validate(r,n))return null;var i=n.getUint32(kt.ENDIANNESS,!0)===jm,s=n.getUint32(kt.GL_TYPE,i),a=n.getUint32(kt.GL_FORMAT,i),o=n.getUint32(kt.GL_INTERNAL_FORMAT,i),l=n.getUint32(kt.PIXEL_WIDTH,i),u=n.getUint32(kt.PIXEL_HEIGHT,i)||1,h=n.getUint32(kt.PIXEL_DEPTH,i)||1,f=n.getUint32(kt.NUMBER_OF_ARRAY_ELEMENTS,i)||1,c=n.getUint32(kt.NUMBER_OF_FACES,i),d=n.getUint32(kt.NUMBER_OF_MIPMAP_LEVELS,i),v=n.getUint32(kt.BYTES_OF_KEY_VALUE_DATA,i);if(u===0||h!==1)throw new Error("Only 2D textures are supported");if(c!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(f!==1)throw new Error("WebGL does not support array textures");var _=4,p=4,m=l+3&-4,E=u+3&-4,I=new Array(f),C=l*u;s===0&&(C=m*E);var y;if(s!==0?Cl[s]?y=Cl[s]*qm[a]:y=zm[s]:y=sn[o],y===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var w=C*y,T=w,B=l,U=u,F=m,k=E,O=Vm+v,q=0;q<d;q++){for(var W=n.getUint32(O,i),G=O+4,g=0;g<f;g++){var b=I[g];b||(b=I[g]=new Array(d)),b[q]={levelID:q,levelWidth:d>1?B:F,levelHeight:d>1?U:k,levelBuffer:new Uint8Array(e,G,T)},G+=T}O+=W+4,O=O%4!==0?O+4-O%4:O,B=B>>1||1,U=U>>1||1,F=B+_-1&-4,k=U+p-1&-4,T=F*k*y}if(s!==0)throw new Error("TODO: Uncompressed");return I.map(function(x){return new xs(null,{format:o,width:l,height:u,levels:d,levelBuffers:x})})},t.validate=function(r,e){for(var n=0;n<Rl.length;n++)if(e.getUint8(n)!==Rl[n])return console.error(r+" is not a valid *.ktx file!"),!1;return!0},t})();var Es=function(t,r){return Es=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},Es(t,r)};function Ih(t,r){Es(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}(function(t){Ih(r,t);function r(e,n,i,s){e===void 0&&(e=1500),i===void 0&&(i=16384),s===void 0&&(s=!1);var a=t.call(this)||this,o=16384;return i>o&&(i=o),a._properties=[!1,!0,!1,!1,!1],a._maxSize=e,a._batchSize=i,a._buffers=null,a._bufferUpdateIDs=[],a._updateID=0,a.interactiveChildren=!1,a.blendMode=rt.NORMAL,a.autoResize=s,a.roundPixels=!0,a.baseTexture=null,a.setProperties(n),a._tint=0,a.tintRgb=new Float32Array(4),a.tint=16777215,a}return r.prototype.setProperties=function(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])},r.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,ze(e,this.tintRgb)},enumerable:!1,configurable:!0}),r.prototype.render=function(e){var n=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return n.onChildrenChange(0)})),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},r.prototype.onChildrenChange=function(e){for(var n=Math.floor(e/this._batchSize);this._bufferUpdateIDs.length<n;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[n]=++this._updateID},r.prototype.dispose=function(){if(this._buffers){for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}},r.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},r})(Lt);var Al=(function(){function t(r,e,n){this.geometry=new br,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<r.length;++i){var s=r[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||it.FLOAT,offset:s.offset},e[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var r=this.geometry,e=0;this.indexBuffer=new It(ov(this.size),!0,!0),r.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){var i=this.dynamicProperties[n];i.offset=e,e+=i.size,this.dynamicStride+=i.size}var s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=new It(this.dynamicData,!1,!1);var a=0;this.staticStride=0;for(var n=0;n<this.staticProperties.length;++n){var i=this.staticProperties[n];i.offset=a,a+=i.size,this.staticStride+=i.size}var o=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new It(this.staticData,!0,!1);for(var n=0;n<this.dynamicProperties.length;++n){var i=this.dynamicProperties[n];r.addAttribute(i.attributeName,this.dynamicBuffer,0,i.type===it.UNSIGNED_BYTE,i.type,this.dynamicStride*4,i.offset*4)}for(var n=0;n<this.staticProperties.length;++n){var i=this.staticProperties[n];r.addAttribute(i.attributeName,this.staticBuffer,0,i.type===it.UNSIGNED_BYTE,i.type,this.staticStride*4,i.offset*4)}},t.prototype.uploadDynamic=function(r,e,n){for(var i=0;i<this.dynamicProperties.length;i++){var s=this.dynamicProperties[i];s.uploadFunction(r,e,n,s.type===it.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(r,e,n){for(var i=0;i<this.staticProperties.length;i++){var s=this.staticProperties[i];s.uploadFunction(r,e,n,s.type===it.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t})(),$m=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,Ym=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,Km=(function(t){Ih(r,t);function r(e){var n=t.call(this,e)||this;return n.shader=null,n.properties=null,n.tempMatrix=new Tt,n.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:it.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=he.from(Ym,$m,{}),n.state=Ne.for2d(),n}return r.prototype.render=function(e){var n=e.children,i=e._maxSize,s=e._batchSize,a=this.renderer,o=n.length;if(o!==0){o>i&&!e.autoResize&&(o=i);var l=e._buffers;l||(l=e._buffers=this.generateBuffers(e));var u=n[0]._texture.baseTexture;this.state.blendMode=eh(e.blendMode,u.alphaMode),a.state.set(this.state);var h=a.gl,f=e.worldTransform.copyTo(this.tempMatrix);f.prepend(a.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=av(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,u.alphaMode),this.shader.uniforms.uSampler=u,this.renderer.shader.bind(this.shader);for(var c=!1,d=0,v=0;d<o;d+=s,v+=1){var _=o-d;_>s&&(_=s),v>=l.length&&l.push(this._generateOneMoreBuffer(e));var p=l[v];p.uploadDynamic(n,d,_);var m=e._bufferUpdateIDs[v]||0;c=c||p._updateID<m,c&&(p._updateID=e._updateID,p.uploadStatic(n,d,_)),a.geometry.bind(p.geometry),h.drawElements(h.TRIANGLES,_*6,h.UNSIGNED_SHORT,0)}}},r.prototype.generateBuffers=function(e){for(var n=[],i=e._maxSize,s=e._batchSize,a=e._properties,o=0;o<i;o+=s)n.push(new Al(this.properties,a,s));return n},r.prototype._generateOneMoreBuffer=function(e){var n=e._batchSize,i=e._properties;return new Al(this.properties,i,n)},r.prototype.uploadVertices=function(e,n,i,s,a,o){for(var l=0,u=0,h=0,f=0,c=0;c<i;++c){var d=e[n+c],v=d._texture,_=d.scale.x,p=d.scale.y,m=v.trim,E=v.orig;m?(u=m.x-d.anchor.x*E.width,l=u+m.width,f=m.y-d.anchor.y*E.height,h=f+m.height):(l=E.width*(1-d.anchor.x),u=E.width*-d.anchor.x,h=E.height*(1-d.anchor.y),f=E.height*-d.anchor.y),s[o]=u*_,s[o+1]=f*p,s[o+a]=l*_,s[o+a+1]=f*p,s[o+a*2]=l*_,s[o+a*2+1]=h*p,s[o+a*3]=u*_,s[o+a*3+1]=h*p,o+=a*4}},r.prototype.uploadPosition=function(e,n,i,s,a,o){for(var l=0;l<i;l++){var u=e[n+l].position;s[o]=u.x,s[o+1]=u.y,s[o+a]=u.x,s[o+a+1]=u.y,s[o+a*2]=u.x,s[o+a*2+1]=u.y,s[o+a*3]=u.x,s[o+a*3+1]=u.y,o+=a*4}},r.prototype.uploadRotation=function(e,n,i,s,a,o){for(var l=0;l<i;l++){var u=e[n+l].rotation;s[o]=u,s[o+a]=u,s[o+a*2]=u,s[o+a*3]=u,o+=a*4}},r.prototype.uploadUvs=function(e,n,i,s,a,o){for(var l=0;l<i;++l){var u=e[n+l]._texture._uvs;u?(s[o]=u.x0,s[o+1]=u.y0,s[o+a]=u.x1,s[o+a+1]=u.y1,s[o+a*2]=u.x2,s[o+a*2+1]=u.y2,s[o+a*3]=u.x3,s[o+a*3+1]=u.y3,o+=a*4):(s[o]=0,s[o+1]=0,s[o+a]=0,s[o+a+1]=0,s[o+a*2]=0,s[o+a*2+1]=0,s[o+a*3]=0,s[o+a*3+1]=0,o+=a*4)}},r.prototype.uploadTint=function(e,n,i,s,a,o){for(var l=0;l<i;++l){var u=e[n+l],h=u._texture.baseTexture.alphaMode>0,f=u.alpha,c=f<1&&h?qs(u._tintRGB,f):u._tintRGB+(f*255<<24);s[o]=c,s[o+a]=c,s[o+a*2]=c,s[o+a*3]=c,o+=a*4}},r.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},r})(fn);var le;(function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"})(le||(le={}));var ue;(function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"})(ue||(ue={}));var pr={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,r){if(r===void 0&&(r=20),!this.adaptive||!t||isNaN(t))return r;var e=Math.ceil(t/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}},Rh=(function(){function t(){this.color=16777215,this.alpha=1,this.texture=nt.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var r=new t;return r.color=this.color,r.alpha=this.alpha,r.texture=this.texture,r.matrix=this.matrix,r.visible=this.visible,r},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=nt.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t})();var ws=function(t,r){return ws=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},ws(t,r)};function $s(t,r){ws(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Ch={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,r){var e=t.points,n=t.holes,i=r.points,s=r.indices;if(e.length>=6){for(var a=[],o=0;o<n.length;o++){var l=n[o];a.push(e.length/2),e=e.concat(l.points)}var u=ju(e,a,2);if(!u)return;for(var h=i.length/2,o=0;o<u.length;o+=3)s.push(u[o]+h),s.push(u[o+1]+h),s.push(u[o+2]+h);for(var o=0;o<e.length;o++)i.push(e[o])}}},Sl={build:function(t){var r=t.shape,e=t.points,n=r.x,i=r.y,s,a;if(e.length=0,t.type===bt.CIRC)s=r.radius,a=r.radius;else{var o=t.shape;s=o.width,a=o.height}if(!(s===0||a===0)){var l=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(s+a));l/=2.3;for(var u=Math.PI*2/l,h=0;h<l-.5;h++)e.push(n+Math.sin(-u*h)*s,i+Math.cos(-u*h)*a);e.push(e[0],e[1])}},triangulate:function(t,r){var e=t.points,n=r.points,i=r.indices,s=n.length/2,a=s,o=t.shape,l=t.matrix,u=o.x,h=o.y;n.push(t.matrix?l.a*u+l.c*h+l.tx:u,t.matrix?l.b*u+l.d*h+l.ty:h);for(var f=0;f<e.length;f+=2)n.push(e[f],e[f+1]),i.push(s++,a,s)}},Zm={build:function(t){var r=t.shape,e=r.x,n=r.y,i=r.width,s=r.height,a=t.points;a.length=0,a.push(e,n,e+i,n,e+i,n+s,e,n+s)},triangulate:function(t,r){var e=t.points,n=r.points,i=n.length/2;n.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),r.indices.push(i,i+1,i+2,i+1,i+2,i+3)}};function Be(t,r,e){var n=r-t;return t+n*e}function Xr(t,r,e,n,i,s,a){a===void 0&&(a=[]);for(var o=20,l=a,u=0,h=0,f=0,c=0,d=0,v=0,_=0,p=0;_<=o;++_)p=_/o,u=Be(t,e,p),h=Be(r,n,p),f=Be(e,i,p),c=Be(n,s,p),d=Be(u,f,p),v=Be(h,c,p),!(_===0&&l[l.length-2]===d&&l[l.length-1]===v)&&l.push(d,v);return l}var Jm={build:function(t){var r=t.shape,e=t.points,n=r.x,i=r.y,s=r.width,a=r.height,o=Math.max(0,Math.min(r.radius,Math.min(s,a)/2));e.length=0,o?(Xr(n,i+o,n,i,n+o,i,e),Xr(n+s-o,i,n+s,i,n+s,i+o,e),Xr(n+s,i+a-o,n+s,i+a,n+s-o,i+a,e),Xr(n+o,i+a,n,i+a,n,i+a-o,e)):e.push(n,i,n+s,i,n+s,i+a,n,i+a)},triangulate:function(t,r){for(var e=t.points,n=r.points,i=r.indices,s=n.length/2,a=ju(e,null,2),o=0,l=a.length;o<l;o+=3)i.push(a[o]+s),i.push(a[o+1]+s),i.push(a[o+2]+s);for(var o=0,l=e.length;o<l;o++)n.push(e[o],e[++o])}};function Pl(t,r,e,n,i,s,a,o){var l=t-e*i,u=r-n*i,h=t+e*s,f=r+n*s,c,d;a?(c=n,d=-e):(c=-n,d=e);var v=l+c,_=u+d,p=h+c,m=f+d;return o.push(v,_),o.push(p,m),2}function Ge(t,r,e,n,i,s,a,o){var l=e-t,u=n-r,h=Math.atan2(l,u),f=Math.atan2(i-t,s-r);o&&h<f?h+=Math.PI*2:!o&&h>f&&(f+=Math.PI*2);var c=h,d=f-h,v=Math.abs(d),_=Math.sqrt(l*l+u*u),p=(15*v*Math.sqrt(_)/Math.PI>>0)+1,m=d/p;if(c+=m,o){a.push(t,r),a.push(e,n);for(var E=1,I=c;E<p;E++,I+=m)a.push(t,r),a.push(t+Math.sin(I)*_,r+Math.cos(I)*_);a.push(t,r),a.push(i,s)}else{a.push(e,n),a.push(t,r);for(var E=1,I=c;E<p;E++,I+=m)a.push(t+Math.sin(I)*_,r+Math.cos(I)*_),a.push(t,r);a.push(i,s),a.push(t,r)}return p*2}function Qm(t,r){var e=t.shape,n=t.points||e.points.slice(),i=r.closePointEps;if(n.length!==0){var s=t.lineStyle,a=new xt(n[0],n[1]),o=new xt(n[n.length-2],n[n.length-1]),l=e.type!==bt.POLY||e.closeStroke,u=Math.abs(a.x-o.x)<i&&Math.abs(a.y-o.y)<i;if(l){n=n.slice(),u&&(n.pop(),n.pop(),o.set(n[n.length-2],n[n.length-1]));var h=(a.x+o.x)*.5,f=(o.y+a.y)*.5;n.unshift(h,f),n.push(h,f)}var c=r.points,d=n.length/2,v=n.length,_=c.length/2,p=s.width/2,m=p*p,E=s.miterLimit*s.miterLimit,I=n[0],C=n[1],y=n[2],w=n[3],T=0,B=0,U=-(C-w),F=I-y,k=0,O=0,q=Math.sqrt(U*U+F*F);U/=q,F/=q,U*=p,F*=p;var W=s.alignment,G=(1-W)*2,g=W*2;l||(s.cap===ue.ROUND?v+=Ge(I-U*(G-g)*.5,C-F*(G-g)*.5,I-U*G,C-F*G,I+U*g,C+F*g,c,!0)+2:s.cap===ue.SQUARE&&(v+=Pl(I,C,U,F,G,g,!0,c))),c.push(I-U*G,C-F*G),c.push(I+U*g,C+F*g);for(var b=1;b<d-1;++b){I=n[(b-1)*2],C=n[(b-1)*2+1],y=n[b*2],w=n[b*2+1],T=n[(b+1)*2],B=n[(b+1)*2+1],U=-(C-w),F=I-y,q=Math.sqrt(U*U+F*F),U/=q,F/=q,U*=p,F*=p,k=-(w-B),O=y-T,q=Math.sqrt(k*k+O*O),k/=q,O/=q,k*=p,O*=p;var x=y-I,S=C-w,R=y-T,A=B-w,N=S*R-A*x,P=N<0;if(Math.abs(N)<.1){c.push(y-U*G,w-F*G),c.push(y+U*g,w+F*g);continue}var D=(-U+I)*(-F+w)-(-U+y)*(-F+C),H=(-k+T)*(-O+w)-(-k+y)*(-O+B),j=(x*H-R*D)/N,$=(A*D-S*H)/N,J=(j-y)*(j-y)+($-w)*($-w),Y=y+(j-y)*G,X=w+($-w)*G,Z=y-(j-y)*g,Q=w-($-w)*g,tt=Math.min(x*x+S*S,R*R+A*A),st=P?G:g,K=tt+st*st*m,V=J<=K;V?s.join===le.BEVEL||J/m>E?(P?(c.push(Y,X),c.push(y+U*g,w+F*g),c.push(Y,X),c.push(y+k*g,w+O*g)):(c.push(y-U*G,w-F*G),c.push(Z,Q),c.push(y-k*G,w-O*G),c.push(Z,Q)),v+=2):s.join===le.ROUND?P?(c.push(Y,X),c.push(y+U*g,w+F*g),v+=Ge(y,w,y+U*g,w+F*g,y+k*g,w+O*g,c,!0)+4,c.push(Y,X),c.push(y+k*g,w+O*g)):(c.push(y-U*G,w-F*G),c.push(Z,Q),v+=Ge(y,w,y-U*G,w-F*G,y-k*G,w-O*G,c,!1)+4,c.push(y-k*G,w-O*G),c.push(Z,Q)):(c.push(Y,X),c.push(Z,Q)):(c.push(y-U*G,w-F*G),c.push(y+U*g,w+F*g),s.join===le.BEVEL||J/m>E||(s.join===le.ROUND?P?v+=Ge(y,w,y+U*g,w+F*g,y+k*g,w+O*g,c,!0)+2:v+=Ge(y,w,y-U*G,w-F*G,y-k*G,w-O*G,c,!1)+2:(P?(c.push(Z,Q),c.push(Z,Q)):(c.push(Y,X),c.push(Y,X)),v+=2)),c.push(y-k*G,w-O*G),c.push(y+k*g,w+O*g),v+=2)}I=n[(d-2)*2],C=n[(d-2)*2+1],y=n[(d-1)*2],w=n[(d-1)*2+1],U=-(C-w),F=I-y,q=Math.sqrt(U*U+F*F),U/=q,F/=q,U*=p,F*=p,c.push(y-U*G,w-F*G),c.push(y+U*g,w+F*g),l||(s.cap===ue.ROUND?v+=Ge(y-U*(G-g)*.5,w-F*(G-g)*.5,y-U*G,w-F*G,y+U*g,w+F*g,c,!1)+2:s.cap===ue.SQUARE&&(v+=Pl(y,w,U,F,G,g,!1,c)));for(var ct=r.indices,yt=pr.epsilon*pr.epsilon,b=_;b<v+_-2;++b)I=c[b*2],C=c[b*2+1],y=c[(b+1)*2],w=c[(b+1)*2+1],T=c[(b+2)*2],B=c[(b+2)*2+1],!(Math.abs(I*(w-B)+y*(B-C)+T*(C-w))<yt)&&ct.push(b,b+1,b+2)}}function tg(t,r){var e=0,n=t.shape,i=t.points||n.points,s=n.type!==bt.POLY||n.closeStroke;if(i.length!==0){var a=r.points,o=r.indices,l=i.length/2,u=a.length/2,h=u;for(a.push(i[0],i[1]),e=1;e<l;e++)a.push(i[e*2],i[e*2+1]),o.push(h,h+1),h++;s&&o.push(h,u)}}function Nl(t,r){t.lineStyle.native?tg(t,r):Qm(t,r)}var Ol=(function(){function t(){}return t.curveTo=function(r,e,n,i,s,a){var o=a[a.length-2],l=a[a.length-1],u=l-e,h=o-r,f=i-e,c=n-r,d=Math.abs(u*c-h*f);if(d<1e-8||s===0)return(a[a.length-2]!==r||a[a.length-1]!==e)&&a.push(r,e),null;var v=u*u+h*h,_=f*f+c*c,p=u*f+h*c,m=s*Math.sqrt(v)/d,E=s*Math.sqrt(_)/d,I=m*p/v,C=E*p/_,y=m*c+E*h,w=m*f+E*u,T=h*(E+I),B=u*(E+I),U=c*(m+C),F=f*(m+C),k=Math.atan2(B-w,T-y),O=Math.atan2(F-w,U-y);return{cx:y+r,cy:w+e,radius:s,startAngle:k,endAngle:O,anticlockwise:h*f>c*u}},t.arc=function(r,e,n,i,s,a,o,l,u){for(var h=o-a,f=pr._segmentsCount(Math.abs(h)*s,Math.ceil(Math.abs(h)/rn)*40),c=h/(f*2),d=c*2,v=Math.cos(c),_=Math.sin(c),p=f-1,m=p%1/p,E=0;E<=p;++E){var I=E+m*E,C=c+a+d*I,y=Math.cos(C),w=-Math.sin(C);u.push((v*y+_*w)*s+n,(v*-w+_*y)*s+i)}},t})(),eg=(function(){function t(){}return t.curveLength=function(r,e,n,i,s,a,o,l){for(var u=10,h=0,f=0,c=0,d=0,v=0,_=0,p=0,m=0,E=0,I=0,C=0,y=r,w=e,T=1;T<=u;++T)f=T/u,c=f*f,d=c*f,v=1-f,_=v*v,p=_*v,m=p*r+3*_*f*n+3*v*c*s+d*o,E=p*e+3*_*f*i+3*v*c*a+d*l,I=y-m,C=w-E,y=m,w=E,h+=Math.sqrt(I*I+C*C);return h},t.curveTo=function(r,e,n,i,s,a,o){var l=o[o.length-2],u=o[o.length-1];o.length-=2;var h=pr._segmentsCount(t.curveLength(l,u,r,e,n,i,s,a)),f=0,c=0,d=0,v=0,_=0;o.push(l,u);for(var p=1,m=0;p<=h;++p)m=p/h,f=1-m,c=f*f,d=c*f,v=m*m,_=v*m,o.push(d*l+3*c*m*r+3*f*v*n+_*s,d*u+3*c*m*e+3*f*v*i+_*a)},t})(),rg=(function(){function t(){}return t.curveLength=function(r,e,n,i,s,a){var o=r-2*n+s,l=e-2*i+a,u=2*n-2*r,h=2*i-2*e,f=4*(o*o+l*l),c=4*(o*u+l*h),d=u*u+h*h,v=2*Math.sqrt(f+c+d),_=Math.sqrt(f),p=2*f*_,m=2*Math.sqrt(d),E=c/_;return(p*v+_*c*(v-m)+(4*d*f-c*c)*Math.log((2*_+E+v)/(E+m)))/(4*p)},t.curveTo=function(r,e,n,i,s){for(var a=s[s.length-2],o=s[s.length-1],l=pr._segmentsCount(t.curveLength(a,o,r,e,n,i)),u=0,h=0,f=1;f<=l;++f){var c=f/l;u=a+(r-a)*c,h=o+(e-o)*c,s.push(u+(r+(n-r)*c-u)*c,h+(e+(i-e)*c-h)*c)}},t})(),ng=(function(){function t(){this.reset()}return t.prototype.begin=function(r,e,n){this.reset(),this.style=r,this.start=e,this.attribStart=n},t.prototype.end=function(r,e){this.attribSize=e-this.attribStart,this.size=r-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t})(),xe,Hi=(xe={},xe[bt.POLY]=Ch,xe[bt.CIRC]=Sl,xe[bt.ELIP]=Sl,xe[bt.RECT]=Zm,xe[bt.RREC]=Jm,xe),Ul=[],jr=[];function ig(t){for(var r=t.points,e=0,n=0;n<r.length-2;n+=2)e+=(r[n+2]-r[n])*(r[n+3]+r[n+1]);return e>0}var Ll=(function(){function t(r,e,n,i){e===void 0&&(e=null),n===void 0&&(n=null),i===void 0&&(i=null),this.points=[],this.holes=[],this.shape=r,this.lineStyle=n,this.fillStyle=e,this.matrix=i,this.type=r.type}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t})(),De=new xt,sg=new nn,ag=(function(t){$s(r,t);function r(){var e=t.call(this)||this;return e.closePointEps=1e-4,e.boundsPadding=0,e.uvsFloat32=null,e.indicesUint16=null,e.batchable=!1,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.drawCalls=[],e.batchDirty=-1,e.batches=[],e.dirty=0,e.cacheDirty=-1,e.clearDirty=0,e.shapeIndex=0,e._bounds=new nn,e.boundsDirty=-1,e}return Object.defineProperty(r.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),r.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),jr.push(this.drawCalls[e]);this.drawCalls.length=0;for(var e=0;e<this.batches.length;e++){var n=this.batches[e];n.reset(),Ul.push(n)}this.batches.length=0},r.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},r.prototype.drawShape=function(e,n,i,s){n===void 0&&(n=null),i===void 0&&(i=null),s===void 0&&(s=null);var a=new Ll(e,n,i,s);return this.graphicsData.push(a),this.dirty++,this},r.prototype.drawHole=function(e,n){if(n===void 0&&(n=null),!this.graphicsData.length)return null;var i=new Ll(e,null,null,n),s=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=s.lineStyle,s.holes.push(i),this.dirty++,this},r.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},r.prototype.containsPoint=function(e){for(var n=this.graphicsData,i=0;i<n.length;++i){var s=n[i];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(e,De):De.copyFrom(e),s.shape.contains(De.x,De.y))){var a=!1;if(s.holes)for(var o=0;o<s.holes.length;o++){var l=s.holes[o];if(l.shape.contains(De.x,De.y)){a=!0;break}}if(!a)return!0}}return!1},r.prototype.updateBatches=function(e){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var n=this.uvs,i=this.graphicsData,s=null,a=null;this.batches.length>0&&(s=this.batches[this.batches.length-1],a=s.style);for(var o=this.shapeIndex;o<i.length;o++){this.shapeIndex++;var l=i[o],u=l.fillStyle,h=l.lineStyle,f=Hi[l.type];f.build(l),l.matrix&&this.transformPoints(l.points,l.matrix);for(var c=0;c<2;c++){var d=c===0?u:h;if(d.visible){var v=d.texture.baseTexture,_=this.indices.length,p=this.points.length/2;v.wrapMode=Ut.REPEAT,c===0?this.processFill(l):this.processLine(l);var m=this.points.length/2-p;m!==0&&(s&&!this._compareStyles(a,d)&&(s.end(_,p),s=null),s||(s=Ul.pop()||new ng,s.begin(d,_,p),this.batches.push(s),a=d),this.addUvs(this.points,n,d.texture,p,m,d.matrix))}}}var E=this.indices.length,I=this.points.length/2;if(s&&s.end(E,I),this.batches.length===0){this.batchable=!0;return}if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var C=I>65535&&e;this.indicesUint16=C?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},r.prototype._compareStyles=function(e,n){return!(!e||!n||e.texture.baseTexture!==n.texture.baseTexture||e.color+e.alpha!==n.color+n.alpha||!!e.native!=!!n.native)},r.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var e=0,n=this.graphicsData.length;e<n;e++){var i=this.graphicsData[e],s=i.fillStyle,a=i.lineStyle;if(s&&!s.texture.baseTexture.valid||a&&!a.texture.baseTexture.valid)return!1}return!0},r.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var e=this.batches,n=0,i=e.length;n<i;n++)for(var s=e[n],a=0;a<s.size;a++){var o=s.start+a;this.indicesUint16[o]=this.indicesUint16[o]-s.attribStart}},r.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var e=this.batches,n=0;n<e.length;n++)if(e[n].style.native)return!1;return this.points.length<r.BATCHABLE_SIZE*2},r.prototype.buildDrawCalls=function(){for(var e=++lt._globalBatch,n=0;n<this.drawCalls.length;n++)this.drawCalls[n].texArray.clear(),jr.push(this.drawCalls[n]);this.drawCalls.length=0;var i=this.colors,s=this.textureIds,a=jr.pop();a||(a=new ms,a.texArray=new gs),a.texArray.count=0,a.start=0,a.size=0,a.type=Xt.TRIANGLES;var o=0,l=null,u=0,h=!1,f=Xt.TRIANGLES,c=0;this.drawCalls.push(a);for(var n=0;n<this.batches.length;n++){var d=this.batches[n],v=8,_=d.style,p=_.texture.baseTexture;h!==!!_.native&&(h=!!_.native,f=h?Xt.LINES:Xt.TRIANGLES,l=null,o=v,e++),l!==p&&(l=p,p._batchEnabled!==e&&(o===v&&(e++,o=0,a.size>0&&(a=jr.pop(),a||(a=new ms,a.texArray=new gs),this.drawCalls.push(a)),a.start=c,a.size=0,a.texArray.count=0,a.type=f),p.touched=1,p._batchEnabled=e,p._batchLocation=o,p.wrapMode=Ut.REPEAT,a.texArray.elements[a.texArray.count++]=p,o++)),a.size+=d.size,c+=d.size,u=p._batchLocation,this.addColors(i,_.color,_.alpha,d.attribSize,d.attribStart),this.addTextureIds(s,u,d.attribSize,d.attribStart)}lt._globalBatch=e,this.packAttributes()},r.prototype.packAttributes=function(){for(var e=this.points,n=this.uvs,i=this.colors,s=this.textureIds,a=new ArrayBuffer(e.length*3*4),o=new Float32Array(a),l=new Uint32Array(a),u=0,h=0;h<e.length/2;h++)o[u++]=e[h*2],o[u++]=e[h*2+1],o[u++]=n[h*2],o[u++]=n[h*2+1],l[u++]=i[h],o[u++]=s[h];this._buffer.update(a),this._indexBuffer.update(this.indicesUint16)},r.prototype.processFill=function(e){if(e.holes.length)this.processHoles(e.holes),Ch.triangulate(e,this);else{var n=Hi[e.type];n.triangulate(e,this)}},r.prototype.processLine=function(e){Nl(e,this);for(var n=0;n<e.holes.length;n++)Nl(e.holes[n],this)},r.prototype.processHoles=function(e){for(var n=0;n<e.length;n++){var i=e[n],s=Hi[i.type];s.build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},r.prototype.calculateBounds=function(){var e=this._bounds,n=sg,i=Tt.IDENTITY;this._bounds.clear(),n.clear();for(var s=0;s<this.graphicsData.length;s++){var a=this.graphicsData[s],o=a.shape,l=a.type,u=a.lineStyle,h=a.matrix||Tt.IDENTITY,f=0;if(u&&u.visible){var c=u.alignment;f=u.width,l===bt.POLY?ig(o)?f=f*(1-c):f=f*c:f=f*Math.max(0,c)}if(i!==h&&(n.isEmpty()||(e.addBoundsMatrix(n,i),n.clear()),i=h),l===bt.RECT||l===bt.RREC){var d=o;n.addFramePad(d.x,d.y,d.x+d.width,d.y+d.height,f,f)}else if(l===bt.CIRC){var v=o;n.addFramePad(v.x,v.y,v.x,v.y,v.radius+f,v.radius+f)}else if(l===bt.ELIP){var _=o;n.addFramePad(_.x,_.y,_.x,_.y,_.width+f,_.height+f)}else{var p=o;e.addVerticesMatrix(i,p.points,0,p.points.length,f,f)}}n.isEmpty()||e.addBoundsMatrix(n,i),e.pad(this.boundsPadding,this.boundsPadding)},r.prototype.transformPoints=function(e,n){for(var i=0;i<e.length/2;i++){var s=e[i*2],a=e[i*2+1];e[i*2]=n.a*s+n.c*a+n.tx,e[i*2+1]=n.b*s+n.d*a+n.ty}},r.prototype.addColors=function(e,n,i,s,a){a===void 0&&(a=0);var o=(n>>16)+(n&65280)+((n&255)<<16),l=qs(o,i);e.length=Math.max(e.length,a+s);for(var u=0;u<s;u++)e[a+u]=l},r.prototype.addTextureIds=function(e,n,i,s){s===void 0&&(s=0),e.length=Math.max(e.length,s+i);for(var a=0;a<i;a++)e[s+a]=n},r.prototype.addUvs=function(e,n,i,s,a,o){o===void 0&&(o=null);for(var l=0,u=n.length,h=i.frame;l<a;){var f=e[(s+l)*2],c=e[(s+l)*2+1];if(o){var d=o.a*f+o.c*c+o.tx;c=o.b*f+o.d*c+o.ty,f=d}l++,n.push(f/h.width,c/h.height)}var v=i.baseTexture;(h.width<v.width||h.height<v.height)&&this.adjustUvs(n,i,u,a)},r.prototype.adjustUvs=function(e,n,i,s){for(var a=n.baseTexture,o=1e-6,l=i+s*2,u=n.frame,h=u.width/a.width,f=u.height/a.height,c=u.x/u.width,d=u.y/u.height,v=Math.floor(e[i]+o),_=Math.floor(e[i+1]+o),p=i+2;p<l;p+=2)v=Math.min(v,Math.floor(e[p]+o)),_=Math.min(_,Math.floor(e[p+1]+o));c-=v,d-=_;for(var p=i;p<l;p+=2)e[p]=(e[p]+c)*h,e[p+1]=(e[p+1]+d)*f},r.BATCHABLE_SIZE=100,r})(xh),og=(function(t){$s(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=ue.BUTT,e.join=le.MITER,e.miterLimit=10,e}return r.prototype.clone=function(){var e=new r;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e},r.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},r})(Rh),lg=new Float32Array(3),Xi={},Ys=(function(t){$s(r,t);function r(e){e===void 0&&(e=null);var n=t.call(this)||this;return n.shader=null,n.pluginName="batch",n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n._fillStyle=new Rh,n._lineStyle=new og,n._matrix=null,n._holeMode=!1,n.state=Ne.for2d(),n._geometry=e||new ag,n._geometry.refCount++,n._transformID=-1,n.tint=16777215,n.blendMode=rt.NORMAL,n}return Object.defineProperty(r.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return this.finishPoly(),new r(this._geometry)},Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),r.prototype.lineStyle=function(e,n,i,s,a){return e===void 0&&(e=null),n===void 0&&(n=0),i===void 0&&(i=1),s===void 0&&(s=.5),a===void 0&&(a=!1),typeof e=="number"&&(e={width:e,color:n,alpha:i,alignment:s,native:a}),this.lineTextureStyle(e)},r.prototype.lineTextureStyle=function(e){e=Object.assign({width:0,texture:nt.WHITE,color:e&&e.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:ue.BUTT,join:le.MITER,miterLimit:10},e),this.currentPath&&this.startPoly();var n=e.width>0&&e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:n},e)):this._lineStyle.reset(),this},r.prototype.startPoly=function(){if(this.currentPath){var e=this.currentPath.points,n=this.currentPath.points.length;n>2&&(this.drawShape(this.currentPath),this.currentPath=new $r,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[n-2],e[n-1]))}else this.currentPath=new $r,this.currentPath.closeStroke=!1},r.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},r.prototype.moveTo=function(e,n){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=n,this},r.prototype.lineTo=function(e,n){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,s=i[i.length-2],a=i[i.length-1];return(s!==e||a!==n)&&i.push(e,n),this},r.prototype._initCurve=function(e,n){e===void 0&&(e=0),n===void 0&&(n=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,n]):this.moveTo(e,n)},r.prototype.quadraticCurveTo=function(e,n,i,s){this._initCurve();var a=this.currentPath.points;return a.length===0&&this.moveTo(0,0),rg.curveTo(e,n,i,s,a),this},r.prototype.bezierCurveTo=function(e,n,i,s,a,o){return this._initCurve(),eg.curveTo(e,n,i,s,a,o,this.currentPath.points),this},r.prototype.arcTo=function(e,n,i,s,a){this._initCurve(e,n);var o=this.currentPath.points,l=Ol.curveTo(e,n,i,s,a,o);if(l){var u=l.cx,h=l.cy,f=l.radius,c=l.startAngle,d=l.endAngle,v=l.anticlockwise;this.arc(u,h,f,c,d,v)}return this},r.prototype.arc=function(e,n,i,s,a,o){if(o===void 0&&(o=!1),s===a)return this;!o&&a<=s?a+=rn:o&&s<=a&&(s+=rn);var l=a-s;if(l===0)return this;var u=e+Math.cos(s)*i,h=n+Math.sin(s)*i,f=this._geometry.closePointEps,c=this.currentPath?this.currentPath.points:null;if(c){var d=Math.abs(c[c.length-2]-u),v=Math.abs(c[c.length-1]-h);d<f&&v<f||c.push(u,h)}else this.moveTo(u,h),c=this.currentPath.points;return Ol.arc(u,h,e,n,i,s,a,o,c),this},r.prototype.beginFill=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=1),this.beginTextureFill({texture:nt.WHITE,color:e,alpha:n})},r.prototype.beginTextureFill=function(e){e=Object.assign({texture:nt.WHITE,color:16777215,alpha:1,matrix:null},e),this.currentPath&&this.startPoly();var n=e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:n},e)):this._fillStyle.reset(),this},r.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},r.prototype.drawRect=function(e,n,i,s){return this.drawShape(new ut(e,n,i,s))},r.prototype.drawRoundedRect=function(e,n,i,s,a){return this.drawShape(new vv(e,n,i,s,a))},r.prototype.drawCircle=function(e,n,i){return this.drawShape(new dv(e,n,i))},r.prototype.drawEllipse=function(e,n,i,s){return this.drawShape(new pv(e,n,i,s))},r.prototype.drawPolygon=function(){for(var e=arguments,n=[],i=0;i<arguments.length;i++)n[i]=e[i];var s,a=!0,o=n[0];o.points?(a=o.closeStroke,s=o.points):Array.isArray(n[0])?s=n[0]:s=n;var l=new $r(s);return l.closeStroke=a,this.drawShape(l),this},r.prototype.drawShape=function(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},r.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},r.prototype.isFastRect=function(){var e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===bt.RECT&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)},r.prototype._render=function(e){this.finishPoly();var n=this._geometry,i=e.context.supports.uint32Indices;n.updateBatches(i),n.batchable?(this.batchDirty!==n.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))},r.prototype._populateBatches=function(){var e=this._geometry,n=this.blendMode,i=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(e.points);for(var s=0;s<i;s++){var a=e.batches[s],o=a.style.color,l=new Float32Array(this.vertexData.buffer,a.attribStart*4*2,a.attribSize*2),u=new Float32Array(e.uvsFloat32.buffer,a.attribStart*4*2,a.attribSize*2),h=new Uint16Array(e.indicesUint16.buffer,a.start*2,a.size),f={vertexData:l,blendMode:n,indices:h,uvs:u,_batchRGB:ze(o),_tintRGB:o,_texture:a.style.texture,alpha:a.style.alpha,worldAlpha:1};this.batches[s]=f}},r.prototype._renderBatched=function(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var n=0,i=this.batches.length;n<i;n++){var s=this.batches[n];s.worldAlpha=this.worldAlpha*s.alpha,e.plugins[this.pluginName].render(s)}}},r.prototype._renderDirect=function(e){var n=this._resolveDirectShader(e),i=this._geometry,s=this.tint,a=this.worldAlpha,o=n.uniforms,l=i.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(s>>16&255)/255*a,o.tint[1]=(s>>8&255)/255*a,o.tint[2]=(s&255)/255*a,o.tint[3]=a,e.shader.bind(n),e.geometry.bind(i,n),e.state.set(this.state);for(var u=0,h=l.length;u<h;u++)this._renderDrawCallDirect(e,i.drawCalls[u])},r.prototype._renderDrawCallDirect=function(e,n){for(var i=n.texArray,s=n.type,a=n.size,o=n.start,l=i.count,u=0;u<l;u++)e.texture.bind(i.elements[u],u);e.geometry.draw(s,a,o)},r.prototype._resolveDirectShader=function(e){var n=this.shader,i=this.pluginName;if(!n){if(!Xi[i]){for(var s=e.plugins.batch.MAX_TEXTURES,a=new Int32Array(s),o=0;o<s;o++)a[o]=o;var l={tint:new Float32Array([1,1,1,1]),translationMatrix:new Tt,default:Ce.from({uSamplers:a},!0)},u=e.plugins[i]._shader.program;Xi[i]=new he(u,l)}n=Xi[i]}return n},r.prototype._calculateBounds=function(){this.finishPoly();var e=this._geometry;if(e.graphicsData.length){var n=e.bounds,i=n.minX,s=n.minY,a=n.maxX,o=n.maxY;this._bounds.addFrame(this.transform,i,s,a,o)}},r.prototype.containsPoint=function(e){return this.worldTransform.applyInverse(e,r._TEMP_POINT),this._geometry.containsPoint(r._TEMP_POINT)},r.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var e=ze(this.tint,lg),n=0;n<this.batches.length;n++){var i=this.batches[n],s=i._batchRGB,a=e[0]*s[0]*255,o=e[1]*s[1]*255,l=e[2]*s[2]*255,u=(a<<16)+(o<<8)+(l|0);i._tintRGB=(u>>16)+(u&65280)+((u&255)<<16)}}},r.prototype.calculateVertices=function(){var e=this.transform._worldID;if(this._transformID!==e){this._transformID=e;for(var n=this.transform.worldTransform,i=n.a,s=n.b,a=n.c,o=n.d,l=n.tx,u=n.ty,h=this._geometry.points,f=this.vertexData,c=0,d=0;d<h.length;d+=2){var v=h[d],_=h[d+1];f[c++]=i*v+a*_+l,f[c++]=o*_+s*v+u}}},r.prototype.closePath=function(){var e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this},r.prototype.setMatrix=function(e){return this._matrix=e,this},r.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},r.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},r.prototype.destroy=function(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},r._TEMP_POINT=new xt,r})(Lt);var Is=function(t,r){return Is=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},Is(t,r)};function ug(t,r){Is(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var nr=new xt,hg=new Uint16Array([0,1,2,0,2,3]),te=(function(t){ug(r,t);function r(e){var n=t.call(this)||this;return n._anchor=new je(n._onAnchorUpdate,n,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=rt.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=e||nt.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=hg,n.pluginName="batch",n.isSprite=!0,n._roundPixels=et.ROUND_PIXELS,n}return r.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Xe(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Xe(this.scale.y)*this._height/this._texture.orig.height)},r.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},r.prototype.calculateVertices=function(){var e=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===e._updateID)){this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;var n=this.transform.worldTransform,i=n.a,s=n.b,a=n.c,o=n.d,l=n.tx,u=n.ty,h=this.vertexData,f=e.trim,c=e.orig,d=this._anchor,v=0,_=0,p=0,m=0;if(f?(_=f.x-d._x*c.width,v=_+f.width,m=f.y-d._y*c.height,p=m+f.height):(_=-d._x*c.width,v=_+c.width,m=-d._y*c.height,p=m+c.height),h[0]=i*_+a*m+l,h[1]=o*m+s*_+u,h[2]=i*v+a*m+l,h[3]=o*m+s*v+u,h[4]=i*v+a*p+l,h[5]=o*p+s*v+u,h[6]=i*_+a*p+l,h[7]=o*p+s*_+u,this._roundPixels)for(var E=et.RESOLUTION,I=0;I<h.length;++I)h[I]=Math.round((h[I]*E|0)/E)}},r.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,n=this.vertexTrimmedData,i=e.orig,s=this._anchor,a=this.transform.worldTransform,o=a.a,l=a.b,u=a.c,h=a.d,f=a.tx,c=a.ty,d=-s._x*i.width,v=d+i.width,_=-s._y*i.height,p=_+i.height;n[0]=o*d+u*_+f,n[1]=h*_+l*d+c,n[2]=o*v+u*_+f,n[3]=h*_+l*v+c,n[4]=o*v+u*p+f,n[5]=h*p+l*v+c,n[6]=o*d+u*p+f,n[7]=h*p+l*d+c},r.prototype._render=function(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},r.prototype._calculateBounds=function(){var e=this._texture.trim,n=this._texture.orig;!e||e.width===n.width&&e.height===n.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},r.prototype.getLocalBounds=function(e){return this.children.length===0?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new ut),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},r.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,nr);var n=this._texture.orig.width,i=this._texture.orig.height,s=-n*this.anchor.x,a=0;return nr.x>=s&&nr.x<s+n&&(a=-i*this.anchor.y,nr.y>=a&&nr.y<a+i)},r.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var n=typeof e=="boolean"?e:e&&e.texture;if(n){var i=typeof e=="boolean"?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null},r.from=function(e,n){var i=e instanceof nt?e:nt.from(e,n);return new r(i)},Object.defineProperty(r.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var n=Xe(this.scale.x)||1;this.scale.x=n*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var n=Xe(this.scale.y)||1;this.scale.y=n*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"anchor",{get:function(){return this._anchor},set:function(e){this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||nt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),r})(Lt);var Rs=function(t,r){return Rs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},Rs(t,r)};function cg(t,r){Rs(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var vr;(function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(vr||(vr={}));var ji={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:vr.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},fg=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],We=(function(){function t(r){this.styleID=0,this.reset(),qi(this,r,r)}return t.prototype.clone=function(){var r={};return qi(r,this,ji),new t(r)},t.prototype.reset=function(){qi(this,ji,ji)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(r){this._align!==r&&(this._align=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(r){this._breakWords!==r&&(this._breakWords=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(r){this._dropShadow!==r&&(this._dropShadow=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(r){this._dropShadowAlpha!==r&&(this._dropShadowAlpha=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(r){this._dropShadowAngle!==r&&(this._dropShadowAngle=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(r){this._dropShadowBlur!==r&&(this._dropShadowBlur=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(r){var e=Vi(r);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(r){this._dropShadowDistance!==r&&(this._dropShadowDistance=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(r){var e=Vi(r);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(r){this._fillGradientType!==r&&(this._fillGradientType=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(r){dg(this._fillGradientStops,r)||(this._fillGradientStops=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(r){this.fontFamily!==r&&(this._fontFamily=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(r){this._fontSize!==r&&(this._fontSize=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(r){this._fontStyle!==r&&(this._fontStyle=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(r){this._fontVariant!==r&&(this._fontVariant=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(r){this._fontWeight!==r&&(this._fontWeight=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(r){this._lineHeight!==r&&(this._lineHeight=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(r){this._leading!==r&&(this._leading=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(r){this._lineJoin!==r&&(this._lineJoin=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(r){this._miterLimit!==r&&(this._miterLimit=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(r){this._padding!==r&&(this._padding=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(r){var e=Vi(r);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(r){this._strokeThickness!==r&&(this._strokeThickness=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(r){this._textBaseline!==r&&(this._textBaseline=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(r){this._trim!==r&&(this._trim=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(r){this._whiteSpace!==r&&(this._whiteSpace=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(r){this._wordWrap!==r&&(this._wordWrap=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(r){this._wordWrapWidth!==r&&(this._wordWrapWidth=r,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var r=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var n=e.length-1;n>=0;n--){var i=e[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&fg.indexOf(i)<0&&(i='"'+i+'"'),e[n]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+r+" "+e.join(",")},t})();function Fl(t){return typeof t=="number"?Qu(t):(typeof t=="string"&&t.indexOf("0x")===0&&(t=t.replace("0x","#")),t)}function Vi(t){if(Array.isArray(t)){for(var r=0;r<t.length;++r)t[r]=Fl(t[r]);return t}else return Fl(t)}function dg(t,r){if(!Array.isArray(t)||!Array.isArray(r)||t.length!==r.length)return!1;for(var e=0;e<t.length;++e)if(t[e]!==r[e])return!1;return!0}function qi(t,r,e){for(var n in e)Array.isArray(r[n])?t[n]=r[n].slice():t[n]=r[n]}var Ft=(function(){function t(r,e,n,i,s,a,o,l,u){this.text=r,this.style=e,this.width=n,this.height=i,this.lines=s,this.lineWidths=a,this.lineHeight=o,this.maxLineWidth=l,this.fontProperties=u}return t.measureText=function(r,e,n,i){i===void 0&&(i=t._canvas),n=n??e.wordWrap;var s=e.toFontString(),a=t.measureFont(s);a.fontSize===0&&(a.fontSize=e.fontSize,a.ascent=e.fontSize);var o=i.getContext("2d");o.font=s;for(var l=n?t.wordWrap(r,e,i):r,u=l.split(/(?:\r\n|\r|\n)/),h=new Array(u.length),f=0,c=0;c<u.length;c++){var d=o.measureText(u[c]).width+(u[c].length-1)*e.letterSpacing;h[c]=d,f=Math.max(f,d)}var v=f+e.strokeThickness;e.dropShadow&&(v+=e.dropShadowDistance);var _=e.lineHeight||a.fontSize+e.strokeThickness,p=Math.max(_,a.fontSize+e.strokeThickness)+(u.length-1)*(_+e.leading);return e.dropShadow&&(p+=e.dropShadowDistance),new t(r,e,v,p,u,h,_+e.leading,f,a)},t.wordWrap=function(r,e,n){n===void 0&&(n=t._canvas);for(var i=n.getContext("2d"),s=0,a="",o="",l=Object.create(null),u=e.letterSpacing,h=e.whiteSpace,f=t.collapseSpaces(h),c=t.collapseNewlines(h),d=!f,v=e.wordWrapWidth+u,_=t.tokenize(r),p=0;p<_.length;p++){var m=_[p];if(t.isNewline(m)){if(!c){o+=t.addLine(a),d=!f,a="",s=0;continue}m=" "}if(f){var E=t.isBreakingSpace(m),I=t.isBreakingSpace(a[a.length-1]);if(E&&I)continue}var C=t.getFromCache(m,u,l,i);if(C>v)if(a!==""&&(o+=t.addLine(a),a="",s=0),t.canBreakWords(m,e.breakWords))for(var y=t.wordWrapSplit(m),w=0;w<y.length;w++){for(var T=y[w],B=1;y[w+B];){var U=y[w+B],F=T[T.length-1];if(!t.canBreakChars(F,U,m,w,e.breakWords))T+=U;else break;B++}w+=T.length-1;var k=t.getFromCache(T,u,l,i);k+s>v&&(o+=t.addLine(a),d=!1,a="",s=0),a+=T,s+=k}else{a.length>0&&(o+=t.addLine(a),a="",s=0);var O=p===_.length-1;o+=t.addLine(m,!O),d=!1,a="",s=0}else C+s>v&&(d=!1,o+=t.addLine(a),a="",s=0),(a.length>0||!t.isBreakingSpace(m)||d)&&(a+=m,s+=C)}return o+=t.addLine(a,!1),o},t.addLine=function(r,e){return e===void 0&&(e=!0),r=t.trimRight(r),r=e?r+`
`:r,r},t.getFromCache=function(r,e,n,i){var s=n[r];if(typeof s!="number"){var a=r.length*e;s=i.measureText(r).width+a,n[r]=s}return s},t.collapseSpaces=function(r){return r==="normal"||r==="pre-line"},t.collapseNewlines=function(r){return r==="normal"},t.trimRight=function(r){if(typeof r!="string")return"";for(var e=r.length-1;e>=0;e--){var n=r[e];if(!t.isBreakingSpace(n))break;r=r.slice(0,-1)}return r},t.isNewline=function(r){return typeof r!="string"?!1:t._newlines.indexOf(r.charCodeAt(0))>=0},t.isBreakingSpace=function(r,e){return typeof r!="string"?!1:t._breakingSpaces.indexOf(r.charCodeAt(0))>=0},t.tokenize=function(r){var e=[],n="";if(typeof r!="string")return e;for(var i=0;i<r.length;i++){var s=r[i],a=r[i+1];if(t.isBreakingSpace(s,a)||t.isNewline(s)){n!==""&&(e.push(n),n=""),e.push(s);continue}n+=s}return n!==""&&e.push(n),e},t.canBreakWords=function(r,e){return e},t.canBreakChars=function(r,e,n,i,s){return!0},t.wordWrapSplit=function(r){return r.split("")},t.measureFont=function(r){if(t._fonts[r])return t._fonts[r];var e={ascent:0,descent:0,fontSize:0},n=t._canvas,i=t._context;i.font=r;var s=t.METRICS_STRING+t.BASELINE_SYMBOL,a=Math.ceil(i.measureText(s).width),o=Math.ceil(i.measureText(t.BASELINE_SYMBOL).width),l=Math.ceil(t.HEIGHT_MULTIPLIER*o);o=o*t.BASELINE_MULTIPLIER|0,n.width=a,n.height=l,i.fillStyle="#f00",i.fillRect(0,0,a,l),i.font=r,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s,0,o);var u=i.getImageData(0,0,a,l).data,h=u.length,f=a*4,c=0,d=0,v=!1;for(c=0;c<o;++c){for(var _=0;_<f;_+=4)if(u[d+_]!==255){v=!0;break}if(!v)d+=f;else break}for(e.ascent=o-c,d=h-f,v=!1,c=l;c>o;--c){for(var _=0;_<f;_+=4)if(u[d+_]!==255){v=!0;break}if(!v)d-=f;else break}return e.descent=c-o,e.fontSize=e.ascent+e.descent,t._fonts[r]=e,e},t.clearMetrics=function(r){r===void 0&&(r=""),r?delete t._fonts[r]:t._fonts={}},t})(),an=(function(){try{var t=new OffscreenCanvas(0,0),r=t.getContext("2d");return r&&r.measureText?t:document.createElement("canvas")}catch{return document.createElement("canvas")}})();an.width=an.height=10;Ft._canvas=an;Ft._context=an.getContext("2d");Ft._fonts={};Ft.METRICS_STRING="|ÉqÅ";Ft.BASELINE_SYMBOL="M";Ft.BASELINE_MULTIPLIER=1.4;Ft.HEIGHT_MULTIPLIER=2;Ft._newlines=[10,13];Ft._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var pg={texture:!0,children:!1,baseTexture:!0},Ml="letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype,Ah=(function(t){cg(r,t);function r(e,n,i){var s=this,a=!1;i||(i=document.createElement("canvas"),a=!0),i.width=3,i.height=3;var o=nt.from(i);return o.orig=new ut,o.trim=new ut,s=t.call(this,o)||this,s._ownCanvas=a,s.canvas=i,s.context=s.canvas.getContext("2d"),s._resolution=et.RESOLUTION,s._autoResolution=!0,s._text=null,s._style=null,s._styleListener=null,s._font="",s.text=e,s.style=n,s.localStyleID=-1,s}return r.prototype.updateText=function(e){var n=this._style;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),!(!this.dirty&&e)){this._font=this._style.toFontString();var i=this.context,s=Ft.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=s.width,o=s.height,l=s.lines,u=s.lineHeight,h=s.lineWidths,f=s.maxLineWidth,c=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,a)+n.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+n.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=n.strokeThickness,i.textBaseline=n.textBaseline,i.lineJoin=n.lineJoin,i.miterLimit=n.miterLimit;for(var d,v,_=n.dropShadow?2:1,p=0;p<_;++p){var m=n.dropShadow&&p===0,E=m?Math.ceil(Math.max(1,o)+n.padding*2):0,I=E*this._resolution;if(m){i.fillStyle="black",i.strokeStyle="black";var C=n.dropShadowColor,y=ze(typeof C=="number"?C:Qr(C));i.shadowColor="rgba("+y[0]*255+","+y[1]*255+","+y[2]*255+","+n.dropShadowAlpha+")",i.shadowBlur=n.dropShadowBlur,i.shadowOffsetX=Math.cos(n.dropShadowAngle)*n.dropShadowDistance,i.shadowOffsetY=Math.sin(n.dropShadowAngle)*n.dropShadowDistance+I}else i.fillStyle=this._generateFillStyle(n,l,s),i.strokeStyle=n.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;var w=(u-c.fontSize)/2;(!r.nextLineHeightBehavior||u-c.fontSize<0)&&(w=0);for(var T=0;T<l.length;T++)d=n.strokeThickness/2,v=n.strokeThickness/2+T*u+c.ascent+w,n.align==="right"?d+=f-h[T]:n.align==="center"&&(d+=(f-h[T])/2),n.stroke&&n.strokeThickness&&this.drawLetterSpacing(l[T],d+n.padding,v+n.padding-E,!0),n.fill&&this.drawLetterSpacing(l[T],d+n.padding,v+n.padding-E)}this.updateTexture()}},r.prototype.drawLetterSpacing=function(e,n,i,s){s===void 0&&(s=!1);var a=this._style,o=a.letterSpacing;if(o===0||Ml){Ml&&(this.context.letterSpacing=o,this.context.textLetterSpacing=o),s?this.context.strokeText(e,n,i):this.context.fillText(e,n,i);return}for(var l=n,u=Array.from?Array.from(e):e.split(""),h=this.context.measureText(e).width,f=0,c=0;c<u.length;++c){var d=u[c];s?this.context.strokeText(d,l,i):this.context.fillText(d,l,i),f=this.context.measureText(e.substring(c+1)).width,l+=h-f+o,h=f}},r.prototype.updateTexture=function(){var e=this.canvas;if(this._style.trim){var n=uv(e);n.data&&(e.width=n.width,e.height=n.height,this.context.putImageData(n.data,0,0))}var i=this._texture,s=this._style,a=s.trim?0:s.padding,o=i.baseTexture;i.trim.width=i._frame.width=e.width/this._resolution,i.trim.height=i._frame.height=e.height/this._resolution,i.trim.x=-a,i.trim.y=-a,i.orig.width=i._frame.width-a*2,i.orig.height=i._frame.height-a*2,this._onTextureUpdate(),o.setRealSize(e.width,e.height,this._resolution),i.updateUvs(),this._recursivePostUpdateTransform(),this.dirty=!1},r.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},r.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},r.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},r.prototype._generateFillStyle=function(e,n,i){var s=e.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;var a,o=e.dropShadow?e.dropShadowDistance:0,l=e.padding||0,u=this.canvas.width/this._resolution-o-l*2,h=this.canvas.height/this._resolution-o-l*2,f=s.slice(),c=e.fillGradientStops.slice();if(!c.length)for(var d=f.length+1,v=1;v<d;++v)c.push(v/d);if(f.unshift(s[0]),c.unshift(0),f.push(s[s.length-1]),c.push(1),e.fillGradientType===vr.LINEAR_VERTICAL){a=this.context.createLinearGradient(u/2,l,u/2,h+l);for(var _=i.fontProperties.fontSize+e.strokeThickness,v=0;v<n.length;v++){var p=i.lineHeight*(v-1)+_,m=i.lineHeight*v,E=m;v>0&&p>m&&(E=(m+p)/2);var I=m+_,C=i.lineHeight*(v+1),y=I;v+1<n.length&&C<I&&(y=(I+C)/2);for(var w=(y-E)/h,T=0;T<f.length;T++){var B=0;typeof c[T]=="number"?B=c[T]:B=T/f.length;var U=Math.min(1,Math.max(0,E/h+B*w));U=Number(U.toFixed(5)),a.addColorStop(U,f[T])}}}else{a=this.context.createLinearGradient(l,h/2,u+l,h/2);for(var F=f.length+1,k=1,v=0;v<f.length;v++){var O=void 0;typeof c[v]=="number"?O=c[v]:O=k/F,a.addColorStop(O,f[v]),k++}}return a},r.prototype.destroy=function(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},pg,e),t.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(r.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var n=Xe(this.scale.x)||1;this.scale.x=n*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var n=Xe(this.scale.y)||1;this.scale.y=n*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"style",{get:function(){return this._style},set:function(e){e=e||{},e instanceof We?this._style=e:this._style=new We(e),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"text",{get:function(){return this._text},set:function(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)},enumerable:!1,configurable:!0}),r.nextLineHeightBehavior=!1,r})(te);et.UPLOADS_PER_FRAME=4;var Cs=function(t,r){return Cs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},Cs(t,r)};function vg(t,r){Cs(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var _g=(function(){function t(r){this.maxItemsPerFrame=r,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t})();function mg(t,r){var e=!1;if(t&&t._textures&&t._textures.length){for(var n=0;n<t._textures.length;n++)if(t._textures[n]instanceof nt){var i=t._textures[n].baseTexture;r.indexOf(i)===-1&&(r.push(i),e=!0)}}return e}function gg(t,r){if(t.baseTexture instanceof lt){var e=t.baseTexture;return r.indexOf(e)===-1&&r.push(e),!0}return!1}function yg(t,r){if(t._texture&&t._texture instanceof nt){var e=t._texture.baseTexture;return r.indexOf(e)===-1&&r.push(e),!0}return!1}function bg(t,r){return r instanceof Ah?(r.updateText(!0),!0):!1}function xg(t,r){if(r instanceof We){var e=r.toFontString();return Ft.measureFont(e),!0}return!1}function Tg(t,r){if(t instanceof Ah){r.indexOf(t.style)===-1&&r.push(t.style),r.indexOf(t)===-1&&r.push(t);var e=t._texture.baseTexture;return r.indexOf(e)===-1&&r.push(e),!0}return!1}function Eg(t,r){return t instanceof We?(r.indexOf(t)===-1&&r.push(t),!0):!1}var wg=(function(){function t(r){var e=this;this.limiter=new _g(et.UPLOADS_PER_FRAME),this.renderer=r,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(Tg),this.registerFindHook(Eg),this.registerFindHook(mg),this.registerFindHook(gg),this.registerFindHook(yg),this.registerUploadHook(bg),this.registerUploadHook(xg)}return t.prototype.upload=function(r,e){typeof r=="function"&&(e=r,r=null),r&&this.add(r),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,Rt.system.addOnce(this.tick,this,re.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var r=this.queue[0],e=!1;if(r&&!r._destroyed){for(var n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,r)){this.queue.shift(),e=!0;break}}e||this.queue.shift()}if(this.queue.length)Rt.system.addOnce(this.tick,this,re.UTILITY);else{this.ticking=!1;var s=this.completes.slice(0);this.completes.length=0;for(var n=0,i=s.length;n<i;n++)s[n]()}},t.prototype.registerFindHook=function(r){return r&&this.addHooks.push(r),this},t.prototype.registerUploadHook=function(r){return r&&this.uploadHooks.push(r),this},t.prototype.add=function(r){for(var e=0,n=this.addHooks.length;e<n&&!this.addHooks[e](r,this.queue);e++);if(r instanceof Lt)for(var e=r.children.length-1;e>=0;e--)this.add(r.children[e]);return this},t.prototype.destroy=function(){this.ticking&&Rt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t})();function Sh(t,r){return r instanceof lt?(r._glTextures[t.CONTEXT_UID]||t.texture.bind(r),!0):!1}function Ig(t,r){if(!(r instanceof Ys))return!1;var e=r.geometry;r.finishPoly(),e.updateBatches();for(var n=e.batches,i=0;i<n.length;i++){var s=n[i].style.texture;s&&Sh(t,s.baseTexture)}return e.batchable||t.geometry.bind(e,r._resolveDirectShader(t)),!0}function Rg(t,r){return t instanceof Ys?(r.push(t),!0):!1}var Cg=(function(t){vg(r,t);function r(e){var n=t.call(this,e)||this;return n.uploadHookHelper=n.renderer,n.registerFindHook(Rg),n.registerUploadHook(Sh),n.registerUploadHook(Ig),n}return r})(wg);var Ag=(function(){function t(r,e,n){n===void 0&&(n=null),this._texture=r instanceof nt?r:null,this.baseTexture=r instanceof lt?r:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var i=this.baseTexture.resource;this.resolution=this._updateResolution(n||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(r){r===void 0&&(r=null);var e=this.data.meta.scale,n=en(r,null);return n===null&&(n=e!==void 0?parseFloat(e):1),n!==1&&this.baseTexture.setResolution(n),n},t.prototype.parse=function(r){this._batchIndex=0,this._callback=r,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(r){for(var e=r,n=t.BATCH_SIZE;e-r<n&&e<this._frameKeys.length;){var i=this._frameKeys[e],s=this._frames[i],a=s.frame;if(a){var o=null,l=null,u=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,h=new ut(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);s.rotated?o=new ut(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):o=new ut(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new ut(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[i]=new nt(this.baseTexture,o,h,l,s.rotated?2:0,s.anchor),nt.addToCache(this.textures[i],i)}e++}},t.prototype._processAnimations=function(){var r=this.data.animations||{};for(var e in r){this.animations[e]=[];for(var n=0;n<r[e].length;n++){var i=r[e][n];this.animations[e].push(this.textures[i])}}},t.prototype._parseComplete=function(){var r=this._callback;this._callback=null,this._batchIndex=0,r.call(this,this.textures)},t.prototype._nextBatch=function(){var r=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){r._batchIndex*t.BATCH_SIZE<r._frameKeys.length?r._nextBatch():(r._processAnimations(),r._parseComplete())},0)},t.prototype.destroy=function(r){var e;r===void 0&&(r=!1);for(var n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,r&&((e=this._texture)===null||e===void 0||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},t.BATCH_SIZE=1e3,t})(),Sg=(function(){function t(){}return t.use=function(r,e){var n,i,s=this,a=r.name+"_image";if(!r.data||r.type!==gt.TYPE.JSON||!r.data.frames||s.resources[a]){e();return}var o=(i=(n=r.data)===null||n===void 0?void 0:n.meta)===null||i===void 0?void 0:i.related_multi_packs;if(Array.isArray(o))for(var l=function(v){if(typeof v!="string")return"continue";var _=v.replace(".json",""),p=He.resolve(r.url.replace(s.baseUrl,""),v);if(s.resources[_]||Object.values(s.resources).some(function(E){return He.format(He.parse(E.url))===p}))return"continue";var m={crossOrigin:r.crossOrigin,loadType:gt.LOAD_TYPE.XHR,xhrType:gt.XHR_RESPONSE_TYPE.JSON,parentResource:r,metadata:r.metadata};s.add(_,p,m)},u=0,h=o;u<h.length;u++){var f=h[u];l(f)}var c={crossOrigin:r.crossOrigin,metadata:r.metadata.imageMetadata,parentResource:r},d=t.getResourcePath(r,s.baseUrl);s.add(a,d,c,function(_){if(_.error){e(_.error);return}var p=new Ag(_.texture,r.data,r.url);p.parse(function(){r.spritesheet=p,r.textures=p.textures,e()})})},t.getResourcePath=function(r,e){return r.isDataUrl?r.data.meta.image:He.resolve(r.url.replace(e,""),r.data.meta.image)},t})();var As=function(t,r){return As=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},As(t,r)};function Ph(t,r){As(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var ir=new xt;(function(t){Ph(r,t);function r(e,n,i){n===void 0&&(n=100),i===void 0&&(i=100);var s=t.call(this,e)||this;return s.tileTransform=new sh,s._width=n,s._height=i,s.uvMatrix=s.texture.uvMatrix||new Ws(e),s.pluginName="tilingSprite",s.uvRespectAnchor=!1,s}return Object.defineProperty(r.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copyFrom(e)},enumerable:!1,configurable:!0}),r.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},r.prototype._render=function(e){var n=this._texture;!n||!n.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))},r.prototype._calculateBounds=function(){var e=this._width*-this._anchor._x,n=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),s=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,n,i,s)},r.prototype.getLocalBounds=function(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new ut),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},r.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,ir);var n=this._width,i=this._height,s=-n*this.anchor._x;if(ir.x>=s&&ir.x<s+n){var a=-i*this.anchor._y;if(ir.y>=a&&ir.y<a+i)return!0}return!1},r.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},r.from=function(e,n){var i=e instanceof nt?e:nt.from(e,n);return new r(i,n.width,n.height)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!1,configurable:!0}),r})(te);var Pg=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,Bl=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,Ng=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,Og=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,Ug=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,Vr=new Tt,Lg=(function(t){Ph(r,t);function r(e){var n=t.call(this,e)||this;return e.runners.contextChange.add(n),n.quad=new dh,n.state=Ne.for2d(),n}return r.prototype.contextChange=function(){var e=this.renderer,n={globals:e.globalUniforms};this.simpleShader=he.from(Bl,Pg,n),this.shader=e.context.webGLVersion>1?he.from(Og,Ug,n):he.from(Bl,Ng,n)},r.prototype.render=function(e){var n=this.renderer,i=this.quad,s=i.vertices;s[0]=s[6]=e._width*-e.anchor.x,s[1]=s[3]=e._height*-e.anchor.y,s[2]=s[4]=e._width*(1-e.anchor.x),s[5]=s[7]=e._height*(1-e.anchor.y);var a=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;s=i.uvs,s[0]=s[6]=-a,s[1]=s[3]=-o,s[2]=s[4]=1-a,s[5]=s[7]=1-o,i.invalidate();var l=e._texture,u=l.baseTexture,h=e.tileTransform.localTransform,f=e.uvMatrix,c=u.isPowerOfTwo&&l.frame.width===u.width&&l.frame.height===u.height;c&&(u._glTextures[n.CONTEXT_UID]?c=u.wrapMode!==Ut.CLAMP:u.wrapMode===Ut.CLAMP&&(u.wrapMode=Ut.REPEAT));var d=c?this.simpleShader:this.shader,v=l.width,_=l.height,p=e._width,m=e._height;Vr.set(h.a*v/p,h.b*v/m,h.c*_/p,h.d*_/m,h.tx/p,h.ty/m),Vr.invert(),c?Vr.prepend(f.mapCoord):(d.uniforms.uMapCoord=f.mapCoord.toArray(!0),d.uniforms.uClampFrame=f.uClampFrame,d.uniforms.uClampOffset=f.uClampOffset),d.uniforms.uTransform=Vr.toArray(!0),d.uniforms.uColor=rh(e.tint,e.worldAlpha,d.uniforms.uColor,u.alphaMode),d.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),d.uniforms.uSampler=l,n.shader.bind(d),n.geometry.bind(i),this.state.blendMode=eh(e.blendMode,u.alphaMode),n.state.set(this.state),n.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},r})(fn);var Ss=function(t,r){return Ss=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},Ss(t,r)};function Ks(t,r){Ss(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Fg=(function(){function t(r,e){this.uvBuffer=r,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(r){if(!(!r&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},t})(),zi=new xt,Gl=new $r,_r=(function(t){Ks(r,t);function r(e,n,i,s){s===void 0&&(s=Xt.TRIANGLES);var a=t.call(this)||this;return a.geometry=e,a.shader=n,a.state=i||Ne.for2d(),a.drawMode=s,a.start=0,a.size=0,a.uvs=null,a.indices=null,a.vertexData=new Float32Array(1),a.vertexDirty=-1,a._transformID=-1,a._roundPixels=et.ROUND_PIXELS,a.batchUvs=null,a}return Object.defineProperty(r.prototype,"geometry",{get:function(){return this._geometry},set:function(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"material",{get:function(){return this.shader},set:function(e){this.shader=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(e){this.shader.tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(e){this.shader.texture=e},enumerable:!1,configurable:!0}),r.prototype._render=function(e){var n=this.geometry.buffers[0].data,i=this.shader;i.batchable&&this.drawMode===Xt.TRIANGLES&&n.length<r.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)},r.prototype._renderDefault=function(e){var n=this.shader;n.alpha=this.worldAlpha,n.update&&n.update(),e.batch.flush(),n.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(n),e.state.set(this.state),e.geometry.bind(this.geometry,n),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},r.prototype._renderToBatch=function(e){var n=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=n.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;var s=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[s]),e.plugins[s].render(this)},r.prototype.calculateVertices=function(){var e=this.geometry,n=e.buffers[0],i=n.data,s=n._updateID;if(!(s===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));for(var a=this.transform.worldTransform,o=a.a,l=a.b,u=a.c,h=a.d,f=a.tx,c=a.ty,d=this.vertexData,v=0;v<d.length/2;v++){var _=i[v*2],p=i[v*2+1];d[v*2]=o*_+u*p+f,d[v*2+1]=l*_+h*p+c}if(this._roundPixels)for(var m=et.RESOLUTION,v=0;v<d.length;++v)d[v]=Math.round((d[v]*m|0)/m);this.vertexDirty=s}},r.prototype.calculateUvs=function(){var e=this.geometry.buffers[1],n=this.shader;n.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new Fg(e,n.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},r.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},r.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,zi);for(var n=this.geometry.getBuffer("aVertexPosition").data,i=Gl.points,s=this.geometry.getIndex().data,a=s.length,o=this.drawMode===4?3:1,l=0;l+2<a;l+=o){var u=s[l]*2,h=s[l+1]*2,f=s[l+2]*2;if(i[0]=n[u],i[1]=n[u+1],i[2]=n[h],i[3]=n[h+1],i[4]=n[f],i[5]=n[f+1],Gl.contains(zi.x,zi.y))return!0}return!1},r.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},r.BATCHABLE_SIZE=100,r})(Lt),Mg=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,Bg=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,mr=(function(t){Ks(r,t);function r(e,n){var i=this,s={uSampler:e,alpha:1,uTextureMatrix:Tt.IDENTITY,uColor:new Float32Array([1,1,1,1])};return n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n),n.uniforms&&Object.assign(s,n.uniforms),i=t.call(this,n.program||xr.from(Bg,Mg),s)||this,i._colorDirty=!1,i.uvMatrix=new Ws(e),i.batchable=n.program===void 0,i.pluginName=n.pluginName,i.tint=n.tint,i.alpha=n.alpha,i}return Object.defineProperty(r.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(e){this.uniforms.uSampler!==e&&(this.uniforms.uSampler=e,this.uvMatrix.texture=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"alpha",{get:function(){return this._alpha},set:function(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(e){e!==this._tint&&(this._tint=e,this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),r.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var e=this.texture.baseTexture;rh(this._tint,this._alpha,this.uniforms.uColor,e.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},r})(he),pn=(function(t){Ks(r,t);function r(e,n,i){var s=t.call(this)||this,a=new It(e),o=new It(n,!0),l=new It(i,!0,!0);return s.addAttribute("aVertexPosition",a,2,!1,it.FLOAT).addAttribute("aTextureCoord",o,2,!1,it.FLOAT).addIndex(l),s._updateId=-1,s}return Object.defineProperty(r.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),r})(br);var Ps=function(t,r){return Ps=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},Ps(t,r)};function Gg(t,r){Ps(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var on=(function(){function t(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}return t})(),Dg=(function(){function t(){}return t.test=function(r){return typeof r=="string"&&r.indexOf("info face=")===0},t.parse=function(r){var e=r.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var i in e){var s=e[i].match(/^[a-z]+/gm)[0],a=e[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),o={};for(var l in a){var u=a[l].split("="),h=u[0],f=u[1].replace(/"/gm,""),c=parseFloat(f),d=isNaN(c)?f:c;o[h]=d}n[s].push(o)}var v=new on;return n.info.forEach(function(_){return v.info.push({face:_.face,size:parseInt(_.size,10)})}),n.common.forEach(function(_){return v.common.push({lineHeight:parseInt(_.lineHeight,10)})}),n.page.forEach(function(_){return v.page.push({id:parseInt(_.id,10),file:_.file})}),n.char.forEach(function(_){return v.char.push({id:parseInt(_.id,10),page:parseInt(_.page,10),x:parseInt(_.x,10),y:parseInt(_.y,10),width:parseInt(_.width,10),height:parseInt(_.height,10),xoffset:parseInt(_.xoffset,10),yoffset:parseInt(_.yoffset,10),xadvance:parseInt(_.xadvance,10)})}),n.kerning.forEach(function(_){return v.kerning.push({first:parseInt(_.first,10),second:parseInt(_.second,10),amount:parseInt(_.amount,10)})}),n.distanceField.forEach(function(_){return v.distanceField.push({distanceRange:parseInt(_.distanceRange,10),fieldType:_.fieldType})}),v},t})(),Ns=(function(){function t(){}return t.test=function(r){return r instanceof XMLDocument&&r.getElementsByTagName("page").length&&r.getElementsByTagName("info")[0].getAttribute("face")!==null},t.parse=function(r){for(var e=new on,n=r.getElementsByTagName("info"),i=r.getElementsByTagName("common"),s=r.getElementsByTagName("page"),a=r.getElementsByTagName("char"),o=r.getElementsByTagName("kerning"),l=r.getElementsByTagName("distanceField"),u=0;u<n.length;u++)e.info.push({face:n[u].getAttribute("face"),size:parseInt(n[u].getAttribute("size"),10)});for(var u=0;u<i.length;u++)e.common.push({lineHeight:parseInt(i[u].getAttribute("lineHeight"),10)});for(var u=0;u<s.length;u++)e.page.push({id:parseInt(s[u].getAttribute("id"),10)||0,file:s[u].getAttribute("file")});for(var u=0;u<a.length;u++){var h=a[u];e.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(var u=0;u<o.length;u++)e.kerning.push({first:parseInt(o[u].getAttribute("first"),10),second:parseInt(o[u].getAttribute("second"),10),amount:parseInt(o[u].getAttribute("amount"),10)});for(var u=0;u<l.length;u++)e.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return e},t})(),kg=(function(){function t(){}return t.test=function(r){if(typeof r=="string"&&r.indexOf("<font>")>-1){var e=new self.DOMParser().parseFromString(r,"text/xml");return Ns.test(e)}return!1},t.parse=function(r){var e=new self.DOMParser().parseFromString(r,"text/xml");return Ns.parse(e)},t})(),Wi=[Dg,Ns,kg];function Nh(t){for(var r=0;r<Wi.length;r++)if(Wi[r].test(t))return Wi[r];return null}function Hg(t,r,e,n,i,s){var a=e.fill;if(Array.isArray(a)){if(a.length===1)return a[0]}else return a;var o,l=e.dropShadow?e.dropShadowDistance:0,u=e.padding||0,h=t.width/n-l-u*2,f=t.height/n-l-u*2,c=a.slice(),d=e.fillGradientStops.slice();if(!d.length)for(var v=c.length+1,_=1;_<v;++_)d.push(_/v);if(c.unshift(a[0]),d.unshift(0),c.push(a[a.length-1]),d.push(1),e.fillGradientType===vr.LINEAR_VERTICAL){o=r.createLinearGradient(h/2,u,h/2,f+u);for(var p=0,m=s.fontProperties.fontSize+e.strokeThickness,E=m/f,_=0;_<i.length;_++)for(var I=s.lineHeight*_,C=0;C<c.length;C++){var y=0;typeof d[C]=="number"?y=d[C]:y=C/c.length;var w=I/f+y*E,T=Math.max(p,w);T=Math.min(T,1),o.addColorStop(T,c[C]),p=T}}else{o=r.createLinearGradient(u,f/2,h+u,f/2);for(var B=c.length+1,U=1,_=0;_<c.length;_++){var F=void 0;typeof d[_]=="number"?F=d[_]:F=U/B,o.addColorStop(F,c[_]),U++}}return o}function Xg(t,r,e,n,i,s,a){var o=e.text,l=e.fontProperties;r.translate(n,i),r.scale(s,s);var u=a.strokeThickness/2,h=-(a.strokeThickness/2);r.font=a.toFontString(),r.lineWidth=a.strokeThickness,r.textBaseline=a.textBaseline,r.lineJoin=a.lineJoin,r.miterLimit=a.miterLimit,r.fillStyle=Hg(t,r,a,s,[o],e),r.strokeStyle=a.stroke;var f=a.dropShadowColor,c=ze(typeof f=="number"?f:Qr(f));a.dropShadow?(r.shadowColor="rgba("+c[0]*255+","+c[1]*255+","+c[2]*255+","+a.dropShadowAlpha+")",r.shadowBlur=a.dropShadowBlur,r.shadowOffsetX=Math.cos(a.dropShadowAngle)*a.dropShadowDistance,r.shadowOffsetY=Math.sin(a.dropShadowAngle)*a.dropShadowDistance):(r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0),a.stroke&&a.strokeThickness&&r.strokeText(o,u,h+e.lineHeight-l.descent),a.fill&&r.fillText(o,u,h+e.lineHeight-l.descent),r.setTransform(1,0,0,1,0,0),r.fillStyle="rgba(0, 0, 0, 0)"}function Oh(t){return Array.from?Array.from(t):t.split("")}function jg(t){typeof t=="string"&&(t=[t]);for(var r=[],e=0,n=t.length;e<n;e++){var i=t[e];if(Array.isArray(i)){if(i.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var s=i[0].charCodeAt(0),a=i[1].charCodeAt(0);if(a<s)throw new Error("[BitmapFont]: Invalid character range.");for(var o=s,l=a;o<=l;o++)r.push(String.fromCharCode(o))}else r.push.apply(r,Oh(i))}if(r.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return r}function Yr(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}var ke=(function(){function t(r,e,n){var i,s,a=r.info[0],o=r.common[0],l=r.page[0],u=r.distanceField[0],h=en(l.file),f={};this._ownsTextures=n,this.font=a.face,this.size=a.size,this.lineHeight=o.lineHeight/h,this.chars={},this.pageTextures=f;for(var c=0;c<r.page.length;c++){var d=r.page[c],v=d.id,_=d.file;f[v]=e instanceof Array?e[c]:e[_],u?.fieldType&&u.fieldType!=="none"&&(f[v].baseTexture.alphaMode=zt.NO_PREMULTIPLIED_ALPHA)}for(var c=0;c<r.char.length;c++){var p=r.char[c],v=p.id,m=p.page,E=r.char[c],I=E.x,C=E.y,y=E.width,w=E.height,T=E.xoffset,B=E.yoffset,U=E.xadvance;I/=h,C/=h,y/=h,w/=h,T/=h,B/=h,U/=h;var F=new ut(I+f[m].frame.x/h,C+f[m].frame.y/h,y,w);this.chars[v]={xOffset:T,yOffset:B,xAdvance:U,kerning:{},texture:new nt(f[m].baseTexture,F),page:m}}for(var c=0;c<r.kerning.length;c++){var k=r.kerning[c],O=k.first,q=k.second,W=k.amount;O/=h,q/=h,W/=h,this.chars[q]&&(this.chars[q].kerning[O]=W)}this.distanceFieldRange=u?.distanceRange,this.distanceFieldType=(s=(i=u?.fieldType)===null||i===void 0?void 0:i.toLowerCase())!==null&&s!==void 0?s:"none"}return t.prototype.destroy=function(){for(var r in this.chars)this.chars[r].texture.destroy(),this.chars[r].texture=null;for(var r in this.pageTextures)this._ownsTextures&&this.pageTextures[r].destroy(!0),this.pageTextures[r]=null;this.chars=null,this.pageTextures=null},t.install=function(r,e,n){var i;if(r instanceof on)i=r;else{var s=Nh(r);if(!s)throw new Error("Unrecognized data format for font.");i=s.parse(r)}e instanceof nt&&(e=[e]);var a=new t(i,e,n);return t.available[a.font]=a,a},t.uninstall=function(r){var e=t.available[r];if(!e)throw new Error("No font found named '"+r+"'");e.destroy(),delete t.available[r]},t.from=function(r,e,n){if(!r)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},t.defaultOptions,n),s=i.chars,a=i.padding,o=i.resolution,l=i.textureWidth,u=i.textureHeight,h=jg(s),f=e instanceof We?e:new We(e),c=l,d=new on;d.info[0]={face:f.fontFamily,size:f.fontSize},d.common[0]={lineHeight:f.fontSize};for(var v=0,_=0,p,m,E,I=0,C=[],y=0;y<h.length;y++){p||(p=document.createElement("canvas"),p.width=l,p.height=u,m=p.getContext("2d"),E=new lt(p,{resolution:o}),C.push(new nt(E)),d.page.push({id:C.length-1,file:""}));var w=Ft.measureText(h[y],f,!1,p),T=w.width,B=Math.ceil(w.height),U=Math.ceil((f.fontStyle==="italic"?2:1)*T);if(_>=u-B*o){if(_===0)throw new Error("[BitmapFont] textureHeight "+u+"px is "+("too small for "+f.fontSize+"px fonts"));--y,p=null,m=null,E=null,_=0,v=0,I=0;continue}if(I=Math.max(B+w.fontProperties.descent,I),U*o+v>=c){--y,_+=I*o,_=Math.ceil(_),v=0,I=0;continue}Xg(p,m,w,v,_,o,f);var F=Yr(w.text);d.char.push({id:F,page:C.length-1,x:v/o,y:_/o,width:U,height:B,xoffset:0,yoffset:0,xadvance:Math.ceil(T-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0))}),v+=(U+2*a)*o,v=Math.ceil(v)}for(var y=0,k=h.length;y<k;y++)for(var O=h[y],q=0;q<k;q++){var W=h[q],G=m.measureText(O).width,g=m.measureText(W).width,b=m.measureText(O+W).width,x=b-(G+g);x&&d.kerning.push({first:Yr(O),second:Yr(W),amount:x})}var S=new t(d,C,!0);return t.available[r]!==void 0&&t.uninstall(r),t.available[r]=S,S},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t})(),Vg=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,qg=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,zg=[],Wg=[],Dl=[];(function(t){Gg(r,t);function r(e,n){n===void 0&&(n={});var i=t.call(this)||this;i._tint=16777215;var s=Object.assign({},r.styleDefaults,n),a=s.align,o=s.tint,l=s.maxWidth,u=s.letterSpacing,h=s.fontName,f=s.fontSize;if(!ke.available[h])throw new Error('Missing BitmapFont "'+h+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=a,i._tint=o,i._fontName=h,i._fontSize=f||ke.available[h].size,i._text=e,i._maxWidth=l,i._maxLineHeight=0,i._letterSpacing=u,i._anchor=new je(function(){i.dirty=!0},i,0,0),i._roundPixels=et.ROUND_PIXELS,i.dirty=!0,i._textureCache={},i}return r.prototype.updateText=function(){for(var e,n=ke.available[this._fontName],i=this._fontSize/n.size,s=new xt,a=[],o=[],l=[],u=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",h=Oh(u),f=this._maxWidth*n.size/this._fontSize,c=n.distanceFieldType==="none"?zg:Wg,d=null,v=0,_=0,p=0,m=-1,E=0,I=0,C=0,y=0,w=0;w<h.length;w++){var T=h[w],B=Yr(T);if(/(?:\s)/.test(T)&&(m=w,E=v,y++),T==="\r"||T===`
`){o.push(v),l.push(-1),_=Math.max(_,v),++p,++I,s.x=0,s.y+=n.lineHeight,d=null,y=0;continue}var U=n.chars[B];if(U){d&&U.kerning[d]&&(s.x+=U.kerning[d]);var F=Dl.pop()||{texture:nt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new xt};F.texture=U.texture,F.line=p,F.charCode=B,F.position.x=s.x+U.xOffset+this._letterSpacing/2,F.position.y=s.y+U.yOffset,F.prevSpaces=y,a.push(F),v=F.position.x+U.texture.orig.width,s.x+=U.xAdvance+this._letterSpacing,C=Math.max(C,U.yOffset+U.texture.height),d=B,m!==-1&&f>0&&s.x>f&&(++I,Ve(a,1+m-I,1+w-m),w=m,m=-1,o.push(E),l.push(a.length>0?a[a.length-1].prevSpaces:0),_=Math.max(_,E),p++,s.x=0,s.y+=n.lineHeight,d=null,y=0)}}var k=h[h.length-1];k!=="\r"&&k!==`
`&&(/(?:\s)/.test(k)&&(v=E),o.push(v),_=Math.max(_,v),l.push(-1));for(var O=[],w=0;w<=p;w++){var q=0;this._align==="right"?q=_-o[w]:this._align==="center"?q=(_-o[w])/2:this._align==="justify"&&(q=l[w]<0?0:(_-o[w])/l[w]),O.push(q)}for(var W=a.length,G={},g=[],b=this._activePagesMeshData,w=0;w<b.length;w++)c.push(b[w]);for(var w=0;w<W;w++){var x=a[w].texture,S=x.baseTexture.uid;if(!G[S]){var R=c.pop();if(!R){var A=new pn,N=void 0,P=void 0;n.distanceFieldType==="none"?(N=new mr(nt.EMPTY),P=rt.NORMAL):(N=new mr(nt.EMPTY,{program:xr.from(qg,Vg),uniforms:{uFWidth:0}}),P=rt.NORMAL_NPM);var D=new _r(A,N);D.blendMode=P,R={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:D,vertices:null,uvs:null,indices:null}}R.index=0,R.indexCount=0,R.vertexCount=0,R.uvsCount=0,R.total=0;var H=this._textureCache;H[S]=H[S]||new nt(x.baseTexture),R.mesh.texture=H[S],R.mesh.tint=this._tint,g.push(R),G[S]=R}G[S].total++}for(var w=0;w<b.length;w++)g.indexOf(b[w])===-1&&this.removeChild(b[w].mesh);for(var w=0;w<g.length;w++)g[w].mesh.parent!==this&&this.addChild(g[w].mesh);this._activePagesMeshData=g;for(var w in G){var R=G[w],j=R.total;if(!(((e=R.indices)===null||e===void 0?void 0:e.length)>6*j)||R.vertices.length<_r.BATCHABLE_SIZE*2)R.vertices=new Float32Array(8*j),R.uvs=new Float32Array(8*j),R.indices=new Uint16Array(6*j);else for(var $=R.total,J=R.vertices,Y=$*4*2;Y<J.length;Y++)J[Y]=0;R.mesh.size=6*j}for(var w=0;w<W;w++){var T=a[w],X=T.position.x+O[T.line]*(this._align==="justify"?T.prevSpaces:1);this._roundPixels&&(X=Math.round(X));var Z=X*i,Q=T.position.y*i,x=T.texture,tt=G[x.baseTexture.uid],st=x.frame,K=x._uvs,V=tt.index++;tt.indices[V*6+0]=0+V*4,tt.indices[V*6+1]=1+V*4,tt.indices[V*6+2]=2+V*4,tt.indices[V*6+3]=0+V*4,tt.indices[V*6+4]=2+V*4,tt.indices[V*6+5]=3+V*4,tt.vertices[V*8+0]=Z,tt.vertices[V*8+1]=Q,tt.vertices[V*8+2]=Z+st.width*i,tt.vertices[V*8+3]=Q,tt.vertices[V*8+4]=Z+st.width*i,tt.vertices[V*8+5]=Q+st.height*i,tt.vertices[V*8+6]=Z,tt.vertices[V*8+7]=Q+st.height*i,tt.uvs[V*8+0]=K.x0,tt.uvs[V*8+1]=K.y0,tt.uvs[V*8+2]=K.x1,tt.uvs[V*8+3]=K.y1,tt.uvs[V*8+4]=K.x2,tt.uvs[V*8+5]=K.y2,tt.uvs[V*8+6]=K.x3,tt.uvs[V*8+7]=K.y3}this._textWidth=_*i,this._textHeight=(s.y+n.lineHeight)*i;for(var w in G){var R=G[w];if(this.anchor.x!==0||this.anchor.y!==0)for(var ct=0,yt=this._textWidth*this.anchor.x,Mt=this._textHeight*this.anchor.y,Bt=0;Bt<R.total;Bt++)R.vertices[ct++]-=yt,R.vertices[ct++]-=Mt,R.vertices[ct++]-=yt,R.vertices[ct++]-=Mt,R.vertices[ct++]-=yt,R.vertices[ct++]-=Mt,R.vertices[ct++]-=yt,R.vertices[ct++]-=Mt;this._maxLineHeight=C*i;var St=R.mesh.geometry.getBuffer("aVertexPosition"),$t=R.mesh.geometry.getBuffer("aTextureCoord"),Yt=R.mesh.geometry.getIndex();St.data=R.vertices,$t.data=R.uvs,Yt.data=R.indices,St.update(),$t.update(),Yt.update()}for(var w=0;w<a.length;w++)Dl.push(a[w])},r.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},r.prototype._render=function(e){var n=ke.available[this._fontName],i=n.distanceFieldRange,s=n.distanceFieldType,a=n.size;if(s!=="none")for(var o=this.worldTransform,l=o.a,u=o.b,h=o.c,f=o.d,c=Math.sqrt(l*l+u*u),d=Math.sqrt(h*h+f*f),v=(Math.abs(c)+Math.abs(d))/2,_=this._fontSize/a,p=0,m=this._activePagesMeshData;p<m.length;p++){var E=m[p];E.mesh.shader.uniforms.uFWidth=v*i*_*e.resolution}t.prototype._render.call(this,e)},r.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},r.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(e){if(this._tint!==e){this._tint=e;for(var n=0;n<this._activePagesMeshData.length;n++)this._activePagesMeshData[n].mesh.tint=e}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontName",{get:function(){return this._fontName},set:function(e){if(!ke.available[e])throw new Error('Missing BitmapFont "'+e+'"');this._fontName!==e&&(this._fontName=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"anchor",{get:function(){return this._anchor},set:function(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"text",{get:function(){return this._text},set:function(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),r.prototype.destroy=function(e){var n=this._textureCache;for(var i in n){var s=n[i];s.destroy(),delete n[i]}this._textureCache=null,t.prototype.destroy.call(this,e)},r.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},r})(Lt);var $g=(function(){function t(){}return t.add=function(){gt.setExtensionXhrType("fnt",gt.XHR_RESPONSE_TYPE.TEXT)},t.use=function(r,e){var n=Nh(r.data);if(!n){e();return}for(var i=t.getBaseUrl(this,r),s=n.parse(r.data),a={},o=function(_){a[_.metadata.pageFile]=_.texture,Object.keys(a).length===s.page.length&&(r.bitmapFont=ke.install(s,a,!0),e())},l=0;l<s.page.length;++l){var u=s.page[l].file,h=i+u,f=!1;for(var c in this.resources){var d=this.resources[c];if(d.url===h){d.metadata.pageFile=u,d.texture?o(d):d.onAfterMiddleware.add(o),f=!0;break}}if(!f){var v={crossOrigin:r.crossOrigin,loadType:gt.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},r.metadata.imageMetadata),parentResource:r};this.add(h,v,o)}}},t.getBaseUrl=function(r,e){var n=e.isDataUrl?"":t.dirname(e.url);return e.isDataUrl&&(n==="."&&(n=""),r.baseUrl&&n&&r.baseUrl.charAt(r.baseUrl.length-1)==="/"&&(n+="/")),n=n.replace(r.baseUrl,""),n&&n.charAt(n.length-1)!=="/"&&(n+="/"),n},t.dirname=function(r){var e=r.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===r?".":e===""?"/":e},t})();var Os=function(t,r){return Os=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},Os(t,r)};function Yg(t,r){Os(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Kg=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;(function(t){Yg(r,t);function r(e){e===void 0&&(e=1);var n=t.call(this,rm,Kg,{uAlpha:1})||this;return n.alpha=e,n}return Object.defineProperty(r.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0}),r})(de);var Us=function(t,r){return Us=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},Us(t,r)};function Uh(t,r){Us(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Zg=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function Jg(t,r){var e=Math.ceil(t/2),n=Zg,i="",s;r?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<t;a++){var o=s.replace("%index%",a.toString());o=o.replace("%sampleIndex%",a-(e-1)+".0"),i+=o,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",t.toString()),n}var Qg={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},ty=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function ey(t){for(var r=Qg[t],e=r.length,n=ty,i="",s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",a,o=0;o<t;o++){var l=s.replace("%index%",o.toString());a=o,o>=e&&(a=t-o-1),l=l.replace("%value%",r[a].toString()),i+=l,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",t.toString()),n}var kl;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(kl||(kl={}));var Hl;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(Hl||(Hl={}));var Xl;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(Xl||(Xl={}));var jl;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(jl||(jl={}));var Vl;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Vl||(Vl={}));var ql;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(ql||(ql={}));var zl;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(zl||(zl={}));var Wl;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(Wl||(Wl={}));var $l;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})($l||($l={}));var Yl;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(Yl||(Yl={}));var Kl;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Kl||(Kl={}));var Zl;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(Zl||(Zl={}));var Jl;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Jl||(Jl={}));var gr;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(gr||(gr={}));var Ql;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Ql||(Ql={}));var tu;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(tu||(tu={}));var eu;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"})(eu||(eu={}));var ru;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(ru||(ru={}));var nu;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(nu||(nu={}));var iu=(function(t){Uh(r,t);function r(e,n,i,s,a){n===void 0&&(n=8),i===void 0&&(i=4),s===void 0&&(s=et.FILTER_RESOLUTION),a===void 0&&(a=5);var o=this,l=Jg(a,e),u=ey(a);return o=t.call(this,l,u)||this,o.horizontal=e,o.resolution=s,o._quality=0,o.quality=i,o.blur=n,o}return r.prototype.apply=function(e,n,i,s){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/n.width):this.uniforms.strength=1/i.height*(i.height/n.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/n.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/n.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,n,i,s);else{var a=e.getFilterTexture(),o=e.renderer,l=n,u=a;this.state.blend=!1,e.applyFilter(this,l,u,gr.CLEAR);for(var h=1;h<this.passes-1;h++){e.bindAndClear(l,gr.BLIT),this.uniforms.uSampler=u;var f=u;u=l,l=f,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,u,i,s),e.returnFilterTexture(a)}},Object.defineProperty(r.prototype,"blur",{get:function(){return this.strength},set:function(e){this.padding=1+Math.abs(e)*2,this.strength=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"quality",{get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e},enumerable:!1,configurable:!0}),r})(de);(function(t){Uh(r,t);function r(e,n,i,s){e===void 0&&(e=8),n===void 0&&(n=4),i===void 0&&(i=et.FILTER_RESOLUTION),s===void 0&&(s=5);var a=t.call(this)||this;return a.blurXFilter=new iu(!0,e,n,i,s),a.blurYFilter=new iu(!1,e,n,i,s),a.resolution=i,a.quality=n,a.blur=e,a.repeatEdgePixels=!1,a}return r.prototype.apply=function(e,n,i,s){var a=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(a&&o){var l=e.getFilterTexture();this.blurXFilter.apply(e,n,l,gr.CLEAR),this.blurYFilter.apply(e,l,i,s),e.returnFilterTexture(l)}else o?this.blurYFilter.apply(e,n,i,s):this.blurXFilter.apply(e,n,i,s)},r.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(r.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(e){this.blurYFilter.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(e){this._repeatEdgePixels=e,this.updatePadding()},enumerable:!1,configurable:!0}),r})(de);var Ls=function(t,r){return Ls=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},Ls(t,r)};function ry(t,r){Ls(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var ny=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,su=(function(t){ry(r,t);function r(){var e=this,n={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return e=t.call(this,bh,ny,n)||this,e.alpha=1,e}return r.prototype._loadMatrix=function(e,n){n===void 0&&(n=!1);var i=e;n&&(this._multiply(i,this.uniforms.m,e),i=this._colorMatrix(i)),this.uniforms.m=i},r.prototype._multiply=function(e,n,i){return e[0]=n[0]*i[0]+n[1]*i[5]+n[2]*i[10]+n[3]*i[15],e[1]=n[0]*i[1]+n[1]*i[6]+n[2]*i[11]+n[3]*i[16],e[2]=n[0]*i[2]+n[1]*i[7]+n[2]*i[12]+n[3]*i[17],e[3]=n[0]*i[3]+n[1]*i[8]+n[2]*i[13]+n[3]*i[18],e[4]=n[0]*i[4]+n[1]*i[9]+n[2]*i[14]+n[3]*i[19]+n[4],e[5]=n[5]*i[0]+n[6]*i[5]+n[7]*i[10]+n[8]*i[15],e[6]=n[5]*i[1]+n[6]*i[6]+n[7]*i[11]+n[8]*i[16],e[7]=n[5]*i[2]+n[6]*i[7]+n[7]*i[12]+n[8]*i[17],e[8]=n[5]*i[3]+n[6]*i[8]+n[7]*i[13]+n[8]*i[18],e[9]=n[5]*i[4]+n[6]*i[9]+n[7]*i[14]+n[8]*i[19]+n[9],e[10]=n[10]*i[0]+n[11]*i[5]+n[12]*i[10]+n[13]*i[15],e[11]=n[10]*i[1]+n[11]*i[6]+n[12]*i[11]+n[13]*i[16],e[12]=n[10]*i[2]+n[11]*i[7]+n[12]*i[12]+n[13]*i[17],e[13]=n[10]*i[3]+n[11]*i[8]+n[12]*i[13]+n[13]*i[18],e[14]=n[10]*i[4]+n[11]*i[9]+n[12]*i[14]+n[13]*i[19]+n[14],e[15]=n[15]*i[0]+n[16]*i[5]+n[17]*i[10]+n[18]*i[15],e[16]=n[15]*i[1]+n[16]*i[6]+n[17]*i[11]+n[18]*i[16],e[17]=n[15]*i[2]+n[16]*i[7]+n[17]*i[12]+n[18]*i[17],e[18]=n[15]*i[3]+n[16]*i[8]+n[17]*i[13]+n[18]*i[18],e[19]=n[15]*i[4]+n[16]*i[9]+n[17]*i[14]+n[18]*i[19]+n[19],e},r.prototype._colorMatrix=function(e){var n=new Float32Array(e);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n},r.prototype.brightness=function(e,n){var i=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(i,n)},r.prototype.tint=function(e,n){var i=e>>16&255,s=e>>8&255,a=e&255,o=[i/255,0,0,0,0,0,s/255,0,0,0,0,0,a/255,0,0,0,0,0,1,0];this._loadMatrix(o,n)},r.prototype.greyscale=function(e,n){var i=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(i,n)},r.prototype.blackAndWhite=function(e){var n=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(n,e)},r.prototype.hue=function(e,n){e=(e||0)/180*Math.PI;var i=Math.cos(e),s=Math.sin(e),a=Math.sqrt,o=1/3,l=a(o),u=i+(1-i)*o,h=o*(1-i)-l*s,f=o*(1-i)+l*s,c=o*(1-i)+l*s,d=i+o*(1-i),v=o*(1-i)-l*s,_=o*(1-i)-l*s,p=o*(1-i)+l*s,m=i+o*(1-i),E=[u,h,f,0,0,c,d,v,0,0,_,p,m,0,0,0,0,0,1,0];this._loadMatrix(E,n)},r.prototype.contrast=function(e,n){var i=(e||0)+1,s=-.5*(i-1),a=[i,0,0,0,s,0,i,0,0,s,0,0,i,0,s,0,0,0,1,0];this._loadMatrix(a,n)},r.prototype.saturate=function(e,n){e===void 0&&(e=0);var i=e*2/3+1,s=(i-1)*-.5,a=[i,s,s,0,0,s,i,s,0,0,s,s,i,0,0,0,0,0,1,0];this._loadMatrix(a,n)},r.prototype.desaturate=function(){this.saturate(-1)},r.prototype.negative=function(e){var n=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(n,e)},r.prototype.sepia=function(e){var n=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(n,e)},r.prototype.technicolor=function(e){var n=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(n,e)},r.prototype.polaroid=function(e){var n=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(n,e)},r.prototype.toBGR=function(e){var n=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(n,e)},r.prototype.kodachrome=function(e){var n=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(n,e)},r.prototype.browni=function(e){var n=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(n,e)},r.prototype.vintage=function(e){var n=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(n,e)},r.prototype.colorTone=function(e,n,i,s,a){e=e||.2,n=n||.15,i=i||16770432,s=s||3375104;var o=(i>>16&255)/255,l=(i>>8&255)/255,u=(i&255)/255,h=(s>>16&255)/255,f=(s>>8&255)/255,c=(s&255)/255,d=[.3,.59,.11,0,0,o,l,u,e,0,h,f,c,n,0,o-h,l-f,u-c,0,0];this._loadMatrix(d,a)},r.prototype.night=function(e,n){e=e||.1;var i=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(i,n)},r.prototype.predator=function(e,n){var i=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(i,n)},r.prototype.lsd=function(e){var n=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(n,e)},r.prototype.reset=function(){var e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)},Object.defineProperty(r.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0}),r})(de);su.prototype.grayscale=su.prototype.greyscale;var Fs=function(t,r){return Fs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},Fs(t,r)};function iy(t,r){Fs(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var sy=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,ay=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,oy=(function(t){iy(r,t);function r(e,n){var i=this,s=new Tt;return e.renderable=!1,i=t.call(this,ay,sy,{mapSampler:e._texture,filterMatrix:s,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,i.maskSprite=e,i.maskMatrix=s,n==null&&(n=20),i.scale=new xt(n,n),i}return r.prototype.apply=function(e,n,i,s){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var a=this.maskSprite.worldTransform,o=Math.sqrt(a.a*a.a+a.b*a.b),l=Math.sqrt(a.c*a.c+a.d*a.d);o!==0&&l!==0&&(this.uniforms.rotation[0]=a.a/o,this.uniforms.rotation[1]=a.b/o,this.uniforms.rotation[2]=a.c/l,this.uniforms.rotation[3]=a.d/l),e.applyFilter(this,n,i,s)},Object.defineProperty(r.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e},enumerable:!1,configurable:!0}),r})(de);var Ms=function(t,r){return Ms=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},Ms(t,r)};function ly(t,r){Ms(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var uy=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,hy=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`;(function(t){ly(r,t);function r(){return t.call(this,uy,hy)||this}return r})(de);var Bs=function(t,r){return Bs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},Bs(t,r)};function cy(t,r){Bs(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var fy=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;(function(t){cy(r,t);function r(e,n){e===void 0&&(e=.5),n===void 0&&(n=Math.random());var i=t.call(this,bh,fy,{uNoise:0,uSeed:0})||this;return i.noise=e,i.seed=n,i}return Object.defineProperty(r.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e},enumerable:!1,configurable:!0}),r})(de);var au;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(au||(au={}));var ou;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(ou||(ou={}));var lu;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(lu||(lu={}));var uu;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(uu||(uu={}));var hu;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(hu||(hu={}));var cu;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(cu||(cu={}));var fu;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(fu||(fu={}));var du;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(du||(du={}));var pu;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(pu||(pu={}));var vu;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(vu||(vu={}));var _u;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(_u||(_u={}));var mu;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(mu||(mu={}));var gu;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(gu||(gu={}));var yu;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(yu||(yu={}));var bu;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(bu||(bu={}));var xu;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(xu||(xu={}));var Tu;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"})(Tu||(Tu={}));var Gs;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(Gs||(Gs={}));var Eu;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Eu||(Eu={}));var Lh=new Tt;Et.prototype._cacheAsBitmap=!1;Et.prototype._cacheData=null;Et.prototype._cacheAsBitmapResolution=null;Et.prototype._cacheAsBitmapMultisample=Gs.NONE;var dy=(function(){function t(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return t})();Object.defineProperties(Et.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var r;t?(this._cacheData||(this._cacheData=new dy),r=this._cacheData,r.originalRender=this.render,r.originalRenderCanvas=this.renderCanvas,r.originalUpdateTransform=this.updateTransform,r.originalCalculateBounds=this.calculateBounds,r.originalGetLocalBounds=this.getLocalBounds,r.originalDestroy=this.destroy,r.originalContainsPoint=this.containsPoint,r.originalMask=this._mask,r.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(r=this._cacheData,r.sprite&&this._destroyCachedDisplayObject(),this.render=r.originalRender,this.renderCanvas=r.originalRenderCanvas,this.calculateBounds=r.originalCalculateBounds,this.getLocalBounds=r.originalGetLocalBounds,this.destroy=r.originalDestroy,this.updateTransform=r.originalUpdateTransform,this.containsPoint=r.originalContainsPoint,this._mask=r.originalMask,this.filterArea=r.originalFilterArea)}}}});Et.prototype._renderCached=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(r),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(r))};Et.prototype._initCachedDisplayObject=function(r){var e;if(!(this._cacheData&&this._cacheData.sprite)){var n=this.alpha;this.alpha=1,r.batch.flush();var i=this.getLocalBounds(null,!0).clone();if(this.filters){var s=this.filters[0].padding;i.pad(s)}i.ceil(et.RESOLUTION);var a=r.renderTexture.current,o=r.renderTexture.sourceFrame.clone(),l=r.renderTexture.destinationFrame.clone(),u=r.projection.transform,h=Pe.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||r.resolution,multisample:(e=this.cacheAsBitmapMultisample)!==null&&e!==void 0?e:r.multisample}),f="cacheAsBitmap_"+Se();this._cacheData.textureCacheId=f,lt.addToCache(h.baseTexture,f),nt.addToCache(h,f);var c=this.transform.localTransform.copyTo(Lh).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,r.render(this,{renderTexture:h,clear:!0,transform:c,skipUpdateTransform:!1}),r.framebuffer.blit(),r.projection.transform=u,r.renderTexture.bind(a,o,l),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var d=new te(h);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(i.x/i.width),d.anchor.y=-(i.y/i.height),d.alpha=n,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)}};Et.prototype._renderCachedCanvas=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(r),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(r))};Et.prototype._initCachedDisplayObjectCanvas=function(r){if(!(this._cacheData&&this._cacheData.sprite)){var e=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var i=r.context,s=r._projTransform;e.ceil(et.RESOLUTION);var a=Pe.create({width:e.width,height:e.height}),o="cacheAsBitmap_"+Se();this._cacheData.textureCacheId=o,lt.addToCache(a.baseTexture,o),nt.addToCache(a,o);var l=Lh;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,r.render(this,{renderTexture:a,clear:!0,transform:l,skipUpdateTransform:!1}),r.context=i,r._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var u=new te(a);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(e.x/e.width),u.anchor.y=-(e.y/e.height),u.alpha=n,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=r._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}};Et.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Et.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Et.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,lt.removeFromCache(this._cacheData.textureCacheId),nt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Et.prototype._cacheAsBitmapDestroy=function(r){this.cacheAsBitmap=!1,this.destroy(r)};Et.prototype.name=null;Lt.prototype.getChildByName=function(r,e){for(var n=0,i=this.children.length;n<i;n++)if(this.children[n].name===r)return this.children[n];if(e)for(var n=0,i=this.children.length;n<i;n++){var s=this.children[n];if(s.getChildByName){var a=this.children[n].getChildByName(r,!0);if(a)return a}}return null};Et.prototype.getGlobalPosition=function(r,e){return r===void 0&&(r=new xt),e===void 0&&(e=!1),this.parent?this.parent.toGlobal(this.position,r,e):(r.x=this.position.x,r.y=this.position.y),r};var Ds=function(t,r){return Ds=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},Ds(t,r)};function Ye(t,r){Ds(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var py=(function(t){Ye(r,t);function r(e,n,i,s){e===void 0&&(e=100),n===void 0&&(n=100),i===void 0&&(i=10),s===void 0&&(s=10);var a=t.call(this)||this;return a.segWidth=i,a.segHeight=s,a.width=e,a.height=n,a.build(),a}return r.prototype.build=function(){for(var e=this.segWidth*this.segHeight,n=[],i=[],s=[],a=this.segWidth-1,o=this.segHeight-1,l=this.width/a,u=this.height/o,h=0;h<e;h++){var f=h%this.segWidth,c=h/this.segWidth|0;n.push(f*l,c*u),i.push(f/a,c/o)}for(var d=a*o,h=0;h<d;h++){var v=h%a,_=h/a|0,p=_*this.segWidth+v,m=_*this.segWidth+v+1,E=(_+1)*this.segWidth+v,I=(_+1)*this.segWidth+v+1;s.push(p,m,E,m,I,E)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},r})(pn),vy=(function(t){Ye(r,t);function r(e,n,i){e===void 0&&(e=200),i===void 0&&(i=0);var s=t.call(this,new Float32Array(n.length*4),new Float32Array(n.length*4),new Uint16Array((n.length-1)*6))||this;return s.points=n,s._width=e,s.textureScale=i,s.build(),s}return Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),r.prototype.build=function(){var e=this.points;if(e){var n=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),s=this.getIndex();if(!(e.length<1)){n.data.length/4!==e.length&&(n.data=new Float32Array(e.length*4),i.data=new Float32Array(e.length*4),s.data=new Uint16Array((e.length-1)*6));var a=i.data,o=s.data;a[0]=0,a[1]=0,a[2]=0,a[3]=1;for(var l=0,u=e[0],h=this._width*this.textureScale,f=e.length,c=0;c<f;c++){var d=c*4;if(this.textureScale>0){var v=u.x-e[c].x,_=u.y-e[c].y,p=Math.sqrt(v*v+_*_);u=e[c],l+=p/h}else l=c/(f-1);a[d]=l,a[d+1]=0,a[d+2]=l,a[d+3]=1}for(var m=0,c=0;c<f-1;c++){var d=c*2;o[m++]=d,o[m++]=d+1,o[m++]=d+2,o[m++]=d+2,o[m++]=d+1,o[m++]=d+3}i.update(),s.update(),this.updateVertices()}}},r.prototype.updateVertices=function(){var e=this.points;if(!(e.length<1)){for(var n=e[0],i,s=0,a=0,o=this.buffers[0].data,l=e.length,u=0;u<l;u++){var h=e[u],f=u*4;u<e.length-1?i=e[u+1]:i=h,a=-(i.x-n.x),s=i.y-n.y;var c=Math.sqrt(s*s+a*a),d=this.textureScale>0?this.textureScale*this._width/2:this._width/2;s/=c,a/=c,s*=d,a*=d,o[f]=h.x+s,o[f+1]=h.y+a,o[f+2]=h.x-s,o[f+3]=h.y-a,n=h}this.buffers[0].update()}},r.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},r})(pn);(function(t){Ye(r,t);function r(e,n,i){i===void 0&&(i=0);var s=this,a=new vy(e.height,n,i),o=new mr(e);return i>0&&(e.baseTexture.wrapMode=Ut.REPEAT),s=t.call(this,a,o)||this,s.autoUpdate=!0,s}return r.prototype._render=function(e){var n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),t.prototype._render.call(this,e)},r})(_r);var _y=(function(t){Ye(r,t);function r(e,n,i){var s=this,a=new py(e.width,e.height,n,i),o=new mr(nt.WHITE);return s=t.call(this,a,o)||this,s.texture=e,s.autoResize=!0,s}return r.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var e=this.geometry,n=this.shader.texture,i=n.width,s=n.height;this.autoResize&&(e.width!==i||e.height!==s)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())},Object.defineProperty(r.prototype,"texture",{get:function(){return this.shader.texture},set:function(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),r.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},r.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,e)},r})(_r);(function(t){Ye(r,t);function r(e,n,i,s,a){e===void 0&&(e=nt.EMPTY);var o=this,l=new pn(n,i,s);l.getBuffer("aVertexPosition").static=!1;var u=new mr(e);return o=t.call(this,l,u,null,a)||this,o.autoUpdate=!0,o}return Object.defineProperty(r.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),r.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)},r})(_r);var qr=10;(function(t){Ye(r,t);function r(e,n,i,s,a){n===void 0&&(n=qr),i===void 0&&(i=qr),s===void 0&&(s=qr),a===void 0&&(a=qr);var o=t.call(this,nt.WHITE,4,4)||this;return o._origWidth=e.orig.width,o._origHeight=e.orig.height,o._width=o._origWidth,o._height=o._origHeight,o._leftWidth=n,o._rightWidth=s,o._topHeight=i,o._bottomHeight=a,o.texture=e,o}return r.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(r.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),r.prototype.updateHorizontalVertices=function(){var e=this.vertices,n=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*n,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*n,e[25]=e[27]=e[29]=e[31]=this._height},r.prototype.updateVerticalVertices=function(){var e=this.vertices,n=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*n,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*n,e[6]=e[14]=e[22]=e[30]=this._width},r.prototype._getMinScale=function(){var e=this._leftWidth+this._rightWidth,n=this._width>e?1:this._width/e,i=this._topHeight+this._bottomHeight,s=this._height>i?1:this._height/i,a=Math.min(n,s);return a},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"topHeight",{get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()},enumerable:!1,configurable:!0}),r.prototype._refresh=function(){var e=this.texture,n=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;var i=1/this._origWidth,s=1/this._origHeight;n[0]=n[8]=n[16]=n[24]=0,n[1]=n[3]=n[5]=n[7]=0,n[6]=n[14]=n[22]=n[30]=1,n[25]=n[27]=n[29]=n[31]=1,n[2]=n[10]=n[18]=n[26]=i*this._leftWidth,n[4]=n[12]=n[20]=n[28]=1-i*this._rightWidth,n[9]=n[11]=n[13]=n[15]=s*this._topHeight,n[17]=n[19]=n[21]=n[23]=1-s*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},r})(_y);var ks=function(t,r){return ks=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},ks(t,r)};function my(t,r){ks(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}(function(t){my(r,t);function r(e,n){n===void 0&&(n=!0);var i=t.call(this,e[0]instanceof nt?e[0]:e[0].texture)||this;return i._textures=null,i._durations=null,i._autoUpdate=n,i._isConnectedToTicker=!1,i.animationSpeed=1,i.loop=!0,i.updateAnchor=!1,i.onComplete=null,i.onFrameChange=null,i.onLoop=null,i._currentTime=0,i._playing=!1,i._previousFrame=null,i.textures=e,i}return r.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Rt.shared.remove(this.update,this),this._isConnectedToTicker=!1))},r.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Rt.shared.add(this.update,this,re.HIGH),this._isConnectedToTicker=!0))},r.prototype.gotoAndStop=function(e){this.stop();var n=this.currentFrame;this._currentTime=e,n!==this.currentFrame&&this.updateTexture()},r.prototype.gotoAndPlay=function(e){var n=this.currentFrame;this._currentTime=e,n!==this.currentFrame&&this.updateTexture(),this.play()},r.prototype.update=function(e){if(this._playing){var n=this.animationSpeed*e,i=this.currentFrame;if(this._durations!==null){var s=this._currentTime%1*this._durations[this.currentFrame];for(s+=n/60*1e3;s<0;)this._currentTime--,s+=this._durations[this.currentFrame];var a=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);s>=this._durations[this.currentFrame];)s-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=s/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())}},r.prototype.updateTexture=function(){var e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},r.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},r.fromFrames=function(e){for(var n=[],i=0;i<e.length;++i)n.push(nt.from(e[i]));return new r(n)},r.fromImages=function(e){for(var n=[],i=0;i<e.length;++i)n.push(nt.from(e[i]));return new r(n)},Object.defineProperty(r.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textures",{get:function(){return this._textures},set:function(e){if(e[0]instanceof nt)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var n=0;n<e.length;n++)this._textures.push(e[n].texture),this._durations.push(e[n].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"currentFrame",{get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Rt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Rt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),r})(te);pe.registerPlugin("accessibility",Iv);pe.registerPlugin("extract",lm);pe.registerPlugin("interaction",Nv);pe.registerPlugin("particle",Km);pe.registerPlugin("prepare",Cg);pe.registerPlugin("batch",am);pe.registerPlugin("tilingSprite",Lg);Wt.registerPlugin($g);Wt.registerPlugin(Im);Wt.registerPlugin(Xm);Wt.registerPlugin(Wm);Wt.registerPlugin(Sg);dn.registerPlugin(Rv);dn.registerPlugin(mm);var gy={DisplacementFilter:oy};function yy(){if(customElements.get("dunchek-gradient"))return;class t extends HTMLElement{static get observedAttributes(){return["color1","color2","color3","color4","color5","seed","displacement","noretina","bgcolor"]}constructor(){super(),this._app=null,this._gradientSprite=null,this._dispSprite=null,this._dispFilter=null,this._scene=null,this._hud=null,this._gradCanvas=document.createElement("canvas"),this._gradCanvas.width=512,this._gradCanvas.height=512,this._noiseCanvas=document.createElement("canvas"),this._noiseCanvas.width=512,this._noiseCanvas.height=512,this._applyPointerXY=(e,n)=>{const i=Math.max(1,window.innerWidth),s=Math.max(1,window.innerHeight),a=Math.min(1,Math.max(0,e/i)),o=Math.min(1,Math.max(0,n/s));this._seedTarget=-1+o*2,this._dispTarget=.8+a*4.2,this._dispNy=o},this._onPointerMove=e=>{this._applyPointerXY(e.clientX,e.clientY)},this._onTouchStart=e=>{const n=e.touches?.[0];n&&this._applyPointerXY(n.clientX,n.clientY)},this._onTouchMove=e=>{const n=e.touches?.[0];n&&this._applyPointerXY(n.clientX,n.clientY)},this._onResize=()=>{this._layoutToScreen(),this._layoutOverlayToScreen()},this._dispCurrent=0,this._dispTarget=0,this._seedCurrent=this._readNumberAttr("seed",0),this._seedTarget=this._seedCurrent,this._lastRebuildAt=0,this._rebuildIntervalMs=30,this._maskCanvas=document.createElement("canvas"),this._maskCanvas.width=512,this._maskCanvas.height=512,this._maskSprite=null,this._overlayCanvas=document.createElement("canvas"),this._overlayCanvas.width=512,this._overlayCanvas.height=512,this._overlaySprite=null,this._dispShiftY=0,this._dispShiftYTarget=0,this._dispShiftSmooth=.07,this._dispNy=.5,this._dispOverscanY=3.5,this._dispShiftMax=0,this._dispShiftAmount=.8,this._dispBaseX=0,this._dispBaseY=0,this._dispTextureMaxSize=2e3,this._bgColorHex=this._readColorAttr("bgcolor","#000000")}connectedCallback(){this.style.display="block",this.style.height||(this.style.height="100vh");const e=typeof window<"u"&&typeof window.matchMedia=="function"&&window.matchMedia("(pointer: coarse)").matches,i=this.getAttribute("noretina")==="true"?1:Math.max(1,window.devicePixelRatio||1);this._app=new dn({resizeTo:window,antialias:!0,backgroundAlpha:0,autoDensity:!1,resolution:i,powerPreference:"high-performance"}),this._app.view.style.width="100%",this._app.view.style.height="100%",this._app.view.style.display="block",this.appendChild(this._app.view),this._scene=new Lt,this._hud=new Lt,this._app.stage.addChild(this._scene),this._app.stage.addChild(this._hud),this._bg=new Ys,this._bg.beginFill(this._bgColorHex,1),this._bg.drawRect(0,0,this._app.renderer.width,this._app.renderer.height),this._bg.endFill(),this._scene.addChild(this._bg);const s=this._readNumberAttr("seed",0),a=this._readNumberAttr("displacement",0);this._seedCurrent=s,this._seedTarget=s,this._dispCurrent=a,this._dispTarget=a,this._buildGradient(s),this._buildDisplacement(s),this._dispFilter=new gy.DisplacementFilter(this._dispSprite),this._setDisplacementStrength(a),this._gradientSprite.filters=[this._dispFilter],this._scene.addChild(this._gradientSprite),this._scene.addChild(this._dispSprite),this._buildEdgeMask(),this._buildOverlayTexture(),this._overlaySprite.alpha=.18,this._overlaySprite.blendMode=rt.NORMAL,this._hud.addChild(this._overlaySprite),this._layoutOverlayToScreen(),this._app.ticker.add(()=>{if(this._dispCurrent+=(this._dispTarget-this._dispCurrent)*.1,this._setDisplacementStrength(this._dispCurrent),this._dispSprite){const f=(this._dispNy-.5)*2;this._dispShiftYTarget=f*this._dispShiftMax*this._dispShiftAmount,this._dispShiftY+=(this._dispShiftYTarget-this._dispShiftY)*this._dispShiftSmooth;const c=Math.max(-this._dispShiftMax,Math.min(this._dispShiftMax,this._dispShiftY));this._dispSprite.x=this._dispBaseX,this._dispSprite.y=this._dispBaseY+c}const l=Math.max(0,Math.min(1,this._dispTarget/5)),u=.12+(.03-.12)*l;this._seedCurrent+=(this._seedTarget-this._seedCurrent)*u;const h=performance.now();h-this._lastRebuildAt>=this._rebuildIntervalMs&&(this._lastRebuildAt=h,this._buildGradient(this._seedCurrent,{replaceTexture:!0}),this._layoutToScreen())}),window.addEventListener("pointermove",this._onPointerMove,{passive:!0}),e&&(window.addEventListener("touchstart",this._onTouchStart,{passive:!0}),window.addEventListener("touchmove",this._onTouchMove,{passive:!0})),window.addEventListener("resize",this._onResize,{passive:!0}),this._layoutToScreen(),this._layoutOverlayToScreen()}disconnectedCallback(){window.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("touchstart",this._onTouchStart),window.removeEventListener("touchmove",this._onTouchMove),window.removeEventListener("resize",this._onResize),this._app&&(this._app.destroy(!0,{children:!0,texture:!0,baseTexture:!0}),this._app=null),this._gradientSprite=null,this._dispSprite=null,this._dispFilter=null,this._scene=null,this._hud=null}attributeChangedCallback(e,n,i){if(n!==i&&this._app){if(e==="displacement"){this._setDisplacementStrength(this._readNumberAttr("displacement",0));return}if(e==="seed"){const s=this._readNumberAttr("seed",0);this._seedTarget=s;return}if(e==="bgcolor"){this._bgColorHex=this._readColorAttr("bgcolor","#000000"),this._layoutToScreen();return}e.startsWith("color")&&this._readNumberAttr("seed",0)}}_onPointerMove(e){const n=Math.max(1,window.innerWidth),i=Math.max(1,window.innerHeight),s=Math.min(1,Math.max(0,e.clientX/n)),a=Math.min(1,Math.max(0,e.clientY/i)),o=-1+a*2,h=Ty(.9,1,a),f=1;this._seedTarget=xy(o,f,h),this._dispTarget=.8+s*4.2,this._dispNy=a}_layoutToScreen(){if(!this._app||!this._gradientSprite)return;const e=this._app.renderer.width,n=this._app.renderer.height,i=this._gradientSprite.texture.width||1,s=this._gradientSprite.texture.height||1,a=Math.max(e/i,n/s);if(this._gradientSprite.scale.set(a*1),this._gradientSprite.x=(e-i*a)/2,this._gradientSprite.y=(n-s*a)/2,this._dispSprite){const l=this._dispSprite.texture.width||1,u=this._dispSprite.texture.height||1,h=e/l,f=n*this._dispOverscanY/u;this._dispSprite.scale.set(h,f);const c=u*f,d=Math.max(0,c-n);this._dispBaseX=0,this._dispBaseY=-d/2,this._dispShiftMax=d/2}if(this._bg&&(this._bg.clear(),this._bg.beginFill(this._bgColorHex,1),this._bg.drawRect(0,0,e,n),this._bg.endFill()),this._maskSprite){const l=this._maskSprite.texture.width||1,u=this._maskSprite.texture.height||1,h=Math.max(e/l,n/u);this._maskSprite.scale.set(h),this._maskSprite.position.set((e-l*h)/2,(n-u*h)/2)}}_layoutOverlayToScreen(){if(!this._app||!this._overlaySprite)return;const e=this._app.renderer.width,n=this._app.renderer.height;this._overlaySprite.position.set(0,0),this._overlaySprite.width=e,this._overlaySprite.height=n,this._overlaySprite.roundPixels=!0}_setDisplacementStrength(e){if(!this._dispFilter)return;const n=Math.max(0,Math.min(5,e))/5,i=Math.pow(n,1.01);this._dispFilter.scale.set(i*1800,i*500)}_buildGradient(e,n={}){if(!this._app)return;const i=this.getAttribute("color1")||"#0e1c3f",s=this.getAttribute("color2")||"#23418a",a=this.getAttribute("color3")||"#aadfd9",o=this.getAttribute("color4")||"#e64f0f",l=this.getAttribute("color5")||"#000000",u=this._gradCanvas.getContext("2d",{willReadFrequently:!1}),h=this._gradCanvas.width,f=this._gradCanvas.height,c=(e+1)/2,d=e*(Math.PI/5),v=Math.sqrt(h*h+f*f),_=h/2,p=f/2,m=Math.cos(d),E=Math.sin(d),I=-E,C=m,y=(c-.5)*(v*.24),w=I*y,T=C*y,B=v*.55,U=_-m*B+w,F=p-E*B+T,k=_+m*B+w,O=p+E*B+T,q=u.createLinearGradient(U,F,k,O),W=.2;let G=.05+W*(c-.5)*.6,g=.24+W*(.5-c)*.7,b=.5+W*(c-.5)*.8,x=.7+W*(c-.5)*.35,S=1;if(G=ae(G),g=Math.max(G+.001,ae(g)),b=Math.max(g+.001,ae(b)),x=Math.max(b+.001,ae(x)),S=Math.max(x+.001,ae(S)),q.addColorStop(G,i),q.addColorStop(g,s),q.addColorStop(b,a),q.addColorStop(x,o),q.addColorStop(S,l),u.clearRect(0,0,h,f),u.fillStyle=q,u.fillRect(0,0,h,f),this._gradientSprite)this._gradientSprite.texture.baseTexture.update();else{const R=lt.from(this._gradCanvas),A=new nt(R);this._gradientSprite=new te(A),this._gradientSprite.anchor.set(0,0)}}_buildEdgeMask(){const e=this._maskCanvas,n=e.getContext("2d"),i=e.width,s=e.height,a=n.createRadialGradient(i/2,s/2,i*.18,i/2,s/2,i*.58);if(a.addColorStop(0,"rgba(255,255,255,1)"),a.addColorStop(.5,"rgba(255,255,255,1)"),a.addColorStop(1,"rgba(255,255,255,0)"),n.clearRect(0,0,i,s),n.fillStyle=a,n.fillRect(0,0,i,s),this._maskSprite)this._maskSprite.texture.baseTexture.update();else{const o=lt.from(e),l=new nt(o);this._maskSprite=new te(l),this._maskSprite.anchor.set(0,0),this._gradientSprite.mask=this._maskSprite,this._scene?this._scene.addChild(this._maskSprite):this._app.stage.addChild(this._maskSprite)}}_buildOverlayTexture(){const e=this._overlayCanvas,n=e.getContext("2d",{willReadFrequently:!0}),i=e.width,s=e.height;if(n.clearRect(0,0,i,s),n.fillStyle="rgba(255,255,255,0.01)",n.fillRect(0,0,i,s),by(n,i,s,wu(1337)),this._overlaySprite)this._overlaySprite.texture.baseTexture.update();else{const a=lt.from(e);a.wrapMode=Ut.CLAMP,a.scaleMode=Ot.LINEAR;const o=new nt(a);this._overlaySprite=new te(o),this._overlaySprite.anchor.set(0,0)}}_buildDisplacement(e,n={}){if(!this._app)return;const i=this._app.renderer.width,s=this._app.renderer.height,a=this._dispTextureMaxSize||1400,o=Math.min(1,a/Math.max(i,s)),l=Math.max(256,Math.floor(i*o)),u=Math.max(256,Math.floor(s*o));(this._noiseCanvas.width!==l||this._noiseCanvas.height!==u)&&(this._noiseCanvas.width=l,this._noiseCanvas.height=u);const h=this._noiseCanvas.getContext("2d",{willReadFrequently:!0}),f=wu(5e4+Math.floor((e+1)*1e5)),c=h.createImageData(l,u),d=(e+1)/2,v=.8+1.2*d,_=.8+1.2*(1-d),p=f()*Math.PI*2;for(let m=0;m<u;m++)for(let E=0;E<l;E++){const I=(m*l+E)*4,C=1,y=E/l*C,w=m/u*C,T=Math.sin((y*v+w*.7*v)*Math.PI*2+p),B=Math.cos((w*_-y*.6*_)*Math.PI*2-p*.7),U=(T*.9+B*.1)*.5+.5,F=ae(U+(f()-.5)*.12),k=ae(1-U+(f()-.5)*.12);c.data[I+0]=F*255|0,c.data[I+1]=k*255|0,c.data[I+2]=128,c.data[I+3]=255}if(h.putImageData(c,0,0),this._dispSprite){const m=this._dispSprite.texture.baseTexture;m.wrapMode=Ut.CLAMP,m.scaleMode=Ot.LINEAR,m.update()}else{const m=lt.from(this._noiseCanvas);m.wrapMode=Ut.CLAMP,m.scaleMode=Ot.LINEAR;const E=new nt(m);this._dispSprite=new te(E),this._dispSprite.anchor.set(0,0),this._dispSprite.alpha=0}}_readNumberAttr(e,n){const i=Number(this.getAttribute(e));return Number.isFinite(i)?i:n}_readColorAttr(e,n){const i=this.getAttribute(e),s=typeof n=="string"?n:"#000000",a=typeof i=="string"&&i.trim().length>0?i.trim():s;return this._parseHexColor(a,s)}_parseHexColor(e,n){const i=typeof n=="string"?n:"#000000",s=typeof e=="string"?e:i;try{return Qr(s)}catch{try{return Qr(i)}catch{return 0}}}}customElements.define("dunchek-gradient",t)}function ae(t){return Math.max(0,Math.min(1,t))}function wu(t){let r=t>>>0;return function(){r+=1831565813;let e=Math.imul(r^r>>>15,1|r);return e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296}}function by(t,r,e,n){const i=t.getImageData(0,0,r,e),s=i.data;for(let a=0;a<s.length;a+=4){const o=(n()-.5)*8;s[a+0]=Math.max(0,Math.min(255,s[a+0]+o)),s[a+1]=Math.max(0,Math.min(255,s[a+1]+o)),s[a+2]=Math.max(0,Math.min(255,s[a+2]+o))}t.putImageData(i,0,0)}function xy(t,r,e){return t+(r-t)*e}function Ty(t,r,e){const n=ae((e-t)/(r-t));return n*n*(3-2*n)}function Ey({mountTo:t,zIndex:r=1,attrs:e={}}={}){if(!t)throw new Error("mountLandingLayer: mountTo is required");yy();const n=document.createElement("dunchek-gradient");n.className="c-PixiIntro-gradient";const s={...{color1:"#0e1c3f",color2:"#23418a",color3:"#aadfd9",color4:"#e64f0f",color5:"#000000",bgcolor:"#050505",displacement:"0",seed:"0",noretina:"true"},...e};for(const[o,l]of Object.entries(s))n.setAttribute(o,String(l));return n.style.zIndex=String(r),t.appendChild(n),{el:n,setAttributes(o={}){Object.entries(o).forEach(([l,u])=>{u!=null&&n.setAttribute(l,String(u))})},destroy(){n.remove()}}}function Nt(t,r={},e=[]){const n=document.createElement(t);for(const[i,s]of Object.entries(r))if(i==="class")n.className=s;else if(i==="dataset"&&s&&typeof s=="object")Object.assign(n.dataset,s);else if(i.startsWith("on")&&typeof s=="function")n.addEventListener(i.slice(2),s);else if(i==="style"&&typeof s=="object")Object.assign(n.style,s);else if(s===!0)n.setAttribute(i,"");else{if(s===!1||s==null)continue;n.setAttribute(i,String(s))}for(const i of e)n.append(i);return n}function sr(t){return document.createTextNode(t??"")}function wy(t){if(!t||typeof t!="object")throw new Error("mountTextLayer: data must be an object");const r=Array.isArray(t.order)?t.order:null,n=(r?r.filter(i=>t[i]&&typeof t[i]=="object"):Object.keys(t).filter(i=>i.startsWith("tab-")&&t[i]&&typeof t[i]=="object")).map(i=>{const s=t[i]||{},a=s.title??i,o=s.tabContent||{},u=Object.keys(o).map(h=>Number(h)).filter(Number.isFinite).sort((h,f)=>h-f).map(h=>String(o[String(h)]??""));return{id:i,label:a,pages:u}});if(n.length===0)throw new Error("mountTextLayer: no tabs found (expected keys like tab-...)");return{tabs:n}}function Iy(t){const r=document.createElement("div");return r.className="tl__html",r.innerHTML=t||"",r}const Iu=[{id:"green",label:"Зеленый текстовый слой"},{id:"black",label:"Черный текстовый слой"},{id:"red",label:"Красный текстовый слой"}],Ru="red";function Ry({mountTo:t=document.body,data:r,initialTabId:e,initialTabIndex:n=0,initialPageIndex:i=0,zIndex:s=1}={}){if(!t)throw new Error("mountTextLayer: mountTo is required");const a=wy(r),o={tabIndex:0,pageIndex:0,theme:Ru},l=e===void 0?"tab-pre":e;if(l){const G=a.tabs.findIndex(g=>g.id===l);o.tabIndex=G>=0?G:0}else o.tabIndex=Math.max(0,Math.min(n,a.tabs.length-1));o.pageIndex=Math.max(0,i);const u=Nt("section",{class:"tl","aria-label":"Text layer",style:{zIndex:String(s)}}),h=Nt("aside",{class:"tl__left"}),f=Nt("nav",{class:"tl__toc","aria-label":"Оглавление"}),c=Nt("div",{class:"tl__themes",role:"group","aria-label":"Темы текстового слоя"}),d=Iu.map(G=>Nt("button",{class:"tl__themeBtn",type:"button",dataset:{theme:G.id},"aria-label":G.label},[]));c.append(...d),h.append(f,c);const v=Nt("main",{class:"tl__right"}),_=Nt("div",{class:"tl__content"}),p=Nt("div",{class:"tl__pager"}),m=Nt("button",{class:"tl__pagerBtn",type:"button",dataset:{action:"prev"}},[sr("←")]),E=Nt("div",{class:"tl__pagerCounter"},[sr("1/1")]),I=Nt("button",{class:"tl__pagerBtn",type:"button",dataset:{action:"next"}},[sr("→")]);p.append(m,E,I),v.append(_,p),u.append(h,v),t.append(u);function C(){d.forEach(G=>{const g=G.dataset.theme===o.theme;G.setAttribute("aria-pressed",String(g))})}function y(G){const g=Iu.some(b=>b.id===G)?G:Ru;o.theme=g,u.dataset.theme=g,document.body&&(document.body.dataset.tlTheme=g),document.documentElement&&(document.documentElement.dataset.tlTheme=g),C()}function w(){return a.tabs[o.tabIndex]||a.tabs[0]}function T(){const g=w()?.pages?.length??0;return g<=0?o.pageIndex=0:o.pageIndex=Math.max(0,Math.min(o.pageIndex,g-1)),g}function B(){f.innerHTML="",a.tabs.forEach((G,g)=>{const b=Nt("button",{class:`tl__tocItem${g===o.tabIndex?" is-active":""}`,type:"button",dataset:{idx:String(g),tab:G.id}},[sr(G.label)]);f.append(b),g===0&&f.append(document.createElement("br"))})}function U(){const G=w(),g=T();if(_.innerHTML="",!G||g===0)_.append(Nt("p",{class:"tl__empty"},[sr("Нет контента")]));else{const D=G.pages[o.pageIndex];_.append(Iy(D))}const b=g===0?1:o.pageIndex+1;E.textContent=`${b}/${Math.max(1,g)}`;const x=o.tabIndex>0,S=o.tabIndex<a.tabs.length-1,R=o.pageIndex>0,A=g>0?o.pageIndex<g-1:!1,N=R||x,P=A||S;m.disabled=!N,I.disabled=!P}function F(G,g=0){const b=Math.max(0,Math.min(G,a.tabs.length-1)),x=b!==o.tabIndex;o.tabIndex=b,o.pageIndex=g,x&&B(),U()}function k(G){const g=a.tabs.findIndex(b=>b.id===G);g>=0&&F(g)}function O(G){o.pageIndex=G,U()}function q(){const g=w()?.pages?.length??0;if(g>0&&o.pageIndex<g-1){O(o.pageIndex+1);return}o.tabIndex<a.tabs.length-1&&F(o.tabIndex+1,0)}function W(){if(o.pageIndex>0){O(o.pageIndex-1);return}if(o.tabIndex>0){const G=o.tabIndex-1,b=a.tabs[G]?.pages?.length??0,x=b>0?b-1:0;F(G,x)}}return f.addEventListener("click",G=>{const g=G.target.closest("button[data-idx]");if(!g)return;const b=Number(g.dataset.idx);Number.isFinite(b)&&F(b)}),p.addEventListener("click",G=>{const g=G.target.closest("button[data-action]");if(!g)return;const b=g.dataset.action;b==="prev"&&W(),b==="next"&&q()}),c.addEventListener("click",G=>{const g=G.target.closest("button[data-theme]");g&&y(g.dataset.theme)}),u.addEventListener("click",G=>{const g=G.target.closest("[data-tab]");if(!g)return;const b=g.dataset.tab;b&&k(b)}),y(o.theme),B(),U(),{root:u,setTabById:k,setTabByIndex:F,setPage:O,getState:()=>({...o}),destroy:()=>u.remove()}}const Jt=[{id:"aurora",label:"Aurora",colors:{color1:"#21618f",color2:"#3a6686",color3:"#85bddd",color4:"#59b3e8",color5:"#2e6e9d",bgcolor:"#42637c"}},{id:"ember",label:"Ember",colors:{color1:"#55283d",color2:"#55283d",color3:"#ac527e",color4:"#f05c5e",color5:"#6e3550",bgcolor:"#6e3550"}},{id:"ember1",label:"Ember",colors:{color1:"#000000",color2:"#1d1628",color3:"#000000",color4:"#472d74",color5:"#000000",bgcolor:"#000000"}},{id:"lagoon3",label:"Lagoon",colors:{color1:"#5e4329",color2:"#48331f",color3:"#6e4a29",color4:"#875046",color5:"#352a20",bgcolor:"#352a20"}},{id:"lagoon2",label:"Lagoon",colors:{color1:"#3c3d3a",color2:"#464444",color3:"#717171",color4:"#a49968",color5:"#2f2f2f",bgcolor:"#23221b"}}],Cy=[{id:"aurora",label:"Aurora",colors:{color5:"#3a6686"}},{id:"ember1",label:"Ember",colors:{color5:"#2d243d"}},{id:"ember",label:"Ember",colors:{color5:"#6e3550"}},{id:"lagoon3",label:"Lagoon",colors:{color5:"#352a20"}},{id:"lagoon2",label:"Lagoon",colors:{color5:"#464444"}}],Ay="[data-theme-toggle]",Sy="[data-hero-section]",Py="ll__theme-toggle--floating",Ny="is-visible",Oy="is-floating-shown",Uy="is-floating-exiting",$i="--ll-text-color-dark";function Ly({landingLayer:t,defaultThemeId:r=Jt[0]?.id,transitionDurationMs:e=1300}={}){if(!t)throw new Error("createThemeSwapper: landingLayer is required");const n=new Map(Jt.map(d=>[d.id,d])),i=new Map(Cy.map(d=>[d.id,d]));let s=r||Jt[0].id,a=null,o=!1,l=null;const u=typeof requestAnimationFrame=="function"&&typeof performance<"u"&&typeof performance.now=="function",h=()=>{l!==null&&typeof cancelAnimationFrame<"u"&&cancelAnimationFrame(l),l=null},f=(d,{animate:v=!0,durationMs:_}={})=>{if(typeof document>"u")return;const p=document.documentElement;if(!p)return;const m=i.get(d),E=Ae(m?.colors?.color5);E&&(Ae(p.style.getPropertyValue($i).trim()),typeof window<"u"&&typeof window.getComputedStyle=="function"&&Ae(window.getComputedStyle(p).getPropertyValue($i).trim()),p.style.setProperty($i,E))},c={applyTheme(d=s,v={},_={}){const m=n.get(d)||n.get(s)||Jt[0],E=Cu(v),I={...m.colors,...E},{animate:C=!0,durationMs:y=e}=_;if(h(),s=m.id,f(s,{animate:C,durationMs:y}),!C||!u||!o||!a||y<=0)return t.setAttributes(I),a={...I},o=!0,{...m};const w={...a},T={...I};return l=By({fromColors:w,toColors:T,durationMs:y,onUpdate:B=>{a=B,t.setAttributes(B)},onFinish:B=>{l=null,a=B,t.setAttributes(B)}}),{...m}},cycleTheme(d=1){if(!Jt.length)return null;const v=Fy(s),_=My(v+d),p=Jt[_];return c.applyTheme(p.id),{...p}},updateActiveThemeColors(d={}){const v=n.get(s);if(!v)return null;const _=Cu(d);return v.colors={...v.colors,..._},h(),t.setAttributes(_),a={...a||{},..._},{...v.colors}},listThemes(){return Jt.map(d=>({id:d.id,label:d.label,colors:{...d.colors}}))},getActiveThemeId(){return s},bindToggleButtons(d={}){return ky({api:c,...d})},exposeThemeApi(d=typeof window>"u"?null:window){d&&(d.setGradientTheme=(v,_={})=>c.applyTheme(v,_),d.updateGradientColors=(v={})=>c.updateActiveThemeColors(v),d.listGradientThemes=()=>c.listThemes(),d.nextGradientTheme=()=>c.cycleTheme())}};return c.applyTheme(s,{},{animate:!1}),c}function Cu(t={}){const r={};return Object.entries(t).forEach(([e,n])=>{const i=Ae(n);i&&(r[e]=i)}),r}function Ae(t){if(typeof t!="string")return null;let r=t.trim();if(!r)return null;if(r.startsWith("#")||(r=`#${r}`),/^#[0-9a-fA-F]{6}$/.test(r))return r.toLowerCase();if(/^#[0-9a-fA-F]{3}$/.test(r)){const[,e,n,i]=r;return`#${e}${e}${n}${n}${i}${i}`.toLowerCase()}return null}function Fy(t){return Math.max(0,Jt.findIndex(r=>r.id===t))}function My(t){const r=Jt.length;return r?(t%r+r)%r:0}function By({fromColors:t,toColors:r,durationMs:e,onUpdate:n,onFinish:i}={}){const s=performance.now(),a=Array.from(new Set([...Object.keys(t||{}),...Object.keys(r||{})])),o={},l={};a.forEach(h=>{const f=Ae(t?.[h])||"#000000",c=Ae(r?.[h])||f;o[h]=Au(f),l[h]=Au(c)});const u=h=>{const f=e>0?Math.min(1,Math.max(0,(h-s)/e)):1,c=Gy(f),d={};return a.forEach(v=>{const _=o[v],p=l[v],m=Math.round(Yi(_.r,p.r,c)),E=Math.round(Yi(_.g,p.g,c)),I=Math.round(Yi(_.b,p.b,c));d[v]=Dy({r:m,g:E,b:I})}),n?.(d),f>=1?(i?.(d),null):requestAnimationFrame(u)};return requestAnimationFrame(u)}function Yi(t,r,e){return t+(r-t)*e}function Gy(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}function Au(t){const e=(Ae(t)||"#000000").slice(1),n=Number.parseInt(e,16);return{r:n>>16&255,g:n>>8&255,b:n&255}}function Dy({r:t,g:r,b:e}){const n=Ki(t).toString(16).padStart(2,"0"),i=Ki(r).toString(16).padStart(2,"0"),s=Ki(e).toString(16).padStart(2,"0");return`#${n}${i}${s}`.toLowerCase()}function Ki(t){return Math.max(0,Math.min(255,Number.isFinite(t)?t:0))}function ky({api:t,toggleSelector:r=Ay,heroSelector:e=Sy,floatingClass:n=Py,visibleClass:i=Ny,shownClass:s=Oy,exitingClass:a=Uy}={}){if(typeof document>"u")return()=>{};const o=()=>Array.from(document.querySelectorAll(r)).filter(p=>p.classList.contains(n)),l=p=>{o().forEach(E=>{p?Hy(E,{shownClass:s,visibleClass:i,exitingClass:a}):Xy(E,{shownClass:s,visibleClass:i,exitingClass:a})})},u=p=>{const m=p.target;!m||!m.closest?.(r)||(p.preventDefault(),t.cycleTheme())},h=p=>{if(p.key!=="Enter"&&p.key!==" ")return;const m=p.target;!m||!m.closest?.(r)||(p.preventDefault(),t.cycleTheme())};document.addEventListener("click",u),document.addEventListener("keydown",h);let f=null,c=null;const d=()=>{f&&f.disconnect(),f=null,c=null},v=()=>{if(typeof window>"u"||!("IntersectionObserver"in window))return;const p=document.querySelector(e);p&&p!==c&&(d(),f=new IntersectionObserver(m=>{m.forEach(E=>{const I=!E.isIntersecting;l(I)})},{threshold:0}),f.observe(p),c=p)};l(!1),v();let _=null;return typeof MutationObserver<"u"&&(_=new MutationObserver(()=>{v(),c&&!document.contains(c)&&(d(),l(!0))}),_.observe(document.documentElement,{childList:!0,subtree:!0})),()=>{document.removeEventListener("click",u),document.removeEventListener("keydown",h),_?.disconnect(),d()}}function Hy(t,{shownClass:r,visibleClass:e,exitingClass:n}){t.classList.remove(n),t.classList.add(r),t.classList.add(e)}function Xy(t,{shownClass:r,visibleClass:e,exitingClass:n}){t.classList.add(n),t.classList.remove(r),t.classList.remove(e)}const zr=".ll__faq-block__question-container",Wr=".ll__faq-block__question",Su=".ll__faq-block__answer",Pu="calc(var(--space) * 3)",Zs="0px",Nu="var(--ll-average-gap)",Js="0px",Ou="data-faq-init";function jy({root:t=document}={}){if(!t)return()=>{};const r=o=>{if(!(o instanceof HTMLElement)||o.getAttribute(Ou)==="1")return;const l=o.querySelector(Wr),u=o.querySelector(Su);!l||!u||(o.setAttribute(Ou,"1"),o.classList.remove("is-open"),Fh(u,{immediate:!0}),u.classList.remove("is-visible","is-opaque"),lr(u,Zs,Js),l.setAttribute("role","button"),l.setAttribute("tabindex","0"),l.setAttribute("aria-expanded","false"),u.setAttribute("aria-hidden","true"))},e=()=>{(t.querySelectorAll?.(zr)??[]).forEach(r)},n=o=>{const l=o.closest(zr);if(!l)return;r(l);const u=l.querySelector(Su),h=l.querySelector(Wr);if(!u||!h)return;l.classList.contains("is-open")?qy(l,u,h):Vy(l,u,h)},i=o=>{const l=o.target;if(!l)return;const u=l.closest?.(Wr);u&&n(u)},s=o=>{if(o.key!=="Enter"&&o.key!==" ")return;const l=o.target;if(!l)return;const u=l.closest?.(Wr);u&&(o.preventDefault(),n(u))};t.addEventListener("click",i),t.addEventListener("keydown",s),e();let a=null;if(typeof MutationObserver<"u"){a=new MutationObserver(l=>{for(const u of l)for(const h of u.addedNodes){if(!(h instanceof HTMLElement))continue;if(h.matches?.(zr)){r(h);continue}const f=h.querySelectorAll?.(zr);f?.length&&f.forEach(r)}});const o=t instanceof Document?t.documentElement:t;o&&a.observe(o,{childList:!0,subtree:!0})}return()=>{t.removeEventListener("click",i),t.removeEventListener("keydown",s),a?.disconnect()}}function Vy(t,r,e){t.classList.add("is-open"),r.classList.add("is-visible"),requestAnimationFrame(()=>{r.classList.add("is-opaque"),zy(r)}),e.setAttribute("aria-expanded","true"),r.setAttribute("aria-hidden","false")}function qy(t,r,e){t.classList.remove("is-open"),Fh(r),e.setAttribute("aria-expanded","false"),r.setAttribute("aria-hidden","true")}function zy(t){Mh(t);const r=t.offsetHeight||0,e=t.style.transition;Wy(t),lr(t,Pu,Nu),t.style.height="auto";const n=t.scrollHeight;t.style.height=`${r}px`,lr(t,Zs,Js),t.offsetHeight,$y(t,e),requestAnimationFrame(()=>{lr(t,Pu,Nu),t.style.height=`${n}px`});const i=s=>{s.propertyName==="height"&&(t.style.height="auto",t.removeEventListener("transitionend",i),t.__heightTransitionHandler=null)};t.__heightTransitionHandler=i,t.addEventListener("transitionend",i)}function Fh(t,{immediate:r=!1}={}){Mh(t);const e=()=>lr(t,Zs,Js);if(r){t.style.height="0px",e(),t.classList.remove("is-visible","is-opaque");return}const n=t.style.height==="auto"||!t.style.height?t.scrollHeight:parseFloat(t.style.height);t.style.height=`${n}px`,t.classList.remove("is-opaque"),t.offsetHeight,requestAnimationFrame(()=>{t.style.height="0px",e()});const i=s=>{s.propertyName==="height"&&(t.removeEventListener("transitionend",i),t.__heightTransitionHandler=null,t.classList.remove("is-visible","is-opaque"))};t.__heightTransitionHandler=i,t.addEventListener("transitionend",i)}function Mh(t){t?.__heightTransitionHandler&&(t.removeEventListener("transitionend",t.__heightTransitionHandler),t.__heightTransitionHandler=null)}function lr(t,r,e){t.style.setProperty("--faq-answer-padding-y",r),t.style.setProperty("--faq-answer-margin",e)}function Wy(t){t.style.transition="none"}function $y(t,r){t.style.transition=r||""}function Yy(t={}){const{mountTo:r=document.body,positionClass:e="ll__theme-toggle-button ll__theme-toggle--floating"}=t;if(!(r instanceof HTMLElement))throw new Error("mountFixedThemeToggle: mountTo must be HTMLElement");const n=document.createElement("button");return n.type="button",n.setAttribute("data-theme-toggle",""),n.setAttribute("aria-label","Сменить тему"),n.setAttribute("class",`ll__filled-button glass glass--pill is-liquid ${e}`),n.textContent="~",r.appendChild(n),{el:n,destroy(){n.remove()}}}const Ky="#feed",Zy="[data-hero-section]",Jy="[data-hero-nav-list]";function Qy(t={}){if(typeof document>"u")return()=>{};const{feedSelector:r=Ky,heroSelector:e=Zy,navContainerSelector:n=Jy,excludeTypes:i=["hero-block","break-block"],scrollOffsetPx:s,maxItems:a=6}=t,o=document.querySelector(e),l=o?.querySelector(n),u=document.querySelector(r);if(!o||!l||!u)return()=>{};const h=()=>{if(Number.isFinite(s))return s;try{const I=Number.parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--space"));return Number.isFinite(I)?Math.round(I*6):48}catch{return 48}},f=I=>{if(!(I instanceof HTMLElement))return"";const y=(I.querySelector(".ll__title-container h2")||I.querySelector(".ll__title-container h4")||I.querySelector("h2")||I.querySelector("h4")||I.querySelector("h3"))?.textContent?.trim()||"";if(!y)return"";const w=y.indexOf("→");return w!==-1?y.slice(0,w).trim()||y.trim():y},c=I=>{if(!I)return;const C=document.querySelector(`[data-section-id="${t0(I)}"]`);if(!(C instanceof HTMLElement))return;const y=C.getBoundingClientRect().top+(window.scrollY||0)-h();window.scrollTo({top:Math.max(0,y),behavior:"smooth"})},d=()=>{const C=Array.from(u.children).filter(y=>y instanceof HTMLElement).map(y=>{const w=y.dataset?.sectionType||"",T=y.dataset?.sectionId||"";if(!w||!T||i.includes(w))return null;const B=f(y);return B?{id:T,type:w,title:B}:null}).filter(Boolean);l.innerHTML="",C.slice(0,Math.max(0,a)).forEach((y,w,T)=>{const B=document.createElement("span");B.className="ll__hero-nav-item",B.textContent=`${y.title} •`,B.setAttribute("role","link"),B.setAttribute("tabindex","0"),B.dataset.targetSectionId=y.id,l.appendChild(B),w!==T.length-1&&l.appendChild(document.createElement("br"))})},v=I=>{const C=I.target instanceof Element?I.target:null;if(!C)return;const y=C.closest(".ll__hero-nav-item");if(!y)return;const w=y.getAttribute("data-target-section-id");w&&(I.preventDefault(),c(w))},_=I=>{if(I.key!=="Enter"&&I.key!==" ")return;const C=I.target instanceof Element?I.target:null;if(!C)return;const y=C.closest(".ll__hero-nav-item");if(!y)return;I.preventDefault();const w=y.getAttribute("data-target-section-id");w&&c(w)};l.addEventListener("click",v),l.addEventListener("keydown",_);let p=!1;const m=()=>{p||(p=!0,requestAnimationFrame(()=>{p=!1,d()}))},E=typeof MutationObserver<"u"?new MutationObserver(m):null;return E?.observe(u,{childList:!0}),d(),()=>{l.removeEventListener("click",v),l.removeEventListener("keydown",_),E?.disconnect()}}function t0(t){return typeof CSS<"u"&&typeof CSS.escape=="function"?CSS.escape(t):String(t).replace(/"/g,'\\"')}function e0({startButtonsSelector:t="button, a, [role='button'], input[type='button'], input[type='submit']",textLayerSelector:r="section.tl",landingPartsSelectors:e=["dunchek-gradient.c-PixiIntro-gradient","#feed","button[data-theme-toggle].ll__theme-toggle--floating"],textsScopeSelector:n="#feed",delayBeforeTimerMs:i=1e3,timerFrom:s=60,fadeTextsSteps:a=4,fadeLandingSteps:o=6,transitionMs:l=420}={}){const u={started:!1,timerRunning:!1,eraseMode:!1,clicks:0,textsOpacity:1,landingOpacity:1,timerEl:null,eraseCursorEl:null,intervalId:null,textsObserver:null,textLayerRoot:null,landingParts:[],textTargets:[]},h=(b,x=document)=>x.querySelector(b),f=(b,x=document)=>Array.from(x.querySelectorAll(b)),c=b=>Math.max(0,Math.min(1,b)),d=(b,x)=>Number.isFinite(b)&&b>0?Math.floor(b):x,v=typeof window<"u"&&typeof window.matchMedia=="function"&&window.matchMedia("(pointer: coarse)").matches,_=d(a,4),p=d(o,6),m=(b,x)=>c(1-b/x);function E(){const b=h(r);if(!b)throw new Error(`PopupMode: textLayer not found by selector "${r}"`);if(u.textLayerRoot=b,u.landingParts=e.flatMap(x=>f(x)).filter(Boolean),u.landingParts.length===0)throw new Error("PopupMode: landingParts resolved to empty; check landingPartsSelectors")}function I(){const b=document.createElement("div");b.className="pop-timer",b.textContent=String(s),document.body.appendChild(b),u.timerEl=b}function C(){u.timerEl&&(u.timerEl.remove(),u.timerEl=null)}function y(){const b=document.createElement("div");b.className="erase-cursor",document.body.appendChild(b),u.eraseCursorEl=b;const x=(A,N)=>{u.eraseCursorEl&&(u.eraseCursorEl.style.left=`${A}px`,u.eraseCursorEl.style.top=`${N}px`)};x(window.innerWidth/2,window.innerHeight/2);const S=A=>x(A.clientX,A.clientY),R=A=>x(A.clientX,A.clientY);window.addEventListener("pointermove",S,{passive:!0}),v&&window.addEventListener("pointerdown",R,{passive:!0}),b._cleanup=()=>{window.removeEventListener("pointermove",S),v&&window.removeEventListener("pointerdown",R)}}function w(){const b=u.eraseCursorEl;b&&(typeof b._cleanup=="function"&&b._cleanup(),b.remove(),u.eraseCursorEl=null)}function T(){const b=h(n);if(!b)throw new Error(`PopupMode: textsScope not found by selector "${n}"`);const x="h1,h2,h3,h4,h5,h6,p,li,span,small,em,strong,b,i,u,blockquote,cite,code,pre,a,button,label,img",R=f(x,b).filter(A=>!u.textLayerRoot.contains(A));R.forEach(A=>{A.classList.add("fade-texts-target"),A.style.opacity=String(c(u.textsOpacity))}),u.textTargets=R,!(typeof MutationObserver>"u")&&(u.textsObserver||(u.textsObserver=new MutationObserver(A=>{if(u.eraseMode)for(const N of A)for(const P of N.addedNodes){if(!(P instanceof HTMLElement))continue;const D=[];P.matches?.(x)&&D.push(P);const H=P.querySelectorAll?.(x);H?.length&&D.push(...H),D.forEach(j=>{u.textLayerRoot?.contains(j)||(j.classList.contains("fade-texts-target")||j.classList.add("fade-texts-target"),j.style.opacity=String(c(u.textsOpacity)),u.textTargets.includes(j)||u.textTargets.push(j))})}}),u.textsObserver.observe(b,{childList:!0,subtree:!0})))}function B(b){const x=c(b);u.textsOpacity=x,u.textTargets.forEach(S=>{S.style.opacity=String(x)})}function U(b){const x=c(b);u.landingOpacity=x,u.landingParts.forEach(S=>{S.classList.add("fade-landing-target"),S.style.opacity=String(x)})}function F(){u.landingParts.forEach(b=>{b.style.display="none"})}function k(){u.timerRunning=!0,window.setTimeout(()=>{if(!u.timerRunning)return;I();let b=s;u.timerEl.textContent=String(b),u.intervalId=window.setInterval(()=>{b-=1,u.timerEl&&(u.timerEl.textContent=String(Math.max(0,b))),b<=0&&(window.clearInterval(u.intervalId),u.intervalId=null,C(),O())},1e3)},i)}function O(){u.eraseMode=!0,document.body.classList.add("is-erase-mode"),y(),u.landingParts.forEach(b=>{b.style.display="",b.style.opacity="1"}),u.landingOpacity=1,u.textsOpacity=1,T(),document.addEventListener("pointerdown",G,!0)}function q(){u.eraseMode=!1,document.body.classList.remove("is-erase-mode"),w(),document.removeEventListener("pointerdown",G,!0),u.textsObserver&&(u.textsObserver.disconnect(),u.textsObserver=null)}function W(){F(),q()}function G(b){if(!u.eraseMode||u.textLayerRoot.contains(b.target))return;if(u.clicks+=1,u.clicks<=_){const S=m(u.clicks,_);B(S);return}const x=u.clicks-_;if(x<=p){const S=m(x,p);U(S),x===p&&window.setTimeout(()=>{U(0),W()},l+40)}}function g(b){const x=b.target instanceof Element?b.target:null;!x||x.closest("[data-theme-toggle]")||!x.closest(t)||u.started||(u.started=!0,E(),k())}return document.addEventListener("click",g,!0),{destroy(){document.removeEventListener("click",g,!0),document.removeEventListener("pointerdown",G,!0),u.timerRunning=!1,u.intervalId&&window.clearInterval(u.intervalId),C(),w(),document.body.classList.remove("is-erase-mode"),u.textsObserver&&(u.textsObserver.disconnect(),u.textsObserver=null)}}}const r0=""+new URL("01d8f780a9d431417542aed850c4eada-DMIc_dGA.jpg",import.meta.url).href,n0=""+new URL("03e9b325a82abc0c50f934076dc692e7-CObx-nDo.jpg",import.meta.url).href,i0=""+new URL("07d37b6a5e16bcaee7c46739306f5851-C4GdXL0F.jpg",import.meta.url).href,s0=""+new URL("10a2fe0a82037890da6da38040237b8b-b_QbmjUo.jpg",import.meta.url).href,a0=""+new URL("12a9c8fd6aca69e6b80d414ec69baf9d-BUH6BpIx.jpg",import.meta.url).href,o0=""+new URL("29c59cc985397cbb9b0857f4f8199bc9-Bwzw8UNW.jpg",import.meta.url).href,l0=""+new URL("2b51a65ac005e68a379ae8d218cfd0cc-CtHQ8KKV.jpg",import.meta.url).href,u0=""+new URL("2c3570b2b2afaad146ad157b96eef92a-DLsY1tXJ.jpg",import.meta.url).href,h0=""+new URL("31bcd43600d0d1f665c735ae9c1ff39a-CKeJ6BQb.jpg",import.meta.url).href,c0=""+new URL("34af238c456f0dbd64b677548a3df7b6-DbPpuUl0.jpg",import.meta.url).href,f0=""+new URL("3cf79d5cdbf63f37c9825fd3bae422bb-DLXIXyCg.jpg",import.meta.url).href,d0=""+new URL("40d969cda1e0fb86f731d77ea1983971-CxCKKcyU.jpg",import.meta.url).href,p0=""+new URL("4156fda353c59e65be1574d4dcb10bc9-DJ0rVvFl.jpg",import.meta.url).href,v0=""+new URL("417572f9fd55795618353bd10362569a-C9-OPd10.jpg",import.meta.url).href,_0=""+new URL("41bde4d40026cc7148fe4fce8911ccea-eFoJGa-k.jpg",import.meta.url).href,m0=""+new URL("4420f980363eb0619e44156df16714bd-ChdDu7ix.jpg",import.meta.url).href,g0=""+new URL("4af815ba4d0053ed61bda434b3cf1073-DavxCypp.jpg",import.meta.url).href,y0=""+new URL("4bba33547df0d0d097797fb186489ee9-vIR39TU9.jpg",import.meta.url).href,b0=""+new URL("4c8a38c9420fa3bc934e8200a9aa79fa-Dz6uDTtb.jpg",import.meta.url).href,x0=""+new URL("54e96ba7d9de2e7a517733473215c387-Br2EIkRi.jpg",import.meta.url).href,T0=""+new URL("56449fd261ef87c2d767d9a23232c204-B3iZH5Sw.jpg",import.meta.url).href,E0=""+new URL("5abab4f24bc0a9a0b743c22ca5487d94-CUAlP9Th.jpg",import.meta.url).href,w0=""+new URL("5bff4aaa2d05ad0dc8dc99a4cf3834a7-DtTrQHMz.jpg",import.meta.url).href,I0=""+new URL("6245176208e1bd06cb73f30020d6f588-DA-Zt_1I.jpg",import.meta.url).href,R0=""+new URL("62c5d3981d242dc9679275f47a606b67-DILYL1re.jpg",import.meta.url).href,C0=""+new URL("676c25ca2f4322c1020050ad57fd1064-BZykjE1L.jpg",import.meta.url).href,A0=""+new URL("67e43143d3d3bc40a288671837433229-BvqIWXW-.jpg",import.meta.url).href,S0=""+new URL("68c01e891077b651678d6999aa036073-kI--OFKT.jpg",import.meta.url).href,P0=""+new URL("69f3671e14f94887f98e1b8027f02050-D7FtQ1gf.jpg",import.meta.url).href,N0=""+new URL("69f5bf94adcf81f0374864756c1dc87e-G87MgjsX.jpg",import.meta.url).href,O0=""+new URL("6c945ceabeb9ad108e21ad4a560c3507-DAACXItJ.jpg",import.meta.url).href,U0=""+new URL("6ed565c87cf88818671cd036362978fa-CrmPfE4g.jpg",import.meta.url).href,L0=""+new URL("7059efedd27dfe08b91477d695f13607-IVkxRTFr.jpg",import.meta.url).href,F0=""+new URL("70656e3a31dc7d80cdffd1cabf12220d-AhxmF83l.jpg",import.meta.url).href,M0=""+new URL("73607f77db4d6f7e9375fd8eb9e05cf1-jAweKoCx.jpg",import.meta.url).href,B0=""+new URL("7d54ab3844a96402e4f60728e9e7f0cb-Xq2Ou8LQ.jpg",import.meta.url).href,G0=""+new URL("7e4ddbd3ff2022ab6903b40d08323f51-Coq1ICDR.jpg",import.meta.url).href,D0=""+new URL("89bb386ce39918b9665d0e4102ca202a-CgCg4by2.jpg",import.meta.url).href,k0=""+new URL("8a9de82107b49b60f97959406b46d9f3-QTQzEeS6.jpg",import.meta.url).href,H0=""+new URL("8b96ea75292be28d1c15e103f13edbce-DEMvFs2U.jpg",import.meta.url).href,X0=""+new URL("8f3c2226d5f324e4884821872e559050-k4bfKw8r.jpg",import.meta.url).href,j0=""+new URL("8f7665a4603c3a6f0f977dacb9b156fc-Du8Q2Wo0.jpg",import.meta.url).href,V0=""+new URL("8f92bdec3e17d1d49e0e24b879f3090e-BecQPORg.jpg",import.meta.url).href,q0=""+new URL("90614d25777b6218b3a1793e041fe165-KAcbUqQg.jpg",import.meta.url).href,z0=""+new URL("906f34582afcae9d25185a0d57eeec2b-B2FKjMWc.jpg",import.meta.url).href,W0=""+new URL("99f1f99481a1f2e713fec5232d651f48-bNZcHiNW.jpg",import.meta.url).href,$0=""+new URL("9a90c784f0dfdde5e650d99d1ab6ba98-DMYf9Vwm.jpg",import.meta.url).href,Y0=""+new URL("9ac836257188980b2992167dab50124b-D60mmoJN.jpg",import.meta.url).href,K0=""+new URL("9c0f21a09d10c16e4164661ea6eda8f8-DV236wdl.jpg",import.meta.url).href,Z0=""+new URL("a0a719b13a569a96922bec447cd84951-CjR68Yot.jpg",import.meta.url).href,J0=""+new URL("a12cddc5c309118b1b1ab7fbfcbb089d-L8oljIMe.jpg",import.meta.url).href,Q0=""+new URL("a13f3c993b38b490bb0196d385f4f50e-BDS04wgw.jpg",import.meta.url).href,tb=""+new URL("a19b2f02ef2d913b0238923cd903dcd7-IhopyhHy.jpg",import.meta.url).href,eb=""+new URL("a2a01e688acd1e312593b63e7a9607fa-DHTYhXfI.jpg",import.meta.url).href,rb=""+new URL("a68254e8b69fb2913f9378d2d4b72d8f-Cj4Ab1fN.jpg",import.meta.url).href,nb=""+new URL("aa1f7671d283d326c2d42f9aabe72aa5-DrNhANq8.jpg",import.meta.url).href,ib=""+new URL("af0c62485e9aa29e137312e59919fd80-D4dy7KwQ.jpg",import.meta.url).href,sb=""+new URL("b016a77baa4fd17ba3073ef7f17273fd-BcC3Vl5x.jpg",import.meta.url).href,ab=""+new URL("c7dd64d195043482432b2023d0720998-Bbc624mt.jpg",import.meta.url).href,ob=""+new URL("c8bcf22cb941ea8cbb9006bd655477b1-0I8HeE1E.jpg",import.meta.url).href,lb=""+new URL("ccabba8dbde33084b322e4120e5c8071-C2IN5JCS.jpg",import.meta.url).href,ub=""+new URL("d224554ec8b50401e6d5c38825555042-Rv1R7Ujy.jpg",import.meta.url).href,hb=""+new URL("d3289269a615569de42f734bf10c69ac-CRrmipd3.jpg",import.meta.url).href,cb=""+new URL("d831efd2de3d7131343020aa0fd8a47d-CCYDmuwg.jpg",import.meta.url).href,fb=""+new URL("dd1053a7ff050b41f81abece2b36f2f7-CsP-xWGY.jpg",import.meta.url).href,db=""+new URL("e5ee2486d2d80752ba96fc81e62888b6-sKIdTPgA.jpg",import.meta.url).href,pb=""+new URL("e775c958c11a5a2d13d5cc07a5593fca-DgFZYQQy.jpg",import.meta.url).href,vb=""+new URL("e90847b80bf662cbd37bf1f0e7050ddb-ClJWldah.jpg",import.meta.url).href,_b=""+new URL("ea12d62ebd26bb90063523d05241b0f8-CG3_ktYm.jpg",import.meta.url).href,mb=""+new URL("efe8a29e2e8a4e08ed216f2b0da611e0-CuZFXABF.jpg",import.meta.url).href,gb=""+new URL("f917fa447671abe817200079a5d043b4-B1BEnPf9.jpg",import.meta.url).href,yb=""+new URL("fc05d76fa1407cefe3ad77c6b7d5e543-BwxVmjr0.jpg",import.meta.url).href,bb=""+new URL("original_1e1c34696458df2459a7c839a6208740-CPjNovSh.jpeg",import.meta.url).href,xb=""+new URL("original_283d5f140eba8ecb0ca6c500d6f6bc85-DbjxsW1P.webp",import.meta.url).href,Tb=""+new URL("original_4087f8f289d757ce4a1208a6fdf3c457-Dpo9mYFX.webp",import.meta.url).href,Eb=""+new URL("original_73aee4916f686212ed9fb17501337158-ILl7u7nc.webp",import.meta.url).href,wb=""+new URL("original_a7943ff1255c509b28e2fc1f36a490cd (1)-C9QpZ8Cv.webp",import.meta.url).href,Ib=""+new URL("original_affd69b492ea083b0b49e0e3ff945461-gi-FOpOk.webp",import.meta.url).href,Rb=""+new URL("original_ceb43ef3a106615314f0a3e7d615a785-n8KfGevG.webp",import.meta.url).href,Cb=""+new URL("original_e837b1e1ae0468b48b92b9308a5c1532 (1)-lQaVW9NC.webp",import.meta.url).href,Ab=""+new URL("original_efd580ca64a0711a418d66f58c564ecd-DrR1kUBw.jpg",import.meta.url).href,se={ACTIVATION_DELAY_MS:6e4,SPAWN_INTERVAL_MS:27e3,FLOAT_DURATION_MS:25e3,MAX_WIDTH_VW:45,MIN_WIDTH_VW:30,MIN_X_PCT:6,MAX_X_PCT:94},Sb=Object.assign({"../assets/imgs/go_touch_grass/01d8f780a9d431417542aed850c4eada.jpg":r0,"../assets/imgs/go_touch_grass/03e9b325a82abc0c50f934076dc692e7.jpg":n0,"../assets/imgs/go_touch_grass/07d37b6a5e16bcaee7c46739306f5851.jpg":i0,"../assets/imgs/go_touch_grass/10a2fe0a82037890da6da38040237b8b.jpg":s0,"../assets/imgs/go_touch_grass/12a9c8fd6aca69e6b80d414ec69baf9d.jpg":a0,"../assets/imgs/go_touch_grass/29c59cc985397cbb9b0857f4f8199bc9.jpg":o0,"../assets/imgs/go_touch_grass/2b51a65ac005e68a379ae8d218cfd0cc.jpg":l0,"../assets/imgs/go_touch_grass/2c3570b2b2afaad146ad157b96eef92a.jpg":u0,"../assets/imgs/go_touch_grass/31bcd43600d0d1f665c735ae9c1ff39a.jpg":h0,"../assets/imgs/go_touch_grass/34af238c456f0dbd64b677548a3df7b6.jpg":c0,"../assets/imgs/go_touch_grass/3cf79d5cdbf63f37c9825fd3bae422bb.jpg":f0,"../assets/imgs/go_touch_grass/40d969cda1e0fb86f731d77ea1983971.jpg":d0,"../assets/imgs/go_touch_grass/4156fda353c59e65be1574d4dcb10bc9.jpg":p0,"../assets/imgs/go_touch_grass/417572f9fd55795618353bd10362569a.jpg":v0,"../assets/imgs/go_touch_grass/41bde4d40026cc7148fe4fce8911ccea.jpg":_0,"../assets/imgs/go_touch_grass/4420f980363eb0619e44156df16714bd.jpg":m0,"../assets/imgs/go_touch_grass/4af815ba4d0053ed61bda434b3cf1073.jpg":g0,"../assets/imgs/go_touch_grass/4bba33547df0d0d097797fb186489ee9.jpg":y0,"../assets/imgs/go_touch_grass/4c8a38c9420fa3bc934e8200a9aa79fa.jpg":b0,"../assets/imgs/go_touch_grass/54e96ba7d9de2e7a517733473215c387.jpg":x0,"../assets/imgs/go_touch_grass/56449fd261ef87c2d767d9a23232c204.jpg":T0,"../assets/imgs/go_touch_grass/5abab4f24bc0a9a0b743c22ca5487d94.jpg":E0,"../assets/imgs/go_touch_grass/5bff4aaa2d05ad0dc8dc99a4cf3834a7.jpg":w0,"../assets/imgs/go_touch_grass/6245176208e1bd06cb73f30020d6f588.jpg":I0,"../assets/imgs/go_touch_grass/62c5d3981d242dc9679275f47a606b67.jpg":R0,"../assets/imgs/go_touch_grass/676c25ca2f4322c1020050ad57fd1064.jpg":C0,"../assets/imgs/go_touch_grass/67e43143d3d3bc40a288671837433229.jpg":A0,"../assets/imgs/go_touch_grass/68c01e891077b651678d6999aa036073.jpg":S0,"../assets/imgs/go_touch_grass/69f3671e14f94887f98e1b8027f02050.jpg":P0,"../assets/imgs/go_touch_grass/69f5bf94adcf81f0374864756c1dc87e.jpg":N0,"../assets/imgs/go_touch_grass/6c945ceabeb9ad108e21ad4a560c3507.jpg":O0,"../assets/imgs/go_touch_grass/6ed565c87cf88818671cd036362978fa.jpg":U0,"../assets/imgs/go_touch_grass/7059efedd27dfe08b91477d695f13607.jpg":L0,"../assets/imgs/go_touch_grass/70656e3a31dc7d80cdffd1cabf12220d.jpg":F0,"../assets/imgs/go_touch_grass/73607f77db4d6f7e9375fd8eb9e05cf1.jpg":M0,"../assets/imgs/go_touch_grass/7d54ab3844a96402e4f60728e9e7f0cb.jpg":B0,"../assets/imgs/go_touch_grass/7e4ddbd3ff2022ab6903b40d08323f51.jpg":G0,"../assets/imgs/go_touch_grass/89bb386ce39918b9665d0e4102ca202a.jpg":D0,"../assets/imgs/go_touch_grass/8a9de82107b49b60f97959406b46d9f3.jpg":k0,"../assets/imgs/go_touch_grass/8b96ea75292be28d1c15e103f13edbce.jpg":H0,"../assets/imgs/go_touch_grass/8f3c2226d5f324e4884821872e559050.jpg":X0,"../assets/imgs/go_touch_grass/8f7665a4603c3a6f0f977dacb9b156fc.jpg":j0,"../assets/imgs/go_touch_grass/8f92bdec3e17d1d49e0e24b879f3090e.jpg":V0,"../assets/imgs/go_touch_grass/90614d25777b6218b3a1793e041fe165.jpg":q0,"../assets/imgs/go_touch_grass/906f34582afcae9d25185a0d57eeec2b.jpg":z0,"../assets/imgs/go_touch_grass/99f1f99481a1f2e713fec5232d651f48.jpg":W0,"../assets/imgs/go_touch_grass/9a90c784f0dfdde5e650d99d1ab6ba98.jpg":$0,"../assets/imgs/go_touch_grass/9ac836257188980b2992167dab50124b.jpg":Y0,"../assets/imgs/go_touch_grass/9c0f21a09d10c16e4164661ea6eda8f8.jpg":K0,"../assets/imgs/go_touch_grass/a0a719b13a569a96922bec447cd84951.jpg":Z0,"../assets/imgs/go_touch_grass/a12cddc5c309118b1b1ab7fbfcbb089d.jpg":J0,"../assets/imgs/go_touch_grass/a13f3c993b38b490bb0196d385f4f50e.jpg":Q0,"../assets/imgs/go_touch_grass/a19b2f02ef2d913b0238923cd903dcd7.jpg":tb,"../assets/imgs/go_touch_grass/a2a01e688acd1e312593b63e7a9607fa.jpg":eb,"../assets/imgs/go_touch_grass/a68254e8b69fb2913f9378d2d4b72d8f.jpg":rb,"../assets/imgs/go_touch_grass/aa1f7671d283d326c2d42f9aabe72aa5.jpg":nb,"../assets/imgs/go_touch_grass/af0c62485e9aa29e137312e59919fd80.jpg":ib,"../assets/imgs/go_touch_grass/b016a77baa4fd17ba3073ef7f17273fd.jpg":sb,"../assets/imgs/go_touch_grass/c7dd64d195043482432b2023d0720998.jpg":ab,"../assets/imgs/go_touch_grass/c8bcf22cb941ea8cbb9006bd655477b1.jpg":ob,"../assets/imgs/go_touch_grass/ccabba8dbde33084b322e4120e5c8071.jpg":lb,"../assets/imgs/go_touch_grass/d224554ec8b50401e6d5c38825555042.jpg":ub,"../assets/imgs/go_touch_grass/d3289269a615569de42f734bf10c69ac.jpg":hb,"../assets/imgs/go_touch_grass/d831efd2de3d7131343020aa0fd8a47d.jpg":cb,"../assets/imgs/go_touch_grass/dd1053a7ff050b41f81abece2b36f2f7.jpg":fb,"../assets/imgs/go_touch_grass/e5ee2486d2d80752ba96fc81e62888b6.jpg":db,"../assets/imgs/go_touch_grass/e775c958c11a5a2d13d5cc07a5593fca.jpg":pb,"../assets/imgs/go_touch_grass/e90847b80bf662cbd37bf1f0e7050ddb.jpg":vb,"../assets/imgs/go_touch_grass/ea12d62ebd26bb90063523d05241b0f8.jpg":_b,"../assets/imgs/go_touch_grass/efe8a29e2e8a4e08ed216f2b0da611e0.jpg":mb,"../assets/imgs/go_touch_grass/f917fa447671abe817200079a5d043b4.jpg":gb,"../assets/imgs/go_touch_grass/fc05d76fa1407cefe3ad77c6b7d5e543.jpg":yb,"../assets/imgs/go_touch_grass/original_1e1c34696458df2459a7c839a6208740.jpeg":bb,"../assets/imgs/go_touch_grass/original_283d5f140eba8ecb0ca6c500d6f6bc85.webp":xb,"../assets/imgs/go_touch_grass/original_4087f8f289d757ce4a1208a6fdf3c457.webp":Tb,"../assets/imgs/go_touch_grass/original_73aee4916f686212ed9fb17501337158.webp":Eb,"../assets/imgs/go_touch_grass/original_a7943ff1255c509b28e2fc1f36a490cd (1).webp":wb,"../assets/imgs/go_touch_grass/original_affd69b492ea083b0b49e0e3ff945461.webp":Ib,"../assets/imgs/go_touch_grass/original_ceb43ef3a106615314f0a3e7d615a785.webp":Rb,"../assets/imgs/go_touch_grass/original_e837b1e1ae0468b48b92b9308a5c1532 (1).webp":Cb,"../assets/imgs/go_touch_grass/original_efd580ca64a0711a418d66f58c564ecd.jpg":Ab}),Zi=Object.values(Sb);function Pb(t,r,e){return Math.max(r,Math.min(e,t))}function Ji(t,r){return t+Math.random()*(r-t)}function Nb(t){return t[Math.floor(Math.random()*t.length)]}function Uu(){return typeof window>"u"||typeof window.matchMedia!="function"?!1:window.matchMedia("(max-width: 500px)").matches||window.matchMedia("(pointer: coarse)").matches}function Ob(t={}){const r=t.mountTo??document.body,e=()=>Uu()?Math.round(se.SPAWN_INTERVAL_MS/1.5):se.SPAWN_INTERVAL_MS;Zi.length||console.warn("[go-touch-grass] No images found in /src/assets/imgs/go-touch-grass");const n=document.createElement("div");n.className="gtg-layer",n.setAttribute("aria-hidden","true"),r.appendChild(n);let i=null,s=null,a=!1,o=Date.now()+se.ACTIVATION_DELAY_MS,l=null,u=!1;function h(){if(!a||!Zi.length)return;const I=Nb(Zi),C=document.createElement("div");if(C.className="gtg-item",C.style.setProperty("--gtg-float-ms",`${se.FLOAT_DURATION_MS}ms`),Uu()){const T=Ji(50,80);C.style.setProperty("--gtg-w",`${T}dvw`)}else{const T=Ji(se.MIN_WIDTH_VW,se.MAX_WIDTH_VW);C.style.setProperty("--gtg-w",`${T}vw`)}const y=Pb(Ji(se.MIN_X_PCT,se.MAX_X_PCT),0,100);C.style.left=`${y}%`;const w=document.createElement("img");w.className="gtg-img",w.src=I,w.alt="",w.decoding="async",w.loading="eager",w.draggable=!1,w.addEventListener("click",T=>{if(T.preventDefault(),T.stopPropagation(),C.classList.contains("is-dismissed"))return;C.classList.add("is-dismissed");const B=()=>C.remove();C.addEventListener("transitionend",B,{once:!0}),window.setTimeout(B,450)}),C.appendChild(w),n.appendChild(C),C.addEventListener("animationend",()=>{C.remove()},{once:!0})}function f(){i&&window.clearTimeout(i),i=null}function c(){s&&window.clearTimeout(s),s=null}function d(){if(a)return;f();const I=o-Date.now();if(I<=0){_();return}i=window.setTimeout(()=>{i=null,_()},I)}function v(){if(!a)return;c();const I=Date.now(),C=e();l==null&&(l=I+C);let y=l-I;y<=0&&(h(),l=I+C,y=C),s=window.setTimeout(()=>{s=null,h(),l=Date.now()+e(),v()},y)}function _(){a||(a=!0,h(),l=Date.now()+e(),v())}function p(){u||(u=!0,f(),c())}function m(){u&&(u=!1,a?v():d())}const E=()=>{typeof document>"u"||(document.visibilityState==="hidden"?p():m())};return typeof document<"u"&&"visibilityState"in document&&document.addEventListener("visibilitychange",E,{passive:!0}),typeof document<"u"&&document.visibilityState==="hidden"?p():d(),{unmount(){typeof document<"u"&&document.removeEventListener("visibilitychange",E),f(),c(),n.remove(),i=null,s=null,a=!1,u=!1}}}function Ub(t){let r=document.getElementById("feed");return r||(r=document.createElement("main"),r.id="feed",r.className="ll__feed",t.appendChild(r),r)}"scrollRestoration"in history&&(history.scrollRestoration="manual");window.scrollTo(0,0);const ur=document.getElementById("app"),Lb=Ub(ur);Ry({mountTo:ur,data:zh,zIndex:0});const Fb=Ey({mountTo:document.body,zIndex:1,attrs:{noretina:"true"}}),Bh=Ly({landingLayer:Fb});Bh.bindToggleButtons();Bh.exposeThemeApi();jy();Yy({mountTo:document.body});console.log("[engine] mounting sections:",Lu?.sections?.length);hc(Lb,Lu.sections);Qy();const Mb=cc({feed:document.getElementById("feed"),batchSize:6,nearBottomPx:900,excludeTypes:["hero-block"],protectHero:!0,minDistance:2,bufferAbove:5,bufferBelow:12});Mb.enable();ur&&ur.scrollTop&&(ur.scrollTop=0);e0({textLayerSelector:"section.tl",landingPartsSelectors:["dunchek-gradient.c-PixiIntro-gradient","#feed","button[data-theme-toggle].ll__theme-toggle--floating"],textsScopeSelector:"#feed"});Ob();
